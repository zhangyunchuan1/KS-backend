webpackJsonp([156],{xZLP:function(t,e){},yGZg:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={name:"ArticleTitle",components:{BreadCrumb:a("ZPfm").a},data:function(){return{breadData:[{id:1,name:"功能控制",urls:"/index/functionControl",icon:"icon-home"},{id:2,name:"专业目录",urls:"/index/functionControl/professionalCatalog/professional-catalog",icon:"icon-home"},{id:3,name:"近义词管理",urls:"/index/functionControl/professionalCatalog/synonym-management",icon:"icon-home"}],tableData:[],catalogText:[{type:1,text:"修改一级目录"},{type:2,text:"修改二级目录"},{type:3,text:"修改三级目录"}],catalogData:[],addDirectoryDialog:!1,catalogTextID:null,catalogTitle:"",centerDialogVisible:!1,newWord:"",typeSelect:"",majorType:[],mainWord:"",currentObj:"",type:null,dialogVisible:!1,CategoryName:"",fileList2:[],dialogImageUrl:"",cndImgUrl:"",textarea:"",currentPage:1,pageSize:25,total:0}},mounted:function(){this.getlistDataFn(),this.getMajorList()},methods:{handleModifyMainWord:function(){console.log(this.type,this.currentObj),this.CategoryName="",this.textarea="",this.fileList2=[],1===this.type?(this.CategoryName=this.mainWord,this.textarea=this.currentObj.m1_des):2===this.type?(this.CategoryName=this.mainWord,this.textarea=this.currentObj.m2_des):3===this.type&&(this.CategoryName=this.mainWord,this.textarea=this.currentObj.m3_des),this.addDirectoryDialog=!0},handleSaveDirectory:function(){console.log(this.CategoryName,this.cndImgUrl,this.textarea),1===this.type?this.modifymenu(this.currentObj.m1_id,this.currentObj.folder_id,this.CategoryName,this.textarea,this.type):2===this.type?this.modifymenu(this.currentObj.m2_id,this.currentObj.m1_id,this.CategoryName,this.textarea,this.type):3===this.type&&this.modifymenu(this.currentObj.m3_id,this.currentObj.m2_id,this.CategoryName,this.textarea,this.type)},modifymenu:function(t,e,a,o,i){var n=this;this.HttpClient.post("/admin/menu/edit",{menu_type:3,id:t,pid:e,name:a,description:o,type:i}).then(function(t){console.log(t),200===t.data.code&&(n.mainWord=a,setTimeout(function(){n.getlistDataFn(),n.addDirectoryDialog=!1},500))})},getMajorList:function(){var t=this;this.HttpClient.post("/admin/menu/getList",{menu_type:3,type:0}).then(function(e){var a=e.data.data;for(var o in a)t.majorType.push(a[o])})},getlistDataFn:function(){var t=this,e={size:this.pageSize,page:this.currentPage,m1_menu_id:this.typeSelect};this.HttpClient.post("/admin/major/getListWithHomoionym",e).then(function(e){200===e.data.code&&(t.total=e.data.data.total,t.tableData=e.data.data.data,console.log(t.tableData))})},handleClick:function(t,e){this.type=e.type,console.log(t),this.currentObj=t,this.centerDialogVisible=!0,this.catalogTitle=e.text,1===e.type?(null==t.m1_homoionym?this.catalogData=[]:this.catalogData=t.m1_homoionym,this.catalogTextID=t.m1_id,this.mainWord=t.m1_name):2===e.type?(null==t.m2_homoionym?this.catalogData=[]:this.catalogData=t.m2_homoionym,this.catalogTextID=t.m2_id,this.mainWord=t.m2_name):3===e.type&&(null==t.m3_homoionym?this.catalogData=[]:this.catalogData=t.m3_homoionym,this.catalogTextID=t.m3_id,this.mainWord=t.m3_name)},handleClose:function(t){var e={id:this.catalogTextID,action:"del",name:t};this.operateFn(e)},operateFn:function(t){var e=this;this.HttpClient.post("/admin/major/menuMajorChangeHomoionym",t).then(function(a){200===a.data.code&&(e.$message.success(a.data.msg),"del"==t.action?e.catalogData.forEach(function(a,o){a==t.name&&e.catalogData.splice(o,1)}):"add"==t.action&&e.catalogData.push(e.newWord),setTimeout(function(){e.getlistDataFn(),e.newWord=""},500))})},addNewwordFn:function(){var t={id:this.catalogTextID,action:"add",name:this.newWord};this.operateFn(t)},renderEquiptype:function(t,e){var a=this;e.column;return t("el-select",{props:{value:"专业名称",placeholder:"专业名称"},on:{input:function(t){a.typeSelect=t,a.getlistDataFn()}}},[this.majorType.map(function(e){return t("el-option",{props:{value:e.menu_id,label:e.name}})})])},currentChange:function(t){this.currentPage=t,this.getlistDataFn()}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wordmanagementBox"},[a("BreadCrumb",{staticClass:"bread",attrs:{breadData:t.breadData}}),t._v(" "),a("div",{staticClass:"word_titlebox"},[a("div",{staticClass:"major_table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"folder_name",label:"专业名称","render-header":t.renderEquiptype}}),t._v(" "),a("el-table-column",{attrs:{prop:"m1_homoionym",label:"一级目录"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.m1_name?a("el-tag",{attrs:{type:"success"}},[t._v(t._s(e.row.m1_name))]):t._e(),t._v(" "),t._l(e.row.m1_homoionym,function(e,o){return a("el-tag",{key:o,attrs:{type:"info"}},[t._v(t._s(e))])})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"m1_img",label:"图片"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"50px"},attrs:{src:t.Tools.handleImg(e.row.m1_img),alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"m1_des",label:"简介"}}),t._v(" "),a("el-table-column",{attrs:{prop:"m2_homoionym",label:"二级目录"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.m2_name?a("el-tag",{attrs:{type:"success"}},[t._v(t._s(e.row.m2_name))]):t._e(),t._v(" "),t._l(e.row.m2_homoionym,function(e,o){return a("el-tag",{key:o,attrs:{type:"info"}},[t._v(t._s(e))])})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"m2_img",label:"图片"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"50px"},attrs:{src:t.Tools.handleImg(e.row.m2_img),alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"m2_des",label:"简介"}}),t._v(" "),a("el-table-column",{attrs:{prop:"m3_homoionym",label:"三级目录"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.m3_name?a("el-tag",{attrs:{type:"success"}},[t._v(t._s(e.row.m3_name))]):t._e(),t._v(" "),t._l(e.row.m3_homoionym,function(e,o){return a("el-tag",{key:o,attrs:{type:"info"}},[t._v(t._s(e))])})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"m3_img",label:"图片"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"50px"},attrs:{src:t.Tools.handleImg(e.row.m3_img),alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"m3_des",label:"简介"}}),t._v(" "),a("el-table-column",{attrs:{prop:"created_at",label:"创建时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(1===e.row.status?"正常":"禁用"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(t.catalogText,function(o,i){return a("el-button",{key:i,attrs:{type:"text",size:"small"},on:{click:function(a){t.handleClick(e.row,o)}}},[t._v(t._s(o.text))])})}}])})],1),t._v(" "),t.total?a("el-pagination",{attrs:{layout:"prev, pager, next",total:t.total,"page-size":t.pageSize},on:{"current-change":t.currentChange}}):t._e()],1),t._v(" "),a("div",{staticClass:"alertbox"},[a("el-dialog",{attrs:{title:t.catalogTitle,visible:t.centerDialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("div",{staticClass:"topbox"},[t.mainWord?a("el-button",{attrs:{type:"success",size:"small"}},[t._v(t._s(t.mainWord))]):t._e(),t._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-edit"},on:{click:t.handleModifyMainWord}})],1),t._v(" "),a("div",{staticClass:"topbox"},t._l(t.catalogData,function(e,o){return a("el-tag",{key:o,attrs:{type:"",closable:""},on:{close:function(a){t.handleClose(e)}}},[t._v(t._s(e))])})),t._v(" "),a("div",{staticClass:"bottombox"},[a("div",{staticClass:"bottomtitle"},[t._v("添加新的近义词")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.newWord,callback:function(e){t.newWord=e},expression:"newWord"}}),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.addNewwordFn}})],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("关 闭")])],1)]),t._v(" "),a("el-dialog",{attrs:{visible:t.addDirectoryDialog,width:"470px","custom-class":"addDirectoryDialog"},on:{"update:visible":function(e){t.addDirectoryDialog=e}}},[a("span",{staticClass:"addDirectoryDialog_title",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"iconfont icon-orderedlist"}),t._v("修改主词汇")]),t._v(" "),a("div",{staticClass:"addDirectoryDialog_main"},[a("div",{staticClass:"dialog_main_header"},[a("p",[t._v("目录名称：")]),t._v(" "),a("el-input",{attrs:{placeholder:"输入目录名称"},model:{value:t.CategoryName,callback:function(e){t.CategoryName=e},expression:"CategoryName"}})],1),t._v(" "),a("div",{staticClass:"dialog_textarea"},[a("el-input",{attrs:{type:"textarea",rows:4,resize:"none",placeholder:"请输入简介内容"},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}})],1)]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addDirectoryDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handleSaveDirectory}},[t._v("保 存")])],1)])],1)])],1)},staticRenderFns:[]};var n=a("VU/8")(o,i,!1,function(t){a("xZLP")},null,null);e.default=n.exports}});