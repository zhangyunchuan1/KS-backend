webpackJsonp([159],{"/CM2":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("mvHQ"),i=a.n(n),o={name:"MessageContent",components:{BreadCrumb:a("ZPfm").a},data:function(){return{breadData:[{id:1,name:"功能控制",urls:"/index/functionControl",icon:"icon-home"},{id:2,name:"弹框内容管理",urls:"/index/functionControl/messageBox/message-box",icon:"icon-home"},{id:3,name:"弹框内容",urls:"/index/functionControl/messageBox/message-content",icon:"icon-home"}],tableData:[],alertTitle:"",centerDialogVisible:!1,options:[],value:"",Twooptions:[],Twovalue:"",Threeoptions:[],Threevalue:"",tags:[],inputValue:"",textarea:"",otherTextarea:"",positionValue:"",infoID:null,currentPage:1,pageSize:25,total:0}},mounted:function(){this.getlistData()},methods:{getlistData:function(){var t=this,e={type:4,size:this.pageSize,page:this.currentPage};this.HttpClient.post("/admin/templates/getList",e).then(function(e){200===e.data.code&&(t.total=e.data.data.total,t.tableData=e.data.data.data)})},addalertBoxFn:function(){var t=this;this.alertTitle="添加",this.infoID=null,this.value="",this.Twovalue="",this.Threevalue="",this.inputValue="",this.tags=[],this.textarea="",this.otherTextarea="",this.centerDialogVisible=!0;this.HttpClient.post("/admin/menu/getList",{menu_type:4,type:1}).then(function(e){200==e.data.code&&(t.options=e.data.data)})},addMenulistFn:function(){var t=this;this.centerDialogVisible=!1;var e={};e.menu_1=this.value,e.menu_2=this.Twovalue,e.menu_3=this.Threevalue,e.info=this.inputValue,e.description=this.textarea,e.remark=this.otherTextarea,e.replace=this.tags;var a=(new Date).getTime();if("修改"==this.alertTitle){var n={id:this.infoID,type:4,name:a,content:i()(e)};this.HttpClient.post("/admin/templates/edit",n).then(function(e){200===e.data.code&&setTimeout(function(){t.getlistData()},500)})}else if("添加"==this.alertTitle){var o={type:4,name:a,content:i()(e)};this.HttpClient.post("/admin/templates/create",o).then(function(e){200===e.data.code&&(t.$message.success(e.data.msg),setTimeout(function(){t.getlistData()},500))})}},changeOneModel:function(){for(var t in this.Twovalue="",this.Threevalue="",this.options)this.value==this.options[t].menu_id&&(this.Twooptions=this.options[t].child)},changeTwoModel:function(){for(var t in this.Threevalue="",this.Twooptions)this.Twovalue==this.Twooptions[t].menu_id&&(this.Threeoptions=this.Twooptions[t].child)},addInformationFn:function(){console.log(this.inputValue),this.tags.push(this.positionValue)},deleteInforFn:function(t){var e=this;console.log(t),this.tags.forEach(function(a,n){a==t&&e.tags.splice(n,1)})},amendInfo:function(t){var e=this;console.log(t),this.alertTitle="修改",this.infoID=t.id,this.centerDialogVisible=!0,this.value=t.content.menu_1,this.Twovalue=t.content.menu_2,this.Threevalue=t.content.menu_3,this.inputValue=t.content.info,this.tags=t.content.replace,this.textarea=t.content.description,this.otherTextarea=t.content.remark;this.HttpClient.post("/admin/menu/getList",{menu_type:4,type:1}).then(function(t){if(200==t.data.code)for(var a in e.options=t.data.data,e.options)if(e.value==e.options[a].menu_id)for(var a in e.Twooptions=e.options[a].child,e.Twooptions)e.Twovalue==e.Twooptions[a].menu_id&&(e.Threeoptions=e.Twooptions[a].child)})},deleteInfo:function(t){var e=this,a={id:t.id};this.HttpClient.post("/admin/templates/destroy",a).then(function(t){200===t.data.code&&setTimeout(function(){e.getlistData()},500)})},currentChange:function(t){this.currentPage=t,this.getlistData()}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"messagecontentBox"},[a("BreadCrumb",{staticClass:"bread",attrs:{breadData:t.breadData}}),t._v(" "),a("div",{staticClass:"messagebox"},[t._m(0),t._v(" "),a("div",{staticStyle:{padding:"20px","box-sizing":"border-box"}},[a("div",{staticClass:"buttonbox"},[a("el-button",{attrs:{type:"primary"},on:{click:t.addalertBoxFn}},[t._v("添加")])],1),t._v(" "),a("div",{staticClass:"tablebox"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"menu[0].name",label:"一级目录"}}),t._v(" "),a("el-table-column",{attrs:{prop:"menu[1].name",label:"二级目录"}}),t._v(" "),a("el-table-column",{attrs:{prop:"menu[2].name",label:"三级目录"}}),t._v(" "),a("el-table-column",{attrs:{prop:"content.info",label:"信息","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"content.description",label:"事件"}}),t._v(" "),a("el-table-column",{attrs:{prop:"content.remark",label:"备注","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(1===e.row.status?"正常":"禁用"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.amendInfo(e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.deleteInfo(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),t.total?a("el-pagination",{attrs:{layout:"prev, pager, next",total:t.total,"page-size":t.pageSize},on:{"current-change":t.currentChange}}):t._e()],1)])]),t._v(" "),a("div",{staticClass:"alertbox"},[a("el-dialog",{attrs:{title:t.alertTitle,visible:t.centerDialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("div",{staticClass:"leftbox"},[a("div",{staticClass:"grade"},[a("el-tag",{attrs:{type:"info"}},[t._v("一级")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.changeOneModel},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return a("el-option",{key:t.menu_id,attrs:{label:t.name,value:t.menu_id}})}))],1),t._v(" "),a("div",{staticClass:"grade"},[a("el-tag",{attrs:{type:"info"}},[t._v("二级")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.changeTwoModel},model:{value:t.Twovalue,callback:function(e){t.Twovalue=e},expression:"Twovalue"}},t._l(t.Twooptions,function(t){return a("el-option",{key:t.menu_id,attrs:{label:t.name,value:t.menu_id}})}))],1),t._v(" "),a("div",{staticClass:"grade"},[a("el-tag",{attrs:{type:"info"}},[t._v("三级")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.Threevalue,callback:function(e){t.Threevalue=e},expression:"Threevalue"}},t._l(t.Threeoptions,function(t){return a("el-option",{key:t.menu_id,attrs:{label:t.name,value:t.menu_id}})}))],1),t._v(" "),a("div",{staticClass:"grade infor"},[a("el-tag",{attrs:{type:"info"}},[t._v("信息")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}})],1),t._v(" "),a("div",{staticClass:"grade infor"},[a("el-tag",{attrs:{type:"info"}},[t._v("定位符")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.positionValue,callback:function(e){t.positionValue=e},expression:"positionValue"}}),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.addInformationFn}})],1),t._v(" "),a("el-card",{staticClass:"box-card"},t._l(t.tags,function(e){return a("el-tag",{key:e,attrs:{closable:"",type:"tag.type"},on:{close:function(a){t.deleteInforFn(e)}}},[t._v(t._s(e))])}))],1),t._v(" "),a("div",{staticClass:"leftbox rightbox"},[a("div",{staticClass:"grade"},[a("div",{staticClass:"thingTitle"},[t._v("事件")]),t._v(" "),a("el-input",{attrs:{type:"textarea",rows:2,resize:"none",placeholder:"请输入内容"},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}})],1),t._v(" "),a("div",{staticClass:"grade rightinfor"},[a("el-input",{attrs:{type:"textarea",rows:6,resize:"none",placeholder:"备注"},model:{value:t.otherTextarea,callback:function(e){t.otherTextarea=e},expression:"otherTextarea"}})],1)]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addMenulistFn}},[t._v("确 定")])],1)])],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"titlebox"},[e("span",[this._v("弹框内容")])])}]};var s=a("VU/8")(o,l,!1,function(t){a("IDqO")},null,null);e.default=s.exports},IDqO:function(t,e){}});