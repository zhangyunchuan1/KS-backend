webpackJsonp([28],{dUPe:function(e,t){},fOv0:function(e,t){},m0EJ:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={name:"SystemMenu",components:{BreadCrumb:i("ZPfm").a,menuTrees:{name:"tree-menu",template:'\n          <div class="tree-menu">\n            <div class="label-wrapper">\n              <div :style="indent" class="parent_menu">\n              <div class="menu_label"  @click="toggleChildren">\n                <i v-if="child" class="iconfont icon_left" :class="showChildren?\'icon-jian-xianxingfangkuang\':\'icon-jia-xianxingfangkuang\'"></i>\n                <el-button size="mini" v-if="type === undefined" type="primary">{{ label }}</el-button>\n                <el-button size="mini" v-if="type === 1" type="primary" plain>{{ label }}</el-button>\n                <el-button size="mini" v-if="type === 2" type="info" plain>{{ label }}</el-button>\n              </div>  \n                <el-button size="mini" type="primary" icon="el-icon-plus" circle @click="openMenuModal(id,type,pid,folder_id)"></el-button>\n                <el-button size="mini" type="danger" icon="el-icon-delete" circle @click="deleteMenu(id,type)"></el-button>\n                <el-button v-if="type !== undefined" size="mini" type="info" icon="el-icon-edit" circle @click="editMenu(id,type,pid,folder_id)"></el-button>\n              </div>\n            </div>\n            <div class="xjez">\n              <tree-menu v-if="showChildren" v-for="item in child" :child="item.child" \n                :label="item.name" :depth="depth + 1" :key="item.id" :id="item.id" :type="item.type" :pid="item.pid" @ee="xx" :folder_id="folder_id" @pp="ppp">\n              </tree-menu>\n            </div>\n            <el-dialog\n              width="470px"\n              custom-class="deleteDialog"\n              :visible.sync="deleteDialog"\n              center>\n              <span slot="title" class="deleteDialog_title"><i class="iconfont icon-huaban4"></i></span>\n              <div class="deleteDialog_box">\n                <i class="iconfont icon-warning-circle"></i>\n                <p>确定删除 " {{ label }} " 吗？</p>\n              </div>\n              <span slot="footer" class="dialog-footer">\n                  <el-button @click="deleteDialog = false">取 消</el-button>\n                  <el-button type="primary" @click="handleSureDelete">确 定</el-button>\n                </span>\n            </el-dialog>\n          </div>\n        ',props:["child","label","depth","id","type","name","pid","folder_id"],data:function(){return{showChildren:!1,menu_visible:!1,menu_id:null,menu_type:null,menu_pid:null,menu_folderId:null,deleteDialog:!1,deId:null,deType:null}},computed:{indent:function(){return{transform:"translate("+20*this.depth+"px)"}}},methods:{consColor:function(e){console.log(e)},ppp:function(){this.$emit("pp")},toggleChildren:function(){this.showChildren=!this.showChildren},openMenuModal:function(e,t,i,n){console.log(e,t,i,n),this.menu_visible=!0,this.menu_id=e,this.menu_type=t,this.menu_pid=i,this.menu_folderId=n,console.log(this.menu_type+"级数"),this.$emit("ee",this.menu_type),this.$store.dispatch("getMenuInfo",{id:this.menu_id,menu_visible:this.menu_visible,type:this.menu_type,source:1,pid:this.menu_pid,folder_id:this.menu_folderId}).then(function(e){})},deleteMenu:function(e,t){this.deleteDialog=!0,console.log(e,t),this.deId=e,this.deType=t?null:t},handleSureDelete:function(){var e=this;void 0===this.deType?this.HttpClient.post("/admin/folder/destroy",{id:this.deId}).then(function(t){200===t.data.code?(e.$message.success(t.data.msg),setTimeout(function(){e.$emit("pp")},500)):e.$message.error(t.data.msg)}):this.HttpClient.post("/admin/menu/destroy",{id:this.deId}).then(function(t){console.log(t),200===t.data.code?(e.$message.success(t.data.msg),setTimeout(function(){e.$emit("pp")},500)):e.$message.error(t.data.msg)})},editMenu:function(e,t,i,n){void 0===i?this.$message.success("菜单文件夹不能修改"):(console.log("修改菜单"),console.log(e,t,i,n),this.menu_visible=!0,this.menu_id=e,this.menu_type=t,this.menu_pid=i,this.menu_folderId=n,console.log(this.menu_pid+"父级ID"),this.$emit("ee",this.menu_type),this.$store.dispatch("getMenuInfo",{id:this.menu_id,menu_visible:this.menu_visible,type:this.menu_type,source:2,pid:this.menu_pid,folder_id:this.menu_folderId}).then(function(e){}))},xx:function(){this.$emit("ee",{id:this.menu_id,menu_visible:this.menu_visible,type:this.menu_type})}}}},data:function(){return{menu_list:[],menuIcon:"",menuUrl:"",menuName:"",list:[],title:"",show:!1,typeTitle:"",index:0,menuVisible:!1,menu_id:null,menu_type:null,pid:null,breadData:[{id:1,name:"系统管理",urls:"/index",icon:"icon-home"},{id:2,name:"菜单管理",urls:"/index/test",icon:"icon-home"}],treeData:{}}},mounted:function(){this.getMenulist()},methods:{getMenulist:function(){var e=this;this.HttpClient.post("/admin/menu/getList",{}).then(function(t){console.log(t),e.menu_list=t.data.data;for(var i=0;i<e.menu_list;i++)e.menu_list[i].push(fd_id=t.data.data[i].folder_id)})},addTitle:function(){var e=this;this.HttpClient.post("/admin/folder/create",{name:this.title}).then(function(t){console.log(t),200===t.data.code?(e.$message.success(t.data.msg),setTimeout(function(){e.getMenulist(),e.title=""},500)):e.$message.error(t.data.msg)})},getMenu:function(e){var t=this;setTimeout(function(){var e=t.$store.state.menu.menu;t.menuVisible=e.menu_visible,t.menu_id=e.id,t.menu_type=e.type,console.log(e,t.menu_id,t.menu_type,t.menuVisible+"信息")})},submit:function(){var e=this,t=this.$store.state.menu.menu.source,i=this.$store.state.menu.menu.id,n=this.$store.state.menu.menu.type,s=this.$store.state.menu.menu.pid;console.log(this.$store.state.menu),1==t?(console.log("这是新建菜单"),null==this.menu_type?(this.menu_type=1,this.pid=0):(this.menu_type=this.menu_type+1,this.pid=this.$store.state.menu.menu.id),console.log(this.menu_type+"/"+this.pid+"/"+this.$store.state.menu.menu.folder_id),this.HttpClient.post("/admin/menu/create",{menu_type:0,name:this.menuName,url:this.menuUrl,pid:this.pid,type:this.menu_type,folder_id:this.$store.state.menu.menu.folder_id}).then(function(t){console.log(t),200===t.data.code?setTimeout(function(){e.getMenulist(),e.menuVisible=!1},300):e.$message.error(t.data.msg)})):(console.log("这是修改菜单"),this.pid=1==n?0:s,this.HttpClient.post("/admin/menu/edit",{type:n,id:i,name:this.menuName,url:this.menuUrl,pid:s}).then(function(t){console.log(t),200===t.data.code&&(e.$message.success(t.data.msg),setTimeout(function(){e.getMenulist(),e.menuVisible=!1},500))}))}}},s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"systemMenu"},[i("BreadCrumb",{staticClass:"bread",attrs:{breadData:e.breadData}}),e._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"menu_head"},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.addTitle()}}},[e._v("添加标题")]),e._v(" "),i("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),e._v(" "),i("div",{staticClass:"trees"},[i("div",{staticClass:"tree_left"},e._l(e.menu_list,function(t,n){return i("div",{key:n},[i("menuTrees",{attrs:{child:t.child,depth:0,label:t.folder_name,id:t.folder_id,type:t.type,name:t.name,pid:t.pid,folder_id:t.folder_id},on:{ee:e.getMenu,pp:e.getMenulist}})],1)})),e._v(" "),i("div",{staticClass:"tree_right"},[i("div",{staticClass:"item_contain",style:e.menuVisible?{display:"block"}:{display:"none"}},[i("div",{staticClass:"items"},[i("label",{staticClass:"item_lb"},[e._v("菜单名称:")]),e._v(" "),i("el-input",{staticClass:"item_input",attrs:{placeholder:"请输入菜单名称",size:"mini"},model:{value:e.menuName,callback:function(t){e.menuName=t},expression:"menuName"}})],1),e._v(" "),i("div",{staticClass:"items"},[i("label",{staticClass:"item_lb"},[e._v("路径:")]),e._v(" "),i("el-input",{staticClass:"item_input",attrs:{size:"mini",placeholder:"请输入路径 如:/index/activity"},model:{value:e.menuUrl,callback:function(t){e.menuUrl=t},expression:"menuUrl"}})],1),e._v(" "),i("div",{staticClass:"items"},[i("label",{staticClass:"item_lb"},[e._v("图标:")]),e._v(" "),i("el-input",{staticClass:"item_input",attrs:{size:"mini",placeholder:"请输入图标 如: icon-plus-square-fill"},model:{value:e.menuIcon,callback:function(t){e.menuIcon=t},expression:"menuIcon"}})],1),e._v(" "),i("el-row",[i("el-button",{attrs:{size:"mini"},on:{click:function(t){e.menuVisible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1)])])])],1)},staticRenderFns:[]};var l=i("VU/8")(n,s,!1,function(e){i("dUPe"),i("fOv0")},"data-v-08f7a70a",null);t.default=l.exports}});