webpackJsonp([61],{"6z/2":function(t,e){},mQ2W:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("bOdI"),i=a.n(s),o={name:"disableBusiness",components:{BreadCrumb:a("ZPfm").a},data:function(){return{breadData:[{id:1,name:"商家管理",urls:"/index/businessUser/BusinessUser",icon:"icon-home"},{id:2,name:"商家账户",urls:"/index/market/businessUser/businessAccount/BusinessAccount",icon:"icon-home"},{id:3,name:"禁用商家",urls:"/index/market/businessUser/businessAccount/DisableBusiness",icon:"icon-home"}],companyNameSearch:"",accountSearch:"",phoneNumberSearch:"",accountNameSearch:"",handleType:"",tableData:[{id:1,nickname:"大超超超",companyName:"酷耍电子商务有限公司",phoneNumber:"12312341234",loginStatus:"正常",contactName:"小超超超",startTime:"2018/12/13",endTime:"2018/12/14",bansNumber:"15",disableCategory:"辣鸡广告",disablingReason:"非法广告"}],rowData:{},disableType:[],disable:!1,disableDialog:!1,rejectReason:"",rejectValue:null,imageUrl:null,restore:!0,restoreBox:!1,imagesEvidence:!1,innerVisible:!1,imageData:[],imgurl:"",currentPage:1,pageSize:25,total:0}},mounted:function(){this.getlistData(),this.getdisableData()},methods:{getlistData:function(){var t=this,e=i()({company_name:this.companyNameSearch,disable_id:"",contacts:this.phoneNumberSearch,phone:this.accountSearch},"disable_id",this.handleType);this.HttpClient.post("/admin/forbidden/businessLists",e).then(function(e){200===e.data.code&&(t.tableData=e.data.data.data,t.total=e.data.data.total)})},filterHandlerloginstatus:function(t,e,a){return e[a.property]===t},filterHandlertype:function(){console.log(this.handleType),this.getlistData()},companyNameSearchFn:function(){this.getlistData()},phoneSearch:function(){this.getlistData()},linkmanSearch:function(){this.getlistData()},recoverBtm:function(t){console.log(t),this.restoreBox=!0,this.rowData=t},restoreBtm:function(){var t=this;this.disable=!0,this.restoreBox=!1,this.restore=!1,console.log(this.rowData.uid),this.HttpClient.post("/admin/forbidden/recovery",{uid:this.rowData.uid}).then(function(e){console.log(e.data),200==e.data.code&&(t.$message.success(e.data.msg),setTimeout(function(){t.getlistData()},500))})},forbiddenConfirm:function(){var t=this;this.restore=!0,this.disable=!1,this.disableDialog=!1;var e="";this.disableType.forEach(function(a){a.review_id==t.rejectValue&&(e=a.name)});var a={uid:this.rowData.uid,content:this.rejectReason,limit_day:30,review_id:this.rejectValue,review_name:e,images:this.imageUrl};this.HttpClient.post("/admin/forbidden/create",a).then(function(e){console.log(e.data),200===e.data.code&&(t.$message.success("操作成功"),setTimeout(function(){t.getlistData()},500))})},getdisableData:function(){var t=this;this.HttpClient.post("/admin/webReview/getList",{type:"business"}).then(function(e){200==e.data.code&&(t.disableType=e.data.data,console.log(t.disableType))})},imageUpload:function(t){var e=this;console.log(t),this.HttpClient.form("/admin/uploadOneImage",{images:t}).then(function(t){console.log(t.data.path),200===t.data.code&&(e.$message.success(t.data.msg),e.imageUrl=t.data.path,e.isshowoldimg=!1)})},lookdisableImg:function(t){var e=this;this.imagesEvidence=!0,this.HttpClient.post("/admin/forbidden/lists",{uid:t.uid}).then(function(t){console.log(t.data.data),200===t.data.code&&(e.imageData=t.data.data)})},handleAvatarSuccess:function(t,e){this.imageUrl=URL.createObjectURL(e.raw)},disableuseBusiness:function(t){console.log(t),this.rowData=t,this.disableDialog=!0,this.getdisableData()},currentChange:function(t){this.currentPage=t,this.getlistData()}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"disableBusiness"},[a("BreadCrumb",{staticClass:"bread",attrs:{breadData:t.breadData}}),t._v(" "),a("div",{staticClass:"disableBusiness_main"},[t._m(0),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"content_header"},[a("div",{staticClass:"content_header_search"},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"公司对外名称搜索"},model:{value:t.companyNameSearch,callback:function(e){t.companyNameSearch=e},expression:"companyNameSearch"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.companyNameSearchFn},slot:"append"})],1),t._v(" "),a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"电话搜索"},model:{value:t.accountSearch,callback:function(e){t.accountSearch=e},expression:"accountSearch"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.phoneSearch},slot:"append"})],1),t._v(" "),a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"联系人搜索"},model:{value:t.phoneNumberSearch,callback:function(e){t.phoneNumberSearch=e},expression:"phoneNumberSearch"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.linkmanSearch},slot:"append"})],1)],1),t._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择禁用类别"},on:{change:t.filterHandlertype},model:{value:t.handleType,callback:function(e){t.handleType=e},expression:"handleType"}},t._l(t.disableType,function(t){return a("el-option",{key:t.review_id,attrs:{label:t.name,value:t.review_id}})}))],1),t._v(" "),a("div",{staticClass:"content_table"},[a("el-table",{attrs:{data:t.tableData,border:!0}},[a("el-table-column",{attrs:{label:"商家ID",align:"center",width:"90",prop:"id",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"商家昵称",align:"center",width:"130","show-overflow-tooltip":"",prop:"company_name"}}),t._v(" "),a("el-table-column",{attrs:{label:"电话",align:"center","show-overflow-tooltip":"",width:"150",prop:"phone"}}),t._v(" "),a("el-table-column",{attrs:{label:"登陆状态",align:"center",width:"130",prop:"status",filters:[{text:"正常",value:1},{text:"禁用",value:3}],"filter-method":t.filterHandlerloginstatus},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(0==e.row.status?"删除":1==e.row.status?"正常":2==e.row.status?"注销":3==e.row.status?"禁用":4==e.row.status?"待审核":5==e.row.status?"驳回":6==e.row.status?"审核未通过":""))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"禁用开始时间",align:"center",width:"160","show-overflow-tooltip":"",prop:"disable_start",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.disable_start&&e.row.disable_name?a("span",[t._v(t._s(e.row.disable_start))]):a("span",{staticClass:"sortout_color"},[t._v("无")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"禁用结束时间",align:"center",width:"160","show-overflow-tooltip":"",prop:"disable_end",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.disable_end&&e.row.disable_name?a("span",[t._v(t._s(e.row.disable_end))]):a("span",{staticClass:"sortout_color"},[t._v("无")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"禁用次数",align:"center",width:"150",prop:"disable_num",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"禁用类别",align:"center",width:"150",prop:"disable_name"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.disable_name?a("span",[t._v(t._s(e.row.disable_name))]):a("span",{staticClass:"sortout_color"},[t._v("无")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"禁用理由",align:"center",width:"150",prop:"disable_reason"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.disable_reason?a("span",[t._v(t._s(e.row.disable_reason))]):a("span",{staticClass:"sortout_color"},[t._v("无")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"mallReview_scope"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"mallReview_btm"},[a("el-button",{on:{click:function(a){t.lookdisableImg(e.row)}}},[t._v("查看禁用证据")]),t._v(" "),1==e.row.status?a("el-button",{staticClass:"notpass_color",on:{click:function(a){t.disableuseBusiness(e.row)}}},[t._v("禁用")]):t._e(),t._v(" "),3==e.row.status?a("el-button",{on:{click:function(a){t.recoverBtm(e.row)}}},[t._v("恢复")]):t._e()],1)]}}])})],1),t._v(" "),t.total?a("el-pagination",{attrs:{layout:"prev, pager, next",total:t.total,"page-size":t.pageSize},on:{"current-change":t.currentChange}}):t._e()],1)])]),t._v(" "),a("el-dialog",{attrs:{visible:t.imagesEvidence,width:"400px","custom-class":"imagesEvidence"},on:{"update:visible":function(e){t.imagesEvidence=e}}},[a("span",{staticClass:"imagesEvidence_title",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"iconfont icon-fund"}),t._v("图片证据\n    ")]),t._v(" "),a("div",{staticClass:"imagesEvidence_main"},[a("div",{staticClass:"main_content"},t._l(t.imageData,function(e,s){return a("div",{key:s,staticClass:"content_img",on:{click:function(a){t.innerVisible=!0,t.imgurl=e.images}}},[a("img",{attrs:{src:t.Tools.handleImg(e.images),alt:""}}),t._v(" "),a("span",[t._v(t._s(e.created_at))])])}))]),t._v(" "),a("el-dialog",{attrs:{width:"30%",visible:t.innerVisible,"append-to-body":""},on:{"update:visible":function(e){t.innerVisible=e}}},[a("img",{attrs:{src:t.Tools.handleImg(t.imgurl),alt:""}})]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.imagesEvidence=!1}}},[t._v("关 闭")])],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.restoreBox,width:"400px","custom-class":"restoreBox"},on:{"update:visible":function(e){t.restoreBox=e}}},[a("span",{staticClass:"restoreBox_title",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"iconfont icon-jinyong"}),t._v("恢复\n    ")]),t._v(" "),a("div",{staticClass:"restoreBox_main"},[a("div",{staticClass:"main_content"},[a("i",{staticClass:"iconfont icon-warning-circle"}),t._v(" "),a("div",[t._v("确定恢复吗？")])])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.restoreBox=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.restoreBtm}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{width:"470px","custom-class":"disableDialog",visible:t.disableDialog},on:{"update:visible":function(e){t.disableDialog=e}}},[a("span",{staticClass:"disableDialog_title",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"iconfont icon-jinyong"}),t._v("禁用\n    ")]),t._v(" "),a("div",{staticClass:"disable_dialog_box"},[a("div",{staticClass:"disable_dialog_left"},[t._v("理由：")]),t._v(" "),a("div",{staticClass:"disable_dialog_right"},[a("el-input",{attrs:{type:"textarea",resize:"none",rows:4},model:{value:t.rejectReason,callback:function(e){t.rejectReason=e},expression:"rejectReason"}})],1)]),t._v(" "),a("div",{staticClass:"disable_dialog_box"},[a("div",{staticClass:"disable_dialog_left"},[t._v("类别：")]),t._v(" "),a("div",{staticClass:"disable_dialog_right"},[a("el-radio-group",{model:{value:t.rejectValue,callback:function(e){t.rejectValue=e},expression:"rejectValue"}},t._l(t.disableType,function(e,s){return a("el-radio",{key:s,attrs:{border:"",label:e.review_id}},[t._v(t._s(e.name))])}))],1)]),t._v(" "),a("div",{staticClass:"disable_dialog_box"},[a("div",{staticClass:"disable_dialog_left"},[t._v("上传截图：")]),t._v(" "),a("div",{staticClass:"disable_dialog_right"},[a("el-upload",{staticClass:"img-uploader",attrs:{action:"/","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.imageUpload}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.disableDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.forbiddenConfirm}},[t._v("确 定")])],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("p",[this._v("禁用商家")])])}]};var n=a("VU/8")(o,l,!1,function(t){a("6z/2")},null,null);e.default=n.exports}});