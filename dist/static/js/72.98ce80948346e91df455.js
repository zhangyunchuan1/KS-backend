webpackJsonp([72],{"0P9A":function(t,e){},E12i:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"VideoManagement",components:{BreadCrumb:a("ZPfm").a},data:function(){return{breadData:[{id:1,name:"视频",urls:"/index/video/video",icon:"icon-home"},{id:2,name:"视频管理",urls:"/index/video/videoManagement",icon:"icon-home"}],startTime:null,endTime:null,topicSearch:"",userNameSearch:"",nickNameSearch:"",tableData:[],editData:{},imageUrl:null,tagName:null,tags:["1","2","3"],dialogVisibleg:!1,courseRadio:null,dynamicTags:["标签一","标签二","标签三"],inputVisible:!1,inputValue:"",approve:!0,approveDialog:!1,deleteDialog:!1,disableDialog:!1,modifyVisible:!1,textarea:"",disableDialogRadio:null,searchNickName:null,searchUserName:null,rejectList:[],selectReject:null,videoId:null,currentPage:1,pageSize:25,total:0}},mounted:function(){console.log(11111111),this.getVideoList(),this.getRejectList()},methods:{addTags:function(){},deleteTags:function(){},handleSaveModify:function(){},handleOpenModify:function(t,e){console.log(t,e),this.$router.push({path:"/index/video/video-modify",query:{video_id:t,id:e}})},listen:function(t){console.log(this.textarea)},handleOpendelete:function(t){this.videoId=t,this.deleteDialog=!0},handleDelete:function(){var t=this;console.log(this.videoId),this.HttpClient.post("/admin/videos/changeStatus",{video_id:this.videoId,status:0}).then(function(e){console.log(e),200===e.data.code?(t.$message.success(e.data.msg),setTimeout(function(){t.getVideoList()},400),t.deleteDialog=!1):t.$message.error(e.data.msg)})},handleSelectReject:function(t){this.selectReject=t,console.log(this.selectReject)},getRejectList:function(){var t=this;this.HttpClient.post("/admin/webReview/getList",{type:"upload"}).then(function(e){console.log(e),t.rejectList=e.data.data})},getVideoList:function(t,e,a,i){var s=this;this.HttpClient.post("/admin/videos/getList",{page:this.currentPage,size:this.pageSize,start_time:this.startTime,end_time:this.endTime,nickname:this.searchNickName,username:this.searchUserName}).then(function(t){console.log(t),s.tableData=t.data.data.data,s.total=t.data.data.total})},handleSearchUserName:function(){console.log(this.searchUserName),this.getVideoList()},handleSearchNickName:function(){console.log(this.searchNickName),this.getVideoList()},handleStartTime:function(t){var e=null,a=null;e=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,a=t.getDate()<10?"0"+t.getDate():t.getDate(),this.startTime=t.getFullYear()+"-"+e+"-"+a+" 00:00:00",console.log(this.startTime,this.endTime),this.getVideoList()},handleEndTime:function(t){console.log(t);var e=null,a=null;e=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,a=t.getDate()<10?"0"+t.getDate():t.getDate(),this.endTime=t.getFullYear()+"-"+e+"-"+a+" 00:00:00",console.log(this.startTime,this.endTime),this.getVideoList()},search1:function(t){console.log(this.searchUserName),""===this.userNameSearch&&(this.userNameSearch=null)},search2:function(t){console.log(this.searchNickName),""===this.nickNameSearch&&(this.nickNameSearch=null)},handleOpenApprove:function(t){this.approveDialog=!0,this.videoId=t},handleOpenReject:function(t){this.disableDialog=!0,this.videoId=t},disableBtm:function(){var t=this;console.log(this.textarea,this.selectReject),this.HttpClient.post("/admin/videos/changeStatus",{video_id:this.videoId,status:3,refuse:this.textarea,review_id:this.selectReject.review_id,review_name:this.selectReject.name}).then(function(e){console.log(e),200===e.data.code?(t.$message.success(e.data.msg),setTimeout(function(){t.getVideoList()},350),t.disableDialog=!1):t.$message.error(e.data.msg)})},approveBtm:function(){var t=this;console.log(this.textarea,this.selectReject),this.HttpClient.post("/admin/videos/changeStatus",{video_id:this.videoId,status:1}).then(function(e){console.log(e),200===e.data.code?(t.$message.success(e.data.msg),setTimeout(function(){t.getVideoList()},400),t.approveDialog=!1):t.$message.error(e.data.msg)})},currentChange:function(t){this.currentPage=t,this.getVideoList()},filterPlate:function(t,e,a){return e[a.property]===t},filterSecondary:function(t,e,a){return e[a.property]===t},handleRemove:function(t,e){console.log(t,e)},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},handleClose:function(t){this.dynamicTags.splice(this.dynamicTags.indexOf(t),1)},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick(function(e){t.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm:function(){var t=this.inputValue;t&&this.dynamicTags.push(t),this.inputVisible=!1,this.inputValue=""}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"videoManagement"},[a("BreadCrumb",{staticClass:"bread",attrs:{breadData:t.breadData}}),t._v(" "),a("div",{staticClass:"video_main"},[t._m(0),t._v(" "),a("div",{staticClass:"video_header"},[a("div",{staticClass:"video_select"},[a("div",{staticClass:"date_item"},[a("p",{staticClass:"date_label"},[t._v("开始")]),t._v(" "),a("el-date-picker",{staticClass:"date_picker_1",attrs:{type:"date",size:"mini",placeholder:"选择日期"},on:{change:t.handleStartTime},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}})],1),t._v(" "),a("div",{staticClass:"date_item"},[a("p",{staticClass:"date_label"},[t._v("截止")]),t._v(" "),a("el-date-picker",{staticClass:"date_picker_1",attrs:{type:"date",size:"mini",placeholder:"选择日期"},on:{change:t.handleEndTime},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}})],1)]),t._v(" "),a("div",{staticClass:"video_search"},[a("div",[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"用户名搜索",clearable:""},on:{clear:t.getVideoList,input:function(e){t.search1(e)}},model:{value:t.searchUserName,callback:function(e){t.searchUserName=e},expression:"searchUserName"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.handleSearchUserName},slot:"append"})],1)],1),t._v(" "),a("div",[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"昵称搜索",clearable:""},on:{clear:t.getVideoList,input:function(e){t.search2(e)}},model:{value:t.searchNickName,callback:function(e){t.searchNickName=e},expression:"searchNickName"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.handleSearchNickName},slot:"append"})],1)],1)])]),t._v(" "),a("div",{staticClass:"video_content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:!0}},[a("el-table-column",{attrs:{label:"ID",align:"center",width:"65",prop:"id",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"视频标题",align:"center",width:"220",prop:"title"}}),t._v(" "),a("el-table-column",{attrs:{label:"昵称",align:"center",width:"100",prop:"nickname"}}),t._v(" "),a("el-table-column",{attrs:{label:"用户名",align:"center",width:"120",prop:"username"}}),t._v(" "),a("el-table-column",{attrs:{label:"长度",align:"center",width:"100",prop:"video_length"}}),t._v(" "),a("el-table-column",{attrs:{label:"所属板块",align:"center",filters:[{text:"汽车",value:"汽车"},{text:"摩托车",value:"摩托车"},{text:"无人机",value:"无人机"},{text:"智能设备",value:"智能设备"}],"filter-method":t.filterSecondary,width:"120",prop:"category_name"}}),t._v(" "),a("el-table-column",{attrs:{label:"用户类别",align:"center",filters:[{text:"个人",value:1},{text:"专业商家",value:2},{text:"普通商家",value:3}],"filter-method":t.filterSecondary,prop:"user_type",width:"125"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.user_type?a("span",[t._v("个人")]):t._e(),t._v(" "),2===e.row.user_type?a("span",[t._v("专业商家")]):t._e(),t._v(" "),3===e.row.user_type?a("span",[t._v("普通商家")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"视频类别",align:"center",filters:[{text:"普通视频",value:0},{text:"教程视频",value:1}],"filter-method":t.filterSecondary,prop:"is_course",width:"125"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.is_course?a("span",[t._v("普通视频")]):t._e(),t._v(" "),1===e.row.is_course?a("span",[t._v("教程视频")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"发布时间",align:"center",width:"125",prop:"created_at",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"通过状态",align:"center",filters:[{text:"已通过",value:1},{text:"未通过",value:3},{text:"未通过，待审核",value:2}],"filter-method":t.filterSecondary,width:"125",prop:"status"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.status?a("span",[t._v("已通过")]):t._e(),t._v(" "),3===e.row.status||2===e.row.status?a("span",[t._v("未通过")]):t._e(),t._v(" "),0===e.row.status?a("span",[t._v("已删除")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"审核状态",align:"center",filters:[{text:"已审核",value:1},{text:"待审核",value:2},{text:"已审核，未通过",value:3}],"filter-method":t.filterSecondary,width:"125",prop:"status"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.status||3===e.row.status?a("span",[t._v("已审核")]):t._e(),t._v(" "),2===e.row.status?a("span",[t._v("待审核")]):t._e(),t._v(" "),0===e.row.status?a("span",[t._v("已删除")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"video_scope"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"video_btm"},[1===e.row.status?a("div",{on:{click:function(a){t.handleOpenReject(e.row.video_id)}}},[t._v("驳回")]):t._e(),t._v(" "),2===e.row.status||1===e.row.status||3===e.row.status?a("div",{on:{click:function(a){t.handleOpenApprove(e.row.video_id)}}},[t._v("批准")]):t._e(),t._v(" "),a("div",{on:{click:function(a){t.handleOpenModify(e.row.video_id,e.row.id)}}},[t._v("修改")]),t._v(" "),1!==e.row.status?a("div",{on:{click:function(a){t.handleOpendelete(e.row.video_id)}}},[t._v("删除")]):t._e(),t._v(" "),a("div",[t._v("查看")])])]}}])})],1),t._v(" "),t.total?a("el-pagination",{attrs:{layout:"prev, pager, next",total:t.total,"page-size":t.pageSize},on:{"current-change":t.currentChange}}):t._e()],1),t._v(" "),t._m(1)]),t._v(" "),a("el-dialog",{attrs:{width:"470px","custom-class":"disableDialog",visible:t.disableDialog},on:{"update:visible":function(e){t.disableDialog=e}}},[a("span",{staticClass:"disableDialog_title",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"iconfont icon-jinyong"}),t._v("驳回")]),t._v(" "),a("div",{staticClass:"disable_dialog_box"},[a("div",{staticClass:"disable_dialog_left"},[t._v("理由：")]),t._v(" "),a("div",{staticClass:"disable_dialog_right"},[a("el-input",{attrs:{type:"textarea",resize:"none",rows:4},on:{input:function(e){t.listen(e)}},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}})],1)]),t._v(" "),a("div",{staticClass:"disable_dialog_box"},[a("div",{staticClass:"disable_dialog_left"},[t._v("类别：")]),t._v(" "),a("div",{staticClass:"disable_dialog_right"},t._l(t.rejectList,function(e,i){return a("el-radio",{key:i,attrs:{border:"",label:e.id},on:{change:function(a){t.handleSelectReject(e)}},model:{value:t.disableDialogRadio,callback:function(e){t.disableDialogRadio=e},expression:"disableDialogRadio"}},[t._v(t._s(e.name))])}))]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.disableDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.disableBtm}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{visible:t.approveDialog,width:"470px","custom-class":"approveDialog"},on:{"update:visible":function(e){t.approveDialog=e}}},[a("span",{staticClass:"approveDialog_title",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"iconfont icon-huaban4"})]),t._v(" "),a("div",{staticClass:"approveDialog_main"},[a("i",{staticClass:"iconfont icon-warning-circle"}),t._v(" "),a("div",{staticClass:"approveDialog_text"},[t._v("确认批准吗？")])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.approveDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.approveBtm}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{width:"470px","custom-class":"deleteDialog",visible:t.deleteDialog,center:""},on:{"update:visible":function(e){t.deleteDialog=e}}},[a("span",{staticClass:"deleteDialog_title",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"iconfont icon-huaban4"})]),t._v(" "),a("div",{staticClass:"deleteDialog_box"},[a("i",{staticClass:"iconfont icon-warning-circle ibg"}),t._v(" "),a("p",[t._v("确定删除吗？")])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.deleteDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handleDelete}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{staticClass:"frame",attrs:{visible:t.modifyVisible,width:"750px"},on:{"update:visible":function(e){t.modifyVisible=e}}},[a("div",{staticClass:"dialog_delete_head_title",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"iconfont icon-menu delete_icon"}),t._v(" "),a("span",[t._v("修改")])]),t._v(" "),a("div",{staticClass:"basic_content"},[a("div",{staticClass:"modifyTitle"},[a("span",{staticClass:"til"},[t._v("标题：")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.editData.title,callback:function(e){t.$set(t.editData,"title",e)},expression:"editData.title"}})],1),t._v(" "),a("div",{staticClass:"lunbo"},[a("span",{staticClass:"lunbotil"},[t._v("封面图片：")]),t._v(" "),a("div",{staticClass:"imglist"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://test.kslab.com/api/article/null","show-file-list":!1}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)]),t._v(" "),a("div",{staticClass:"introduce"},[a("span",{staticClass:"inttil"},[t._v("视频详情：")]),t._v(" "),a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入内容"},model:{value:t.editData.description,callback:function(e){t.$set(t.editData,"description",e)},expression:"editData.description"}})],1),t._v(" "),a("div",{staticClass:"label"},[a("span",{staticClass:"babeltil"},[t._v("标签：")]),t._v(" "),t._l(t.dynamicTags,function(e){return a("el-tag",{key:e,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){t.handleClose(e)}}},[t._v("\n              "+t._s(e)+"\n            ")])}),t._v(" "),t.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:t.handleInputConfirm},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleInputConfirm(e):null}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("+ New Tag")])],2),t._v(" "),a("div",{staticClass:"label"},[a("span",{staticClass:"babeltil"},[t._v("使用零件、软件：")]),t._v(" "),t._l(t.dynamicTags,function(e,i){return a("div",{key:i,staticClass:"tag_tag"},[a("el-tag",{key:e,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){t.handleClose(e)}}},[t._v("\n                  "+t._s(e)+"\n                ")]),t._v(" "),a("el-input")],1)}),t._v(" "),t.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:t.handleInputConfirm},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleInputConfirm(e):null}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("+ New Tag")])],2),t._v(" "),a("div",{staticClass:"modifyTitle"},[a("span",{staticClass:"til"},[t._v("是否为教程：")]),t._v(" "),a("el-radio-group",{model:{value:t.courseRadio,callback:function(e){t.courseRadio=e},expression:"courseRadio"}},[a("el-radio",{attrs:{border:"",label:1}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{border:"",label:2}},[t._v("否")])],1)],1),t._v(" "),a("div",{staticClass:"fujian"},[a("span",[t._v("附件:")]),t._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{action:"http://test.kslab.com/api/article/null"}},[a("el-button",{staticClass:"btnup",attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),a("div",{staticClass:"el-upload__tip ",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传word/ppt文件，且不超过5M")])],1)],1),t._v(" "),a("div",{staticClass:"btn3"},[a("el-button",{attrs:{size:"small"}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleSaveModify}},[t._v("保存")])],1)]),t._v(" "),a("div",{staticClass:"user_footer",attrs:{slot:"footer"},slot:"footer"})])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"video_title"},[e("div",{staticClass:"title"},[this._v("视频管理")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bottom"},[e("div",[this._v("数量：120")]),this._v(" "),e("div",[this._v("平均长度：15min")])])}]};var l=a("VU/8")(i,s,!1,function(t){a("0P9A")},null,null);e.default=l.exports}});