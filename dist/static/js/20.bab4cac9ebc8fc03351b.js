webpackJsonp([20],{"0h5C":function(e,t){},p68e:function(e,t){},t7fP:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("ZPfm"),s=i("XLwt"),n=i.n(s),o={name:"videoStatus",components:{BreadCrumb:a.a},data:function(){var e=this;return{pickerOptions:{disabledDate:function(t){return(t.getTime()-new Date(e.startTime).getTime())/1e3/60/60/24>31}},startTime:"",startviewTime:"",endTime:"",endviewTime:"",userType:"",userviewType:"",breadData:[{id:1,name:"视频管理",urls:"/index/video",icon:"icon-home"},{id:2,name:"视频状态",urls:"/index/video/video-data",icon:"icon-home"}],userOptions:[{value:1,label:"个人用户"},{value:2,label:"专业商家"},{value:3,label:"普通商家"}],videoNum:[],videoTotal:0,videoviewTotal:0,videoDate:[],videoviewDate:[],car:{normal:0,business:0},motorcycle:{normal:0,business:0},plane:{normal:0,business:0},intelligent:{normal:0,business:0},carview:{normal:0,business:0},motorcycleview:{normal:0,business:0},planeview:{normal:0,business:0},intelligentview:{normal:0,business:0},totalByDate:0,totalByDateview:0,carvideo:[],motorvideo:[],planevideo:[],intelligentvideo:[],carviewvideo:[],motorviewvideo:[],planeviewvideo:[],intelligentviewvideo:[],carMenuID:"",motorMenuID:"",planeMenuID:"",intelligentMenuID:""}},methods:{drawLine:function(){var e=this,t=(new Date(this.endTime).getTime()-new Date(this.startTime).getTime())/1e3/60/60/24,i=new Date(this.startTime).getDate(),a=new Date(this.startTime).getFullYear(),s=new Date(this.startTime).getMonth()+1,o=[],r=0;switch(s){case 1:r=31;break;case 2:r=a%400==0||a%4==0&&a%100!=0?29:28;break;case 3:r=31;break;case 4:r=30;break;case 5:r=31;break;case 6:r=30;break;case 7:case 8:r=31;break;case 9:r=30;break;case 10:r=31;break;case 11:r=30;break;case 12:r=31}for(var l=0;l<t;l++)i+l>r?o.push(i+l-r):o.push(i+l);var v=[],m=[],d=[],u=[];o.map(function(t){var i=0,n=0,o=0,r=0,l=0,c=0,p=0,_=0,w=0,y=0,b=0,h=0,D=0,g=0,T=0,f=0;t=e.initFormat(t),e.carvideo.map(function(e){new Date(a+"-"+(s<10?"0"+s:s)+"-"+t).getTime()!==new Date(e.created_at.split(" ")[0]).getTime()&&new Date((s>=12?a+1+"-01":a+"-"+(s<10?"0"+(s+1):s+1))+"-"+t).getTime()!==new Date(e.created_at.split(" ")[0]).getTime()||(i+=Number(e.videos),1===e.user_type?n+=Number(e.videos):2===e.user_type?o+=Number(e.videos):3===e.user_type&&(r+=Number(e.videos)))}),e.motorvideo.map(function(e){new Date(a+"-"+(s<10?"0"+s:s)+"-"+t).getTime()!==new Date(e.created_at.split(" ")[0]).getTime()&&new Date((s>=12?a+1+"-01":a+"-"+(s<10?"0"+(s+1):s+1))+"-"+t).getTime()!==new Date(e.created_at.split(" ")[0]).getTime()||(l+=Number(e.videos),1===e.user_type?c+=Number(e.videos):2===e.user_type?p+=Number(e.videos):3===e.user_type&&(_+=Number(e.videos)))}),e.planevideo.map(function(e){new Date(a+"-"+(s<10?"0"+s:s)+"-"+t).getTime()!==new Date(e.created_at.split(" ")[0]).getTime()&&new Date((s>=12?a+1+"-01":a+"-"+(s<10?"0"+(s+1):s+1))+"-"+t).getTime()!==new Date(e.created_at.split(" ")[0]).getTime()||(w+=Number(e.videos),1===e.user_type?y+=Number(e.videos):2===e.user_type?b+=Number(e.videos):3===e.user_type&&(h+=Number(e.videos)))}),e.intelligentvideo.map(function(e){new Date(a+"-"+(s<10?"0"+s:s)+"-"+t).getTime()!==new Date(e.created_at.split(" ")[0]).getTime()&&new Date((s>=12?a+1+"-01":a+"-"+(s<10?"0"+(s+1):s+1))+"-"+t).getTime()!==new Date(e.created_at.split(" ")[0]).getTime()||(D+=Number(e.videos),1===e.user_type?g+=Number(e.videos):2===e.user_type?T+=Number(e.videos):3===e.user_type&&(f+=Number(e.videos)))}),1===e.userType?(v.push(n),m.push(c),d.push(y),u.push(g)):2===e.userType?(v.push(o),m.push(p),d.push(b),u.push(T)):3===e.userType?(v.push(r),m.push(_),d.push(h),u.push(f)):""===e.userType&&(v.push(i),m.push(l),d.push(w),u.push(D))}),n.a.init(document.getElementById("myChart")).setOption({tooltip:{trigger:"axis"},xAxis:{type:"category",data:o},yAxis:{type:"value"},series:[{itemStyle:{normal:{color:"#009efb",lineStyle:{color:"#009efb"}}},name:"汽车",type:"line",smooth:!0,data:v},{itemStyle:{normal:{color:"#55ce63",lineStyle:{color:"#55ce63"}}},name:"摩托车",type:"line",smooth:!0,data:m},{itemStyle:{normal:{color:"#ff7676",lineStyle:{color:"#ff7676"}}},name:"无人机",type:"line",smooth:!0,data:d},{itemStyle:{normal:{color:"#FFB82E",lineStyle:{color:"#FFB82E"}}},name:"智能设备",type:"line",smooth:!0,data:u}]})},getDataByDate:function(){var e=this;this.HttpClient.post("/admin/analysis/diagram",{type:3,begin:this.startTime,end:this.endTime}).then(function(t){200===t.data.code&&(e.videoDate=t.data.data,e.totalByDate=0,e.car.normal=0,e.car.business=0,e.motorcycle.normal=0,e.motorcycle.business=0,e.plane.normal=0,e.plane.business=0,e.intelligent.normal=0,e.intelligent.business=0,e.carvideo=[],e.motorvideo=[],e.planevideo=[],e.intelligentvideo=[],e.videoDate.map(function(t){t.folder_type===e.carMenuID?(e.carvideo.push(t),1===t.user_type?(e.car.normal+=Number(t.videos),e.totalByDate+=Number(t.videos)):(e.car.business+=Number(t.videos),e.totalByDate+=Number(t.videos))):t.folder_type===e.motorMenuID?(e.motorvideo.push(t),1===t.user_type?(e.motorcycle.normal+=Number(t.videos),e.totalByDate+=Number(t.videos)):(e.motorcycle.business+=Number(t.videos),e.totalByDate+=Number(t.videos))):t.folder_type===e.planeMenuID?(e.planevideo.push(t),1===t.user_type?(e.plane.normal+=Number(t.videos),e.totalByDate+=Number(t.videos)):(e.plane.business+=Number(t.videos),e.totalByDate+=Number(t.videos))):t.folder_type===e.intelligentMenuID&&(e.intelligentvideo.push(t),1===t.user_type?(e.intelligent.normal+=Number(t.videos),e.totalByDate+=Number(t.videos)):(e.intelligent.business+=Number(t.videos),e.totalByDate+=Number(t.videos)))}),e.drawLine())})},getviewDataByDate:function(){var e=this;console.log(this.startviewTime),console.log(this.endviewTime),this.HttpClient.post("/admin/analysis/diagram",{type:3,begin:this.startviewTime,end:this.endviewTime}).then(function(t){200===t.data.code&&(e.videoviewDate=t.data.data,console.log(e.videoviewDate),e.totalByDateview=0,e.carview.normal=0,e.carview.business=0,e.motorcycleview.normal=0,e.motorcycleview.business=0,e.planeview.normal=0,e.planeview.business=0,e.intelligentview.normal=0,e.intelligentview.business=0,e.carviewvideo=[],e.motorviewvideo=[],e.planeviewvideo=[],e.intelligentviewvideo=[],e.videoviewDate.map(function(t){t.folder_type===e.carMenuID?(e.carviewvideo.push(t),1===t.user_type?(e.carview.normal+=Number(t.videos_view),e.totalByDateview+=Number(t.videos_view)):(e.carview.business+=Number(t.videos_view),e.totalByDateview+=Number(t.videos_view))):t.folder_type===e.motorMenuID?(e.motorviewvideo.push(t),1===t.user_type?(e.motorcycleview.normal+=Number(t.videos_view),e.totalByDateview+=Number(t.videos_view)):(e.motorcycleview.business+=Number(t.videos_view),e.totalByDateview+=Number(t.videos_view))):t.folder_type===e.planeMenuID?(e.planeviewvideo.push(t),1===t.user_type?(e.planeview.normal+=Number(t.videos_view),e.totalByDateview+=Number(t.videos_view)):(e.planeview.business+=Number(t.videos_view),e.totalByDateview+=Number(t.videos_view))):t.folder_type===e.intelligentMenuID&&(e.intelligentviewvideo.push(t),1===t.user_type?(e.intelligentview.normal+=Number(t.videos_view),e.totalByDateview+=Number(t.videos_view)):(e.intelligentview.business+=Number(t.videos_view),e.totalByDateview+=Number(t.videos_view)))}),e.drawviewLine())})},drawviewLine:function(){var e=this,t=(new Date(this.endviewTime).getTime()-new Date(this.startviewTime).getTime())/1e3/60/60/24,i=new Date(this.startviewTime).getDate(),a=new Date(this.startviewTime).getFullYear(),s=new Date(this.startviewTime).getMonth()+1,o=[],r=0;switch(s){case 1:r=31;break;case 2:r=a%400==0||a%4==0&&a%100!=0?29:28;break;case 3:r=31;break;case 4:r=30;break;case 5:r=31;break;case 6:r=30;break;case 7:case 8:r=31;break;case 9:r=30;break;case 10:r=31;break;case 11:r=30;break;case 12:r=31}for(var l=0;l<t;l++)i+l>r?o.push(i+l-r):o.push(i+l);var v=[],m=[],d=[],u=[];o.map(function(t){var i=0,n=0,o=0,r=0,l=0,c=0,p=0,_=0,w=0,y=0,b=0,h=0,D=0,g=0,T=0,f=0;t=e.initFormat(t),e.carviewvideo.map(function(e){new Date(a+"-"+(s<10?"0"+s:s)+"-"+t).getTime()!==new Date(e.created_at.split(" ")[0]).getTime()&&new Date((s>=12?a+1+"-01":a+"-"+(s<10?"0"+(s+1):s+1))+"-"+t).getTime()!==new Date(e.created_at.split(" ")[0]).getTime()||(i+=Number(e.videos_view),1===e.user_type?n+=Number(e.videos_view):2===e.user_type?o+=Number(e.videos_view):3===e.user_type&&(r+=Number(e.videos_view)))}),e.motorviewvideo.map(function(e){new Date(a+"-"+(s<10?"0"+s:s)+"-"+t).getTime()!==new Date(e.created_at.split(" ")[0]).getTime()&&new Date((s>=12?a+1+"-01":a+"-"+(s<10?"0"+(s+1):s+1))+"-"+t).getTime()!==new Date(e.created_at.split(" ")[0]).getTime()||(l+=Number(e.videos_view),1===e.user_type?c+=Number(e.videos_view):2===e.user_type?p+=Number(e.videos_view):3===e.user_type&&(_+=Number(e.videos_view)))}),e.planeviewvideo.map(function(e){new Date(a+"-"+(s<10?"0"+s:s)+"-"+t).getTime()!==new Date(e.created_at.split(" ")[0]).getTime()&&new Date((s>=12?a+1+"-01":a+"-"+(s<10?"0"+(s+1):s+1))+"-"+t).getTime()!==new Date(e.created_at.split(" ")[0]).getTime()||(w+=Number(e.videos_view),1===e.user_type?y+=Number(e.videos_view):2===e.user_type?b+=Number(e.videos_view):3===e.user_type&&(h+=Number(e.videos_view)))}),e.intelligentviewvideo.map(function(e){new Date(a+"-"+(s<10?"0"+s:s)+"-"+t).getTime()!==new Date(e.created_at.split(" ")[0]).getTime()&&new Date((s>=12?a+1+"-01":a+"-"+(s<10?"0"+(s+1):s+1))+"-"+t).getTime()!==new Date(e.created_at.split(" ")[0]).getTime()||(D+=Number(e.videos_view),1===e.user_type?g+=Number(e.videos_view):2===e.user_type?T+=Number(e.videos_view):3===e.user_type&&(f+=Number(e.videos_view)))}),1===e.userviewType?(v.push(n),m.push(c),d.push(y),u.push(g)):2===e.userviewType?(v.push(o),m.push(p),d.push(b),u.push(T)):3===e.userviewType?(v.push(r),m.push(_),d.push(h),u.push(f)):""===e.userviewType&&(v.push(i),m.push(l),d.push(w),u.push(D))}),n.a.init(document.getElementById("myviewChart")).setOption({tooltip:{trigger:"axis"},xAxis:{type:"category",data:o},yAxis:{type:"value"},series:[{itemStyle:{normal:{color:"#009efb",lineStyle:{color:"#009efb"}}},name:"汽车",type:"line",smooth:!0,data:v},{itemStyle:{normal:{color:"#55ce63",lineStyle:{color:"#55ce63"}}},name:"摩托车",type:"line",smooth:!0,data:m},{itemStyle:{normal:{color:"#ff7676",lineStyle:{color:"#ff7676"}}},name:"无人机",type:"line",smooth:!0,data:d},{itemStyle:{normal:{color:"#FFB82E",lineStyle:{color:"#FFB82E"}}},name:"智能设备",type:"line",smooth:!0,data:u}]})},initFormat:function(e){return e<10&&(e="0"+e),e},initDateValue:function(e){var t=e.getFullYear(),i=e.getMonth()+1,a=e.getDate(),s=e.getHours(),n=e.getMinutes(),o=e.getSeconds();return t+"-"+(i=this.initFormat(i))+"-"+(a=this.initFormat(a))+" "+(s=this.initFormat(s))+":"+(n=this.initFormat(n))+":"+(o=this.initFormat(o))}},created:function(){var e=this,t=this.initDateValue(new Date).split("-");"01"==t[1]?(t[0]=t[0]-1,t[1]="12"):t[1]=t[1]-1,t.join("-"),this.startTime=t.join("-"),this.endTime=this.initDateValue(new Date);var i=this.initDateValue(new Date).split("-");"01"==i[1]?(i[0]=i[0]-1,i[1]="12"):i[1]=i[1]-1,i.join("-"),this.startviewTime=i.join("-"),this.endviewTime=this.initDateValue(new Date),this.HttpClient.post("/admin/analysis/numCache",{type:3}).then(function(t){200===t.data.code&&(e.videoNum=t.data.data,console.log(t.data.data),e.videoNum.map(function(t){"汽车"==t.name?e.carMenuID=t.menu_id:"摩托"==t.name?e.motorMenuID=t.menu_id:"模型"==t.name?e.planeMenuID=t.menu_id:"智能设备"==t.name&&(e.intelligentMenuID=t.menu_id),t.number=0,t.number+=Number(t.analysis.company_videos),t.number+=Number(t.analysis.normal_videos),t.numberview=0,t.numberview+=Number(t.analysis.company_videos_view),t.numberview+=Number(t.analysis.normal_videos_view),e.videoTotal+=t.number,e.videoviewTotal+=t.numberview,e.getDataByDate(),e.getviewDataByDate()}))})}},r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("BreadCrumb",{staticClass:"bread",attrs:{breadData:e.breadData}}),e._v(" "),i("div",{staticClass:"content"},[i("p",{staticClass:"title"},[e._v("视频状态")]),e._v(" "),i("div",{staticStyle:{padding:"0 20px"}},[i("table",{staticClass:"table",attrs:{border:"1",cellspacing:"0",cellpadding:"0"}},[i("thead",[i("th",{staticClass:"my_th",attrs:{colspan:e.videoNum.length}},[e._m(0),e._v("\n            "+e._s(e.videoTotal)+"\n          ")])]),e._v(" "),i("tbody",[i("tr",{staticClass:"tr1"},e._l(e.videoNum,function(t){return i("td",{key:t.id},[e._v(e._s(t.name))])})),e._v(" "),i("tr",{staticClass:"tr2"},e._l(e.videoNum,function(t){return i("td",{key:t.id},[e._v(e._s(t.number))])}))])]),e._v(" "),i("div",[i("div",{staticClass:"conditions"},[i("div",{staticClass:"date_item"},[i("p",{staticClass:"date_label"},[e._v("开始")]),e._v(" "),i("el-date-picker",{staticClass:"date_picker_1",attrs:{type:"date",size:"mini","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期"},on:{change:e.getDataByDate},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}})],1),e._v(" "),i("div",{staticClass:"date_item"},[i("p",{staticClass:"date_label"},[e._v("截止")]),e._v(" "),i("el-date-picker",{staticClass:"date_picker_1",attrs:{type:"date",size:"mini",placeholder:"选择日期","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions},on:{change:e.getDataByDate},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}})],1),e._v(" "),i("el-select",{staticClass:"select_type",attrs:{size:"mini",clearable:"",placeholder:"全部"},on:{change:e.drawLine},model:{value:e.userType,callback:function(t){e.userType=t},expression:"userType"}},e._l(e.userOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),i("div",{staticClass:"shape_content"},[i("div",{staticClass:"shape_header"},[i("div",{staticClass:"shape_header_left"},[i("p",{staticClass:"left_title"},[e._v("视频数量曲线图")]),e._v(" "),i("div",{staticClass:"time_range"},[i("span",[e._v(e._s(e.startTime.split(" ")[0]))]),e._v(" "),i("span",[e._v("---")]),e._v(" "),i("span",[e._v(e._s(e.endTime.split(" ")[0]))])])]),e._v(" "),i("div",{staticClass:"shape_header_right"},[i("div",{staticClass:"right_items"},[i("div",{staticClass:"point color1"}),e._v(" "),i("p",[e._v("汽车占"+e._s(e.totalByDate?((e.car.normal+e.car.business)/e.totalByDate*100).toFixed(2):0)+"%")])]),e._v(" "),i("div",{staticClass:"right_items"},[i("div",{staticClass:"point color2"}),e._v(" "),i("p",[e._v("摩托车占"+e._s(e.totalByDate?((e.motorcycle.normal+e.motorcycle.business)/e.totalByDate*100).toFixed(2):0)+"%")])]),e._v(" "),i("div",{staticClass:"right_items"},[i("div",{staticClass:"point color3"}),e._v(" "),i("p",[e._v("模型占"+e._s(e.totalByDate?((e.plane.normal+e.plane.business)/e.totalByDate*100).toFixed(2):0)+"%")])]),e._v(" "),i("div",{staticClass:"right_items"},[i("div",{staticClass:"point color4"}),e._v(" "),i("p",[e._v("智能设备占"+e._s(e.totalByDate?((e.intelligent.normal+e.intelligent.business)/e.totalByDate*100).toFixed(2):0)+"%")])])])]),e._v(" "),i("div",{style:{width:"980px",height:"400px"},attrs:{id:"myChart"}})])])]),e._v(" "),i("div",{staticStyle:{padding:"0 20px"}},[i("table",{staticClass:"table",attrs:{border:"1",cellspacing:"0",cellpadding:"0"}},[i("thead",[i("th",{staticClass:"my_th",attrs:{colspan:e.videoNum.length}},[e._m(1),e._v("\n            "+e._s(e.videoviewTotal)+"\n          ")])]),e._v(" "),i("tbody",[i("tr",{staticClass:"tr1"},e._l(e.videoNum,function(t){return i("td",{key:t.id},[e._v(e._s(t.name))])})),e._v(" "),i("tr",{staticClass:"tr2"},e._l(e.videoNum,function(t){return i("td",{key:t.id},[e._v(e._s(t.numberview))])}))])]),e._v(" "),i("div",[i("div",{staticClass:"conditions"},[i("div",{staticClass:"date_item"},[i("p",{staticClass:"date_label"},[e._v("开始")]),e._v(" "),i("el-date-picker",{staticClass:"date_picker_1",attrs:{type:"date",size:"mini","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期"},on:{change:e.getviewDataByDate},model:{value:e.startviewTime,callback:function(t){e.startviewTime=t},expression:"startviewTime"}})],1),e._v(" "),i("div",{staticClass:"date_item"},[i("p",{staticClass:"date_label"},[e._v("截止")]),e._v(" "),i("el-date-picker",{staticClass:"date_picker_1",attrs:{type:"date",size:"mini",placeholder:"选择日期","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions},on:{change:e.getviewDataByDate},model:{value:e.endviewTime,callback:function(t){e.endviewTime=t},expression:"endviewTime"}})],1),e._v(" "),i("el-select",{staticClass:"select_type",attrs:{size:"mini",clearable:"",placeholder:"全部"},on:{change:e.drawviewLine},model:{value:e.userviewType,callback:function(t){e.userviewType=t},expression:"userviewType"}},e._l(e.userOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),i("div",{staticClass:"shape_content"},[i("div",{staticClass:"shape_header"},[i("div",{staticClass:"shape_header_left"},[i("p",{staticClass:"left_title"},[e._v("视频浏览量曲线图")]),e._v(" "),i("div",{staticClass:"time_range"},[i("span",[e._v(e._s(e.startviewTime.split(" ")[0]))]),e._v(" "),i("span",[e._v("---")]),e._v(" "),i("span",[e._v(e._s(e.endviewTime.split(" ")[0]))])])]),e._v(" "),i("div",{staticClass:"shape_header_right"},[i("div",{staticClass:"right_items"},[i("div",{staticClass:"point color1"}),e._v(" "),i("p",[e._v("汽车占"+e._s(e.totalByDateview?((e.carview.normal+e.carview.business)/e.totalByDateview*100).toFixed(2):0)+"%")])]),e._v(" "),i("div",{staticClass:"right_items"},[i("div",{staticClass:"point color2"}),e._v(" "),i("p",[e._v("摩托车占"+e._s(e.totalByDateview?((e.motorcycleview.normal+e.motorcycleview.business)/e.totalByDateview*100).toFixed(2):0)+"%")])]),e._v(" "),i("div",{staticClass:"right_items"},[i("div",{staticClass:"point color3"}),e._v(" "),i("p",[e._v("模型占"+e._s(e.totalByDateview?((e.planeview.normal+e.planeview.business)/e.totalByDateview*100).toFixed(2):0)+"%")])]),e._v(" "),i("div",{staticClass:"right_items"},[i("div",{staticClass:"point color4"}),e._v(" "),i("p",[e._v("智能设备占"+e._s(e.totalByDateview?((e.intelligentview.normal+e.intelligentview.business)/e.totalByDateview*100).toFixed(2):0)+"%")])])])]),e._v(" "),i("div",{style:{width:"980px",height:"400px"},attrs:{id:"myviewChart"}})])])])])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("span",[t("i",{staticClass:"iconfont icon-star"}),this._v("\n              视频总数\n            ")])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",[t("i",{staticClass:"iconfont icon-star"}),this._v("\n              视频浏览量\n            ")])}]};var l=i("VU/8")(o,r,!1,function(e){i("0h5C"),i("p68e")},"data-v-772ad731",null);t.default=l.exports}});