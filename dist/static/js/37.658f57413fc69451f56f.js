webpackJsonp([37],{"0Azv":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("VZl4"),l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mallData"},[a("BreadCrumb",{staticClass:"bread",attrs:{breadData:t.breadData}}),t._v(" "),a("div",{staticClass:"mallData_main"},[a("div",{staticClass:"title"},[a("p",[t._v("商品数据")]),t._v(" "),a("p",{staticStyle:{cursor:"pointer"},on:{click:t.refresh}},[a("i",{staticClass:"iconfont icon-shuaxin"}),t._v("\n        刷新\n      ")])]),t._v(" "),a("div",{staticClass:"mallData_content"},[a("div",{staticClass:"mallData_table"},[a("div",{staticClass:"table_header"},[t._v("\n          当前商城商品数量："+t._s(t.productTotal>1e3?(t.productTotal/1e3).toFixed(2)+"k":t.productTotal)+"\n        ")]),t._v(" "),a("div",{staticClass:"table_list"},[a("div",[t._v("汽车总量："+t._s(t.carTotal.product_total>1e3?(t.carTotal.product_total/1e3).toFixed(2)+"k":t.carTotal.product_total))]),t._v(" "),a("p",[t._v("当日增加："+t._s(t.carTotal.product_total_increase>1e3?(t.carTotal.product_total_increase/1e3).toFixed(2)+"k":t.carTotal.product_total_increase))])]),t._v(" "),a("div",{staticClass:"table_list"},[a("div",[t._v("摩托车总量："+t._s(t.motorTotal.product_total>1e3?(t.motorTotal.product_total/1e3).toFixed(2)+"k":t.motorTotal.product_total))]),t._v(" "),a("p",[t._v("当日增加："+t._s(t.motorTotal.product_total>1e3?(t.motorTotal.product_total/1e3).toFixed(2)+"k":t.motorTotal.product_total))])]),t._v(" "),a("div",{staticClass:"table_list"},[a("div",[t._v("模型总量："+t._s(t.planeTotal.product_total>1e3?(t.planeTotal.product_total/1e3).toFixed(2)+"k":t.planeTotal.product_total))]),t._v(" "),a("p",[t._v("当日增加："+t._s(t.planeTotal.product_total>1e3?(t.planeTotal.product_total/1e3).toFixed(2)+"k":t.planeTotal.product_total))])]),t._v(" "),a("div",{staticClass:"table_list"},[a("div",[t._v("智能设备总量："+t._s(t.intelligentTotal.product_total>1e3?(t.intelligentTotal.product_total/1e3).toFixed(2)+"k":t.intelligentTotal.product_total))]),t._v(" "),a("p",[t._v("当日增加："+t._s(t.intelligentTotal.product_total>1e3?(t.intelligentTotal.product_total/1e3).toFixed(2)+"k":t.intelligentTotal.product_total))])])]),t._v(" "),a("div",{staticClass:"mallData_chart select_menu"},[a("div",{staticClass:"til"},[t._v("板块选择")]),t._v(" "),a("el-radio-group",{attrs:{size:"small"},on:{change:t.folderChange},model:{value:t.typeValue,callback:function(e){t.typeValue=e},expression:"typeValue"}},t._l(t.typeList,function(e,i){return a("el-radio",{key:i,attrs:{label:e.menu_id,border:""}},[t._v(t._s(e.name))])}))],1),t._v(" "),t.oneisShow?a("div",{staticClass:"mallData_chart select_menu"},[a("div",{staticClass:"til"},[t._v("一级目录")]),t._v(" "),a("el-radio-group",{attrs:{size:"small"},on:{change:t.oneMenuChange},model:{value:t.onetypeValue,callback:function(e){t.onetypeValue=e},expression:"onetypeValue"}},t._l(t.oneTypelist,function(e,i){return a("el-radio",{key:i,attrs:{label:e.menu_id,border:""}},[t._v(t._s(e.name))])}))],1):t._e(),t._v(" "),t.twoisShow?a("div",{staticClass:"mallData_chart select_menu"},[a("div",{staticClass:"til"},[t._v("二级目录")]),t._v(" "),a("el-radio-group",{attrs:{size:"small"},on:{change:t.twoMenuChange},model:{value:t.twotypeValue,callback:function(e){t.twotypeValue=e},expression:"twotypeValue"}},t._l(t.twoTypelist,function(e,i){return a("el-radio",{key:i,attrs:{label:e.menu_id,border:""}},[t._v(t._s(e.name))])}))],1):t._e(),t._v(" "),t.threeisShow?a("div",{staticClass:"mallData_chart select_menu"},[a("div",{staticClass:"til"},[t._v("三级目录")]),t._v(" "),a("el-radio-group",{attrs:{size:"small"},on:{change:t.threeMenuChange},model:{value:t.threetypeValue,callback:function(e){t.threetypeValue=e},expression:"threetypeValue"}},t._l(t.threeTypelist,function(e,i){return a("el-radio",{key:i,attrs:{label:e.menu_id,border:""}},[t._v(t._s(e.name))])}))],1):t._e(),t._v(" "),t.productisShow?a("div",{staticClass:"mallData_chart select_menu"},[a("div",{staticClass:"til"},[t._v("产品类型")]),t._v(" "),a("el-radio-group",{attrs:{size:"small"},on:{change:t.productMenuChange},model:{value:t.producttypeValue,callback:function(e){t.producttypeValue=e},expression:"producttypeValue"}},t._l(t.productTypelist,function(e,i){return a("el-radio",{key:i,attrs:{label:e.id,border:""}},[t._v(t._s(e.name))])}))],1):t._e(),t._v(" "),a("div",{staticClass:"mallData_chart"},[a("div",{staticClass:"conditions"},[a("div",{staticClass:"date_item"},[a("p",{staticClass:"date_label"},[t._v("开始")]),t._v(" "),a("el-date-picker",{staticClass:"date_picker_1",attrs:{type:"date",size:"mini","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期"},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}})],1),t._v(" "),a("div",{staticClass:"date_item"},[a("p",{staticClass:"date_label"},[t._v("截止")]),t._v(" "),a("el-date-picker",{staticClass:"date_picker_1",attrs:{type:"date",size:"mini","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期","picker-options":t.pickerOptions},on:{change:t.getProductDataByDate},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}})],1)]),t._v(" "),a("div",{staticClass:"shape_content"},[a("div",{staticClass:"shape_header"},[a("div",{staticClass:"shape_header_left"},[a("p",{staticClass:"left_title"},[t._v("商品数量曲线图")]),t._v(" "),a("div",{staticClass:"time_range"},[a("span",[t._v(t._s(t.startTime.split(" ")[0]))]),t._v(" "),a("span",[t._v("---")]),t._v(" "),a("span",[t._v(t._s(t.endTime.split(" ")[0]))])])]),t._v(" "),a("div",{staticClass:"shape_header_right"},[a("div",{staticClass:"right_items"},[a("div",{staticClass:"point color1"}),t._v(" "),a("p",[t._v("汽车占"+t._s(t.carByDate.percent)+"%")])]),t._v(" "),a("div",{staticClass:"right_items"},[a("div",{staticClass:"point color2"}),t._v(" "),a("p",[t._v("摩托车占"+t._s(t.motorByDate.percent)+"%")])]),t._v(" "),a("div",{staticClass:"right_items"},[a("div",{staticClass:"point color3"}),t._v(" "),a("p",[t._v("无人机占"+t._s(t.planeByDate.percent)+"%")])]),t._v(" "),a("div",{staticClass:"right_items"},[a("div",{staticClass:"point color4"}),t._v(" "),a("p",[t._v("智能设备占"+t._s(t.intelligentByDate.percent)+"%")])])])]),t._v(" "),a("div",{style:{width:"100%",height:"400px"},attrs:{id:"myChart"}})])])])])],1)},staticRenderFns:[]};var o=function(t){a("EkWO")},n=a("VU/8")(i.a,l,!1,o,null,null);e.default=n.exports},EkWO:function(t,e){},VZl4:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__components_public_BreadCrumb__=__webpack_require__("ZPfm"),__WEBPACK_IMPORTED_MODULE_1_echarts__=__webpack_require__("XLwt"),__WEBPACK_IMPORTED_MODULE_1_echarts___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_echarts__);__webpack_exports__.a={inject:["reload"],name:"MallData",components:{BreadCrumb:__WEBPACK_IMPORTED_MODULE_0__components_public_BreadCrumb__.a},data:function(){var t=this;return{pickerOptions:{disabledDate:function(e){return(e.getTime()-new Date(t.startTime).getTime())/1e3/60/60/24>31}},breadData:[{id:1,name:"商城",urls:"/index/mall/mall/Mall",icon:"icon-home"},{id:2,name:"商城商品",urls:"/index/mallProduct/MallProduct",icon:"icon-home"},{id:3,name:"商品数据",urls:"/index/mallProduct/MallData",icon:"icon-home"}],typeList:[],oneTypelist:[],twoTypelist:[],threeTypelist:[],productTypelist:[],typeValue:null,onetypeValue:null,twotypeValue:null,threetypeValue:null,producttypeValue:null,startTime:"",endTime:"",userType:0,categoryContent:!1,productTotal:0,carTotal:{},motorTotal:{},planeTotal:{},intelligentTotal:{},productDataByDate:[],carByDate:[],motorByDate:[],planeByDate:[],intelligentByDate:[],productTotalByDate:0,oneisShow:!1,twoisShow:!1,threeisShow:!1,productisShow:!1,carMenuID:"",motorMenuID:"",planeMenuID:"",intelligentMenuID:""}},methods:{getTypelistFn:function(){var t=this;this.HttpClient.post("/shop/menu/getOneChild",{isFolder:!0}).then(function(e){200==e.data.code&&(t.typeList=e.data.data,t.typeList.forEach(function(e){"汽车"==e.name?t.carMenuID=e.menu_id:"摩托"==e.name?t.motorMenuID=e.menu_id:"模型"==e.name?t.planeMenuID=e.menu_id:"智能设备"==e.name&&(t.intelligentMenuID=e.menu_id)}),console.log(t.typeList))})},folderChange:function(){var t=this;this.oneTypelist=[],this.onetypeValue=null,this.twoTypelist=[],this.twotypeValue=null,this.threeTypelist=[],this.threetypeValue=null,this.productTypelist=[],this.producttypeValue=null,this.HttpClient.post("/shop/menu/getOneChild",{isFolder:0,menu_id:this.typeValue}).then(function(e){200==e.data.code&&(t.oneTypelist=e.data.data.child,t.oneisShow=!0)})},oneMenuChange:function(){var t=this;this.twoTypelist=[],this.twotypeValue=null,this.threeTypelist=[],this.threetypeValue=null,this.productTypelist=[],this.producttypeValue=null,this.HttpClient.post("/shop/menu/getOneChild",{isFolder:0,menu_id:this.onetypeValue}).then(function(e){200==e.data.code&&(t.twoTypelist=e.data.data.child,t.twoisShow=!0)})},twoMenuChange:function(){var t=this;this.threeTypelist=[],this.threetypeValue=null,this.productTypelist=[],this.producttypeValue=null,this.HttpClient.post("/shop/menu/getOneChild",{isFolder:0,menu_id:this.twotypeValue}).then(function(e){200==e.data.code&&(t.threeTypelist=e.data.data.child,t.threeisShow=!0)})},threeMenuChange:function(){var t=this;this.productTypelist=[],this.producttypeValue=null,this.HttpClient.post("/shop/menu/getOneChild",{isFolder:0,last_menu:this.threetypeValue}).then(function(e){200==e.data.code&&(t.productTypelist=e.data.data,t.productisShow=!0)})},productMenuChange:function(){this.getProductDataByDate()},refresh:function(){this.$router.go(0)},drawLine:function drawLine(){var _this7=this,days=(new Date(this.endTime).getTime()-new Date(this.startTime).getTime())/1e3/60/60/24,begin=new Date(this.startTime).getDate(),year=new Date(this.startTime).getFullYear(),month=new Date(this.startTime).getMonth()+1,dates=[],monthDay=0;switch(month){case 1:monthDay=31;break;case 2:monthDay=year%400==0||year%4==0&&year%100!=0?29:28;break;case 3:monthDay=31;break;case 4:monthDay=30;break;case 5:monthDay=31;break;case 6:monthDay=30;break;case 7:case 8:monthDay=31;break;case 9:monthDay=30;break;case 10:monthDay=31;break;case 11:monthDay=30;break;case 12:monthDay=31}for(var i=0;i<days;i++)begin+i>monthDay?dates.push(begin+i-monthDay):dates.push(begin+i);var car=[],motorcycle=[],plane=[],intelligent=[];console.log(this.carByDate),dates.map(function(t){var e=0,a=0,i=0,l=0;t=_this7.initFormat(t),_this7.carByDate.map(function(a){new Date(year+"-"+(month<10?"0"+month:month)+"-"+t).getTime()!==new Date(a.created_at.split(" ")[0]).getTime()&&new Date((month>=12?year+1+"-01":year+"-"+(month<10?"0"+(month+1):month+1))+"-"+t).getTime()!==new Date(a.created_at.split(" ")[0]).getTime()||(e+=Number(a.product_total))}),_this7.motorByDate.map(function(e){new Date(year+"-"+(month<10?"0"+month:month)+"-"+t).getTime()!==new Date(e.created_at.split(" ")[0]).getTime()&&new Date((month>=12?year+1+"-01":year+"-"+(month<10?"0"+(month+1):month+1))+"-"+t).getTime()!==new Date(e.created_at.split(" ")[0]).getTime()||(a+=Number(e.product_total))}),_this7.planeByDate.map(function(e){new Date(year+"-"+(month<10?"0"+month:month)+"-"+t).getTime()!==new Date(e.created_at.split(" ")[0]).getTime()&&new Date((month>=12?year+1+"-01":year+"-"+(month<10?"0"+(month+1):month+1))+"-"+t).getTime()!==new Date(e.created_at.split(" ")[0]).getTime()||(i+=Number(e.product_total))}),_this7.intelligentByDate.map(function(e){new Date(year+"-"+(month<10?"0"+month:month)+"-"+t).getTime()!==new Date(e.created_at.split(" ")[0]).getTime()&&new Date((month>=12?year+1+"-01":year+"-"+(month<10?"0"+(month+1):month+1))+"-"+t).getTime()!==new Date(e.created_at.split(" ")[0]).getTime()||(l+=Number(e.product_total))}),car.push(e),motorcycle.push(a),plane.push(i),intelligent.push(l)}),this.carByDate.total=eval(car.join("+")),this.motorByDate.total=eval(motorcycle.join("+")),this.planeByDate.total=eval(plane.join("+")),this.intelligentByDate.total=eval(intelligent.join("+")),this.productTotalByDate=this.carByDate.total+this.motorByDate.total+this.planeByDate.total+this.intelligentByDate.total,0===this.productTotalByDate?(this.carByDate.percent=0,this.motorByDate.percent=0,this.planeByDate.percent=0,this.intelligentByDate.percent=0):(this.carByDate.percent=Number((this.carByDate.total/this.productTotalByDate*100).toFixed(2)),this.motorByDate.percent=Number((this.motorByDate.total/this.productTotalByDate*100).toFixed(2)),this.planeByDate.percent=Number((this.planeByDate.total/this.productTotalByDate*100).toFixed(2)),this.intelligentByDate.percent=Number((this.intelligentByDate.total/this.productTotalByDate*100).toFixed(2))),console.log(car);var myChart=__WEBPACK_IMPORTED_MODULE_1_echarts___default.a.init(document.getElementById("myChart"));myChart.setOption({tooltip:{trigger:"axis"},xAxis:{type:"category",data:dates},yAxis:{type:"value"},series:[{itemStyle:{normal:{color:"#009efb",lineStyle:{color:"#009efb"}}},name:"汽车",type:"line",smooth:!0,data:car},{itemStyle:{normal:{color:"#55ce63",lineStyle:{color:"#55ce63"}}},name:"摩托车",type:"line",smooth:!0,data:motorcycle},{itemStyle:{normal:{color:"#ff7676",lineStyle:{color:"#ff7676"}}},name:"无人机",type:"line",smooth:!0,data:plane},{itemStyle:{normal:{color:"#FFB82E",lineStyle:{color:"#FFB82E"}}},name:"无人机",data:intelligent,type:"line",smooth:!0}]})},getProductDataByDate:function(){var t=this;this.HttpClient.post("/admin/marketAnalysis/oneField",{field:"product_total",start_time:this.startTime,end_time:this.endTime,folder:this.typeValue,menu_1:this.onetypeValue,menu_2:this.twotypeValue,menu_3:this.threetypeValue,category_id:this.producttypeValue}).then(function(e){200===e.data.code&&(t.productDataByDate=e.data.data,t.carByDate=[],t.motorByDate=[],t.planeByDate=[],t.intelligentByDate=[],e.data.data.map(function(e){t.typeList.map(function(a){e.folder_id===a.menu_id&&(a.menu_id===t.carMenuID?t.carByDate.push(e):a.menu_id===t.motorMenuID?t.motorByDate.push(e):a.menu_id===t.planeMenuID?t.planeByDate.push(e):a.menu_id===t.intelligentMenuID&&t.intelligentByDate.push(e))})}),t.drawLine())})},getProductGross:function(){var t=this;this.HttpClient.post("/admin/marketAnalysis/getCache",{type:"product_total"}).then(function(e){200===e.data.code&&e.data.data.map(function(e){t.productTotal+=Number(e.product_total),"汽车"===e.folder?t.carTotal=e:"摩托车"===e.folder?t.motorTotal=e:"模型"===e.folder?t.planeTotal=e:"智能设备"===e.folder&&(t.intelligentTotal=e)})})},initFormat:function(t){return t<10&&(t="0"+t),t},initDateValue:function(t){var e=t.getFullYear(),a=t.getMonth()+1,i=t.getDate(),l=t.getHours(),o=t.getMinutes(),n=t.getSeconds();return e+"-"+(a=this.initFormat(a))+"-"+(i=this.initFormat(i))+" "+(l=this.initFormat(l))+":"+(o=this.initFormat(o))+":"+(n=this.initFormat(n))}},created:function(){var t=this.initDateValue(new Date).split("-");"01"==t[1]?(t[0]=t[0]-1,t[1]="12"):t[1]=t[1]-1,t.join("-"),this.startTime=t.join("-"),this.endTime=this.initDateValue(new Date),this.getProductGross(),this.getProductDataByDate(),this.getTypelistFn()}}}});