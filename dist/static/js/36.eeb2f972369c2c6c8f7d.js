webpackJsonp([36],{TaTz:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__components_public_BreadCrumb__=__webpack_require__("ZPfm"),__WEBPACK_IMPORTED_MODULE_1_echarts__=__webpack_require__("XLwt"),__WEBPACK_IMPORTED_MODULE_1_echarts___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_echarts__);__webpack_exports__.a={inject:["reload"],name:"MallData",components:{BreadCrumb:__WEBPACK_IMPORTED_MODULE_0__components_public_BreadCrumb__.a},data:function(){var t=this;return{pickerOptions:{disabledDate:function(e){return(e.getTime()-new Date(t.startTime).getTime())/1e3/60/60/24>31}},breadData:[{id:1,name:"商城",urls:"/index/mall/mall/Mall",icon:"icon-home"},{id:2,name:"商城订单",urls:"/index/mallOrder/MallOrder",icon:"icon-home"},{id:3,name:"商品数据",urls:"/index/mallOrder/MallOrderData",icon:"icon-home"}],startTime:"",endTime:"",userType:0,productTotal:0,carTotal:{},motorTotal:{},planeTotal:{},intelligentTotal:{},productDataByDate:[],carByDate:[],motorByDate:[],planeByDate:[],intelligentByDate:[],productTotalByDate:0,typeValue:"",typeList:[],oneTypelist:[],onetypeValue:"",twoTypelist:[],twotypeValue:"",threeTypelist:[],threetypeValue:"",producttypeValue:"",productTypelist:[],typeID_1:"",typeID_2:"",typeID_3:"",typeID_4:""}},methods:{getTypelist:function(){var t=this;this.HttpClient.post("/shop/menu/getOneChild",{isFolder:!0}).then(function(e){200==e.data.code&&(t.typeList=e.data.data,console.log(t.typeList))})},folderChange:function(){var t=this;console.log(this.typeValue),this.oneTypelist=[],this.twoTypelist=[],this.threeTypelist=[],this.productTypelist=[],this.HttpClient.post("/shop/menu/getOneChild",{isFolder:0,menu_id:this.typeValue}).then(function(e){200==e.data.code&&(t.oneTypelist=e.data.data.child)})},oneMenuChange:function(){var t=this;this.twoTypelist=[],this.threeTypelist=[],this.productTypelist=[],this.HttpClient.post("/shop/menu/getOneChild",{isFolder:0,menu_id:this.onetypeValue}).then(function(e){console.log(e.data.data),200==e.data.code&&(t.twoTypelist=e.data.data.child)})},twoMenuChange:function(){var t=this;this.threeTypelist=[],this.productTypelist=[],this.HttpClient.post("/shop/menu/getOneChild",{isFolder:0,menu_id:this.twotypeValue}).then(function(e){200==e.data.code&&(t.threeTypelist=e.data.data.child)})},threeMenuChange:function(){var t=this;this.productTypelist=[],this.HttpClient.post("/shop/menu/getOneChild",{isFolder:0,last_menu:this.threetypeValue}).then(function(e){console.log(e.data.data),200==e.data.code&&(t.productTypelist=e.data.data)})},productMenuChange:function(){console.log(this.producttypeValue),this.getProductDataByDate()},refresh:function(){this.reload()},arrDataFn:function(t,e,a){return{itemStyle:{normal:{color:t,lineStyle:{color:t}}},name:e,type:"line",smooth:!0,data:a}},drawLine:function drawLine(){var _this7=this,days=(new Date(this.endTime).getTime()-new Date(this.startTime).getTime())/1e3/60/60/24,begin=new Date(this.startTime).getDate(),year=new Date(this.startTime).getFullYear(),month=new Date(this.startTime).getMonth()+1,dates=[],monthDay=0;switch(month){case 1:monthDay=31;break;case 2:monthDay=year%400==0||year%4==0&&year%100!=0?29:28;break;case 3:monthDay=31;break;case 4:monthDay=30;break;case 5:monthDay=31;break;case 6:monthDay=30;break;case 7:case 8:monthDay=31;break;case 9:monthDay=30;break;case 10:monthDay=31;break;case 11:monthDay=30;break;case 12:monthDay=31}for(var i=0;i<days;i++)begin+i>monthDay?dates.push(begin+i-monthDay):dates.push(begin+i);var car=[],motorcycle=[],plane=[],intelligent=[];dates.map(function(t){var e=0,a=0,i=0,n=0;t=_this7.initFormat(t),console.log(month),_this7.carByDate.map(function(a){new Date(year+"-"+(month<10?"0"+month:month)+"-"+t).getTime()!==new Date(a.created_at.split(" ")[0]).getTime()&&new Date((month>=12?year+1+"-01":year+"-"+(month<10?"0"+(month+1):month+1))+"-"+t).getTime()!==new Date(a.created_at.split(" ")[0]).getTime()||(e+=parseInt(a.product_order))}),_this7.motorByDate.map(function(e){new Date(year+"-"+(month<10?"0"+month:month)+"-"+t).getTime()!==new Date(e.created_at.split(" ")[0]).getTime()&&new Date((month>=12?year+1+"-01":year+"-"+(month<10?"0"+(month+1):month+1))+"-"+t).getTime()!==new Date(e.created_at.split(" ")[0]).getTime()||(a+=Number(e.product_order))}),_this7.planeByDate.map(function(e){new Date(year+"-"+(month<10?"0"+month:month)+"-"+t).getTime()!==new Date(e.created_at.split(" ")[0]).getTime()&&new Date((month>=12?year+1+"-01":year+"-"+(month<10?"0"+(month+1):month+1))+"-"+t).getTime()!==new Date(e.created_at.split(" ")[0]).getTime()||(i+=Number(e.product_order))}),_this7.intelligentByDate.map(function(e){new Date(year+"-"+(month<10?"0"+month:month)+"-"+t).getTime()!==new Date(e.created_at.split(" ")[0]).getTime()&&new Date((month>=12?year+1+"-01":year+"-"+(month<10?"0"+(month+1):month+1))+"-"+t).getTime()!==new Date(e.created_at.split(" ")[0]).getTime()||(n+=Number(e.product_order))}),car.push(e),motorcycle.push(a),plane.push(i),intelligent.push(n)}),this.carByDate.total=eval(car.join("+")),this.motorByDate.total=eval(motorcycle.join("+")),this.planeByDate.total=eval(plane.join("+")),this.intelligentByDate.total=eval(intelligent.join("+")),this.productTotalByDate=this.carByDate.total+this.motorByDate.total+this.planeByDate.total+this.intelligentByDate.total,this.carByDate.percent=Number((this.carByDate.total/this.productTotalByDate*100).toFixed(2)),this.motorByDate.percent=Number((this.motorByDate.total/this.productTotalByDate*100).toFixed(2)),this.planeByDate.percent=Number((this.planeByDate.total/this.productTotalByDate*100).toFixed(2)),this.intelligentByDate.percent=Number((this.intelligentByDate.total/this.productTotalByDate*100).toFixed(2));var arr=[];this.typeValue==this.typeID_1?arr.push(this.arrDataFn("#009efb","汽车",car)):this.typeValue==this.typeID_2?arr.push(this.arrDataFn("#55ce63","摩托车",motorcycle)):this.typeValue==this.typeID_3?arr.push(this.arrDataFn("#ff7676","无人机",plane)):this.typeValue==this.typeID_4?arr.push(this.arrDataFn("#FFB82E","智能设备",intelligent)):""==this.typeValue&&(arr.push(this.arrDataFn("#009efb","汽车",car)),arr.push(this.arrDataFn("#55ce63","摩托车",motorcycle)),arr.push(this.arrDataFn("#ff7676","无人机",plane)),arr.push(this.arrDataFn("#FFB82E","智能设备",intelligent)));var myChart=__WEBPACK_IMPORTED_MODULE_1_echarts___default.a.init(document.getElementById("myChart"));myChart.setOption({tooltip:{trigger:"axis"},xAxis:{type:"category",data:dates},yAxis:{type:"value"},series:arr})},getProductDataByDate:function(){var t=this;this.HttpClient.post("/admin/marketAnalysis/oneField",{field:"product_order",start_time:this.startTime,end_time:this.endTime,folder:this.typeValue,menu_1:this.onetypeValue,menu_2:this.twotypeValue,menu_3:this.threetypeValue,category_id:this.producttypeValue}).then(function(e){200===e.data.code&&(console.log(e.data.data),t.productDataByDate=e.data.data,t.carByDate=[],t.motorByDate=[],t.planeByDate=[],t.intelligentByDate=[],e.data.data.map(function(e){"d8b40880-4f1b-441f-9e13-70cd4d940752"===e.folder_id?(t.typeID_1=e.folder_id,t.carByDate.push(e)):"9531f0db-33a6-49d9-b631-9ba0f4073a35"===e.folder_id?(t.typeID_2=e.folder_id,t.motorByDate.push(e)):"5d4454d9-5d00-4f40-bf12-b4d534c88dae"===e.folder_id?(t.typeID_3=e.folder_id,t.planeByDate.push(e)):"95c2f607-7879-415b-bb1f-be7ee7e57f64"===e.folder_id&&(t.typeID_4=e.folder_id,t.intelligentByDate.push(e))}),console.log(t.carByDate),t.drawLine())})},getProductGross:function(){var t=this;this.HttpClient.post("/admin/marketAnalysis/oneField",{type:"product_sale"}).then(function(e){200===e.data.code&&e.data.data.map(function(e){t.productTotal+=Number(e.product_order),"汽车"===e.folder?t.carTotal=e:"摩托车"===e.folder?t.motorTotal=e:"无人机"===e.folder?t.planeTotal=e:"智能设备"===e.folder&&(t.intelligentTotal=e)})})},initFormat:function(t){return t<10&&(t="0"+t),t},initDateValue:function(t){var e=t.getFullYear(),a=t.getMonth()+1,i=t.getDate(),n=t.getHours(),s=t.getMinutes(),r=t.getSeconds();return e+"-"+(a=this.initFormat(a))+"-"+(i=this.initFormat(i))+" "+(n=this.initFormat(n))+":"+(s=this.initFormat(s))+":"+(r=this.initFormat(r))}},created:function(){var t=this.initDateValue(new Date).split("-");console.log(t[2]),t[2]="01 00:00:00",t.join("-"),this.startTime=t.join("-"),this.endTime=this.initDateValue(new Date),console.log(this.startTime),console.log(this.endTime),this.getProductGross(),this.getProductDataByDate(),this.getTypelist()}}},kkjl:function(t,e){},yQzw:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("TaTz"),n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mallData"},[a("BreadCrumb",{staticClass:"bread",attrs:{breadData:t.breadData}}),t._v(" "),a("div",{staticClass:"mallData_main"},[t._m(0),t._v(" "),a("div",{staticClass:"mallData_content"},[a("div",{staticClass:"mallData_chart"},[a("el-radio-group",{attrs:{size:"small"},on:{change:t.folderChange},model:{value:t.typeValue,callback:function(e){t.typeValue=e},expression:"typeValue"}},t._l(t.typeList,function(e,i){return a("el-radio",{key:i,attrs:{label:e.menu_id,border:""}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("div",{staticClass:"mallData_chart"},[a("el-radio-group",{attrs:{size:"small"},on:{change:t.oneMenuChange},model:{value:t.onetypeValue,callback:function(e){t.onetypeValue=e},expression:"onetypeValue"}},t._l(t.oneTypelist,function(e,i){return a("el-radio",{key:i,attrs:{label:e.menu_id,border:""}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("div",{staticClass:"mallData_chart"},[a("el-radio-group",{attrs:{size:"small"},on:{change:t.twoMenuChange},model:{value:t.twotypeValue,callback:function(e){t.twotypeValue=e},expression:"twotypeValue"}},t._l(t.twoTypelist,function(e,i){return a("el-radio",{key:i,attrs:{label:e.menu_id,border:""}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("div",{staticClass:"mallData_chart"},[a("el-radio-group",{attrs:{size:"small"},on:{change:t.threeMenuChange},model:{value:t.threetypeValue,callback:function(e){t.threetypeValue=e},expression:"threetypeValue"}},t._l(t.threeTypelist,function(e,i){return a("el-radio",{key:i,attrs:{label:e.menu_id,border:""}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("div",{staticClass:"mallData_chart"},[a("el-radio-group",{attrs:{size:"small"},on:{change:t.productMenuChange},model:{value:t.producttypeValue,callback:function(e){t.producttypeValue=e},expression:"producttypeValue"}},t._l(t.productTypelist,function(e,i){return a("el-radio",{key:i,attrs:{label:e.id,border:""}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("div",{staticClass:"mallData_chart"},[a("div",{staticClass:"conditions"},[a("div",{staticClass:"date_item"},[a("p",{staticClass:"date_label"},[t._v("时间起点")]),t._v(" "),a("el-date-picker",{staticClass:"date_picker_1",attrs:{type:"date","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期"},on:{change:t.getProductDataByDate},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}})],1),t._v(" "),a("div",{staticClass:"date_item"},[a("p",{staticClass:"date_label"},[t._v("时间终点")]),t._v(" "),a("el-date-picker",{staticClass:"date_picker_1",attrs:{type:"date","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期","picker-options":t.pickerOptions},on:{change:t.getProductDataByDate},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}})],1)]),t._v(" "),a("div",{staticClass:"shape_content"},[a("div",{staticClass:"shape_header"},[a("div",{staticClass:"shape_header_left"},[a("p",{staticClass:"left_title"},[t._v("商品数量曲线图")]),t._v(" "),a("div",{staticClass:"time_range"},[a("span",[t._v(t._s(t.startTime?t.startTime.split(" ")[0]:""))]),t._v(" "),a("span",[t._v("---")]),t._v(" "),a("span",[t._v(t._s(t.endTime?t.endTime.split(" ")[0]:""))])])]),t._v(" "),a("div",{staticClass:"shape_header_right"},[a("div",{staticClass:"right_items"},[a("div",{staticClass:"point color1"}),t._v(" "),a("p",[t._v("汽车占"+t._s(t.carByDate.percent)+"%")])]),t._v(" "),a("div",{staticClass:"right_items"},[a("div",{staticClass:"point color2"}),t._v(" "),a("p",[t._v("摩托车占"+t._s(t.motorByDate.percent)+"%")])]),t._v(" "),a("div",{staticClass:"right_items"},[a("div",{staticClass:"point color3"}),t._v(" "),a("p",[t._v("无人机占"+t._s(t.planeByDate.percent)+"%")])]),t._v(" "),a("div",{staticClass:"right_items"},[a("div",{staticClass:"point color4"}),t._v(" "),a("p",[t._v("智能设备占"+t._s(t.intelligentByDate.percent)+"%")])])])]),t._v(" "),a("div",{style:{width:"100%",height:"400px"},attrs:{id:"myChart"}})])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("p",[this._v("商城订单数据")])])}]};var s=function(t){a("kkjl")},r=a("VU/8")(i.a,n,!1,s,null,null);e.default=r.exports}});