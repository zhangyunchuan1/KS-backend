webpackJsonp([84],{Aa55:function(t,e){},Y1lG:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"ArticleTags",components:{BreadCrumb:a("ZPfm").a},data:function(){return{breadData:[{id:1,name:"文章",urls:"/index/article/Article",icon:"icon-home"},{id:2,name:"文章小标题分配",urls:"/index/article/ArticleTags",icon:"icon-home"}],topicSearch:null,tableData:[{id:"1",videoTitle:"今天加班半价",plate:"汽车",userStatus:"商家",distribution:"已分配",time:"2018.12.2"},{id:"2",videoTitle:"今天加班半价",plate:"汽车",userStatus:"商家",distribution:"已分配",time:"2018.12.2"}],currentPage:1,total:null,tagsDialog:!1,checkboxTags:[],tags:[],tagsIds:[],articleId:null}},mounted:function(){this.getVideoList()},methods:{handleAddTags:function(){var t=this;console.log(this.tagsIds),this.HttpClient.post("/admin/article/titleRelation",{ids:this.tagsIds.toString(),article_id:this.articleId}).then(function(e){console.log(e),200===e.data.code&&(t.$message.success(e.data.msg),setTimeout(function(){t.getVideoList()},500),t.tagsDialog=!1)})},handleChangetags:function(t,e){if(console.log(t,e),!0===t)this.tagsIds.push(e.id);else{var a=this.tagsIds.indexOf(e.id);this.tagsIds.splice(a,1)}console.log(this.tagsIds)},handleOpenDistributionTags:function(t){console.log(t),this.checkboxTags=[],this.tags=[],this.tagsIds=[],this.articleId=t.article_id,console.log(this.videoId),this.getTagsList(t.category_id,t.titles),this.tagsDialog=!0},getTagsList:function(t,e){var a=this;this.HttpClient.post("/admin/articleTitle/getList",{type:t}).then(function(i){if(console.log(t),console.log(i),200===i.data.code){if(a.tags=i.data.data,void 0!==e)for(var s=0;s<e.length;s++)for(var l=0;l<a.tags.length;l++)e[s].name===a.tags[l].name&&a.checkboxTags.push(a.tags[l]);console.log(a.checkboxTags),a.checkboxTags.forEach(function(t){a.tagsIds.push(t.id)}),a.tagsDialog=!0}})},getVideoList:function(){var t=this;this.HttpClient.post("/admin/article/getListWithTitle",{size:25,page:this.currentPage,title:this.topicSearch}).then(function(e){console.log(e),t.total=e.data.data.total,t.tableData=e.data.data.data})},filterPlate:function(t,e,a){return e[a.property]===t},filterSecondary:function(t,e,a){return e[a.property]===t},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},handleCurrentChange:function(t){console.log(t),this.currentPage=t,this.getVideoList()}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"articleTags"},[a("BreadCrumb",{staticClass:"bread",attrs:{breadData:t.breadData}}),t._v(" "),a("div",{staticClass:"articleTags_main"},[t._m(0),t._v(" "),a("div",{staticClass:"articleTags_content"},[a("div",{staticClass:"articleTags_header"},[a("div",{staticClass:"articleTags_search"},[a("div",[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"文章标题搜索",clearable:""},on:{change:t.getVideoList},model:{value:t.topicSearch,callback:function(e){t.topicSearch=e},expression:"topicSearch"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.getVideoList},slot:"append"})],1)],1)])]),t._v(" "),a("div",{staticClass:"articleTags_content_box"},[a("el-table",{attrs:{data:t.tableData,border:!0}},[a("el-table-column",{attrs:{label:"ID",align:"center",width:"65",prop:"id",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"文章标题",align:"center","show-overflow-tooltip":"",width:"130",prop:"title"}}),t._v(" "),a("el-table-column",{attrs:{label:"所属板块",align:"center",filters:[{text:"汽车",value:"汽车"},{text:"摩托车",value:"摩托车"}],"filter-method":t.filterSecondary,width:"100",prop:"category"}}),t._v(" "),a("el-table-column",{attrs:{label:"上传者身份",align:"center",filters:[{text:"个人",value:1},{text:"专业商家",value:2},{text:"普通商家",value:3}],"filter-method":t.filterSecondary,prop:"user_type",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.user_type?a("span",[t._v("个人")]):t._e(),t._v(" "),2===e.row.user_type?a("span",[t._v("专业商家")]):t._e(),t._v(" "),3===e.row.user_type?a("span",[t._v("普通商家")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"分配情况",align:"center",width:"110",filters:[{text:"已分配",value:!0},{text:"未分配",value:!1}],"filter-method":t.filterSecondary,prop:"title_status"},scopedSlots:t._u([{key:"default",fn:function(e){return[!0===e.row.title_status?a("span",[t._v("已分配")]):t._e(),t._v(" "),!1===e.row.title_status?a("span",[t._v("未分配")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"通过时间",align:"center",width:"160",prop:"created_at","show-overflow-tooltip":"",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"小标题",align:"center",width:"400"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"video_tags"},t._l(e.row.titles,function(e,i){return a("div",{key:i},[t._v(t._s(e.name))])}))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"articleTags_scope",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"articleTags_btm"},[a("div",{on:{click:function(a){t.handleOpenDistributionTags(e.row)}}},[t._v("分配")]),t._v(" "),a("div",[t._v("看文章")])])]}}])})],1),t._v(" "),a("div",{staticClass:"paging"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":25,total:t.total},on:{"current-change":function(e){t.handleCurrentChange(e)}}})],1)],1)])]),t._v(" "),a("el-dialog",{attrs:{width:"600px","custom-class":"tagsDialog",visible:t.tagsDialog},on:{"update:visible":function(e){t.tagsDialog=e}}},[a("span",{staticClass:"tagsDialog_title",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"iconfont icon-qiehuan"}),t._v("分配小标题")]),t._v(" "),a("div",{staticClass:"tags_dialog_box"},[a("el-checkbox-group",{attrs:{max:3},model:{value:t.checkboxTags,callback:function(e){t.checkboxTags=e},expression:"checkboxTags"}},t._l(t.tags,function(e,i){return a("el-checkbox",{key:i,attrs:{border:"",label:e},on:{change:function(a){t.handleChangetags(a,e)}}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.tagsDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handleAddTags}},[t._v("确 定")])],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("p",[this._v("文章小标题分配")])])}]};var l=a("VU/8")(i,s,!1,function(t){a("Aa55")},null,null);e.default=l.exports}});