webpackJsonp([31],{"5dJI":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={name:"ExternalJurisdiction",components:{BreadCrumb:i("ZPfm").a},data:function(){return{arrayValue:"",search_name:"",search_method:"",addVisible:!1,menuVisible:!1,menu_id:null,checkedJurisdiction:[],breadData:[{id:1,name:"外部管理",urls:"/index",icon:"icon-home"},{id:2,name:"创建权限",urls:"/index/test",icon:"icon-home"}],arrayOptions:[{value:1,label:"按创建时间"},{value:2,label:"按修改时间"},{value:3,label:"按英文字母排列"},{value:4,label:"按ID排列"}],tableData:[{id:1,jurisdictionName:"摩托车视屏显示",description:"摩托车部门的视屏表格",type:"数据权限",method:"Activity/uploading",createTime:"2018/08/23",updateTime:"2018/09/26"}],radioValue:"专业商家",pages:[],pageValue:null,jurisdictionList:[],checkList:[]}},methods:{handleSelct:function(t,e){this.jurisdictionChange(t,e.id)},handleChangeStauts:function(t){console.log(this.checkList,t)},handleChangePage:function(){console.log(this.pageValue),this.getJurisdiction(this.pageValue.id)},getMenuItem:function(t){console.log("data",t),this.menu_id=this.$store.state.menu.menu.id,this.checkedJurisdiction=t},handleSaveMenuJurisdiction:function(){console.log("保存：",this.menu_id,this.checkedJurisdiction)},getPagesList:function(){var t=this,e=2;"普通商家"===this.radioValue?e=1:"个人用户"===this.radioValue&&(e=0),this.HttpClient.post("/web/role/index",{type:e}).then(function(e){console.log(e),200===e.data.code&&(t.pages=e.data.data,t.pages.map(function(t,e){t.jurisdiction=[],t.jurisdictionSelect=[]}))})},getJurisdiction:function(t){var e=this;this.checkList=[],this.HttpClient.post("/web/permission/index",{role_id:t}).then(function(t){console.log(t),200===t.data.code&&(e.jurisdictionList=t.data.data,e.jurisdictionList.forEach(function(t){1===t.status&&e.checkList.push(t.permission_id)}))})},jurisdictionChange:function(t,e){var i=this,a=0;t&&(a=1),this.HttpClient.post("/web/permission/changeStatus",{permission_id:e,status:a}).then(function(t){console.log(t),200===t.data.code?i.$message.success(1===a?"启用成功":"禁用成功"):i.$message.error(t.data.msg)})}},created:function(){this.getPagesList()}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"externalJurisdiction"},[i("BreadCrumb",{staticClass:"bread",attrs:{breadData:t.breadData}}),t._v(" "),i("div",{staticClass:"content"},[i("p",{staticClass:"title"},[t._v("页面权限管理")]),t._v(" "),i("div",{staticClass:"user_page_jurisdiction"},[i("div",{staticClass:"user_page_select"},[t._v("用户选择")]),t._v(" "),i("el-radio-group",{attrs:{fill:"#15bafe"},on:{change:t.getPagesList},model:{value:t.radioValue,callback:function(e){t.radioValue=e},expression:"radioValue"}},[i("el-radio-button",{attrs:{label:"专业商家",border:""}}),t._v(" "),i("el-radio-button",{attrs:{label:"普通商家",border:""}}),t._v(" "),i("el-radio-button",{attrs:{label:"个人用户",border:""}})],1)],1),t._v(" "),i("div",{staticClass:"page_jurisdiction_total"},[i("div",{staticClass:"user_page_select"},[t._v("页面权限")]),t._v(" "),i("div",{staticClass:"jurisdictions"},[i("el-radio-group",{on:{change:t.handleChangePage},model:{value:t.pageValue,callback:function(e){t.pageValue=e},expression:"pageValue"}},t._l(t.pages,function(e,a){return i("div",{key:a,staticClass:"plate_list"},[i("el-radio-button",{attrs:{label:e}},[t._v(t._s(e.name))])],1)}))],1)]),t._v(" "),i("div",{staticClass:"page_jurisdictions"},[i("el-checkbox-group",{on:{change:function(e){t.handleChangeStauts(e)}},model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.jurisdictionList,function(e,a){return i("el-checkbox",{key:a,attrs:{border:"",size:"mini",label:e.permission_id},on:{change:function(i){t.handleSelct(i,e)}}},[t._v(t._s(e.label+"/"+e.name))])}))],1)]),t._v(" "),i("el-dialog",{attrs:{visible:t.addVisible,width:"400px"},on:{"update:visible":function(e){t.addVisible=e}}},[i("div",{staticClass:"dialog_head_title",attrs:{slot:"title"},slot:"title"},[i("i",{staticClass:"iconfont icon-edit-square examine_icon"}),t._v(" "),i("span",[t._v("新增权限")])]),t._v(" "),i("div",{staticClass:"jurisdiction_content"},[i("div",{staticClass:"jurisdiction_content_item"},[i("label",{staticClass:"el_lbl"},[t._v("权限名称:")]),t._v(" "),i("el-input",{staticClass:"el_input",attrs:{size:"mini"}})],1),t._v(" "),i("div",{staticClass:"jurisdiction_content_item"},[i("label",{staticClass:"el_lbl"},[t._v("方法:")]),t._v(" "),i("el-input",{staticClass:"el_input",attrs:{size:"mini"}})],1),t._v(" "),i("div",{staticClass:"jurisdiction_content_item"},[i("label",{staticClass:"el_lbl"},[t._v("介绍:")]),t._v(" "),i("el-input",{staticClass:"el_input_text_area",attrs:{placeholder:"100字以内",type:"textarea",autosize:{minRows:3,maxRows:3}}})],1)]),t._v(" "),i("div",{staticClass:"user_footer",attrs:{slot:"footer"},slot:"footer"},[i("el-row",{staticClass:"row_e"},[i("el-button",{staticClass:"btn_deletes",attrs:{size:"small"},on:{click:function(e){t.addVisible=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{staticClass:"btn_delete",attrs:{type:"primary",size:"small"}},[t._v("保存")])],1)],1)])],1)},staticRenderFns:[]};var n=i("VU/8")(a,s,!1,function(t){i("9H2R"),i("F+Bw")},"data-v-488ed9c2",null);e.default=n.exports},"9H2R":function(t,e){},"F+Bw":function(t,e){}});