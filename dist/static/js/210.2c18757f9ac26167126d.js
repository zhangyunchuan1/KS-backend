webpackJsonp([210],{FOOX:function(t,e){},RMMX:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,a=i("bOdI"),n=i.n(a),s=i("//Fk"),l=i.n(s),r=i("Xxa5"),c=i.n(r),u=i("exGp"),d=i.n(u),p=(i("G0J2"),i("yPE/")),h=(i("PJh5"),i("AJTU")),m=i.n(h),f=i("37tQ"),g=i("GH0r"),v=i("ZPfm");p.register("modules/imageResize",m.a),p.register("modules/imageDrop",f.a);var _=["10px","12px","14px","16px","18px","20px"],y=p.import("attributors/style/size");y.whitelist=_,p.register(y,!0);p.import("formats/font").whitelist=["SimSun","SimHei","Microsoft-YaHei","KaiTi","FangSong","Arial","Times-New-Roman","sans-serif"],p.register("modules/ImageExtend",g.a);var b=[["italic","underline","strike","bold"],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:_}],[{color:[]}],[{align:[]}],["image"]],w={name:"ProductTypeList",components:{BreadCrumb:v.a},data:function(){var t=this;return{breadData:[{id:1,name:"功能控制",urls:"/index/functionControl",icon:"icon-home"},{id:2,name:"商城菜单管理",urls:"/index/functionControl/mallManagement/mall-management",icon:"icon-home"},{id:3,name:"产品类型解释",urls:"/index/functionControl/mallManagement/product-type-explain",icon:"icon-home"}],explainData:[{value:"0",label:"全部"},{value:"1",label:"有"},{value:"2",label:"无"}],explainValue:"",selectVideotitle:"",selectVideotitleid:"",menuList:[],datalevel:1,searchID:"",searchName:"",isShowProperty:!1,selectNum:"1",selectNumchoseData:[],isShowaddExplain:!1,isShowmodifyExplain:!1,tableData:[],row:{},properties:[],editorOption:{modules:{toolbar:{container:b,handlers:{image:function(t){t?document.querySelector("#xx input").click():this.quill.format("image",!1)}}},imageDrop:!0,imageResize:{displayStyles:{backgroundColor:"black",border:"none",color:"white"},modules:["Resize","DisplaySize","Toolbar"]},ImageExtend:{loading:!0,name:"img",size:1,action:"",response:function(t){return t.info},headers:function(t){},sizeError:function(){t.$message.error("图片大小超过限制1M")},start:function(){},end:function(){},error:function(){},success:function(){},change:function(t,e){}}}},contentUpData:{},content:"",modifycontent:"",currentPage:1,pageSize:25,total:0}},mounted:function(){this.getTypelist(),this.getlistDataFn()},methods:(o={changesSelectFn:function(){var t=this;"1"==this.selectNum?(console.log(this.properties),this.selectNumchoseData=[],this.properties.forEach(function(e){1===e.rule?(console.log(e.property_name),t.selectNumchoseData.push(e)):2===e.rule&&(console.log(e.property_name),t.selectNumchoseData.push(e))}),console.log(this.selectNumchoseData)):"2"==this.selectNum?(console.log(this.properties),this.selectNumchoseData=[],this.properties.forEach(function(e){1!==e.rule&&2!==e.rule&&t.selectNumchoseData.push(e)}),console.log(this.selectNumchoseData)):this.selectNum},getTypelist:function(){var t=this;this.HttpClient.post("/admin/menu/getList",{menu_type:1,type:0}).then(function(e){200===e.data.code&&(t.menuList=e.data.data)})},getlistDataFn:function(){var t=this,e={size:this.pageSize,page:this.currentPage,hasProperty:!0,folder:this.selectVideotitle,id:this.searchID,name:this.searchName,order_time:this.sorttimeValue,hasDescription:this.explainValue};this.HttpClient.post("/admin/category/lists",e).then(function(e){200===e.data.code&&(t.tableData=e.data.data.data,t.total=e.data.data.total)})},searchIDfn:function(){this.getlistDataFn()},searchNamefn:function(){this.getlistDataFn()},changeproTypeModel:function(){this.getlistDataFn()},hancleCheckProperty:function(t){var e=this;return d()(c.a.mark(function i(){var o,a;return c.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return e.row=t,i.next=3,e.HttpClient.post("/admin/category/getPropertyWithCate",{id:t.id});case 3:return o=i.sent,i.next=6,o.data;case 6:200===(a=i.sent).code&&(e.isShowProperty=!0,e.properties=a.data),e.selectNum="1",e.selectNumchoseData=[],e.properties.forEach(function(t){1!==t.rule&&2!==t.rule||e.selectNumchoseData.push(t)}),console.log(a.data);case 12:case"end":return i.stop()}},i,e)}))()},addExplainFn:function(t){console.log(t),this.row=t,this.isShowaddExplain=!0},modifyExplainFn:function(t){var e=this;this.modifycontent=t.description,this.isShowmodifyExplain=!0,this.HttpClient.get("/admin/category/edit",{id:t.id}).then(function(t){console.log(t.data.data),200==t.data.code&&(e.row=t.data.data)})},sureSubmitExplain:function(){var t=this;console.log(this.row),this.HttpClient.post("/admin/category/editDescription",{id:this.row.id,description:this.content}).then(function(e){200===e.data.code&&(console.log(e.data),t.$message.success(e.data.msg),t.isShowaddExplain=!1,setTimeout(function(){t.getlistDataFn()},500))})},sureModifyExplain:function(){var t=this,e={id:this.row.id,name:this.row.name,image:"http://cdn.kushualab.com/"+this.row.image,description:this.modifycontent,property_array:this.row.property};this.HttpClient.post("/admin/category/edit",e).then(function(e){console.log(e.data),200==e.data.code&&(t.$message.success(e.data.msg),t.isShowmodifyExplain=!1,setTimeout(function(){t.getlistDataFn()},500))})},currentChange:function(t){this.currentPage=t,this.getlistData()},onEditorBlur:function(){},onEditorFocus:function(){},onEditorChange:function(t,e){console.log(this.content);this.content;t.quill.deleteText(e,1),this.$emit("Quescthon",this.content),console.log(this.content);var i=this.Tools.getEditorImageAndLength(this.content);this.editImageSize=i.imgArray.length,console.log(this.modifyData)},beforeContentUpload:function(t){var e=t.size/1024/1024<10,i=t.name.split(".")[1];if("jpg,png,jpeg,tiff,tif".indexOf(i)<0)return this.$message.error("图片类型只能为jpg,png,jpeg,tiff,tif"),!1;if(!e)return this.$message.error("上传图片大小不能超过 5MB!"),!1;var o=this,a=new FileReader;return a.readAsDataURL(t),new l.a(function(e,i){a.onload=function(){o.contentUpData.token=o.$getQiNiuToken({saveKey:t.name}),e(!0)}})},handleContentSuccess:function(t,e,i){console.log(t,e,i);var o=this.$refs.myQuillEditor.quill,a=o.getSelection().index;o.insertEmbed(a,"image",this.$imagePath+e.response.key),o.setSelection(a+1)}},n()(o,"onEditorBlur",function(){}),n()(o,"onEditorFocus",function(){}),n()(o,"onmodifyEditorChange",function(t,e){console.log(this.modifycontent);this.modifycontent;t.quill.deleteText(e,1),this.$emit("Quescthon",this.modifycontent),console.log(this.modifycontent);var i=this.Tools.getEditorImageAndLength(this.modifycontent);this.editImageSize=i.imgArray.length,console.log(this.modifyData)}),n()(o,"beforemodifyContentUpload",function(t){var e=t.size/1024/1024<10,i=t.name.split(".")[1];if("jpg,png,jpeg,tiff,tif".indexOf(i)<0)return this.$message.error("图片类型只能为jpg,png,jpeg,tiff,tif"),!1;if(!e)return this.$message.error("上传图片大小不能超过 5MB!"),!1;var o=this,a=new FileReader;return a.readAsDataURL(t),new l.a(function(e,i){a.onload=function(){o.contentUpData.token=o.$getQiNiuToken({saveKey:t.name}),e(!0)}})}),n()(o,"handlemodifyContentSuccess",function(t,e,i){console.log(t,e,i);var o=this.$refs.myQuillEditor.quill,a=o.getSelection().index;o.insertEmbed(a,"image",this.$imagePath+e.response.key),o.setSelection(a+1)}),o)},x={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"producttypeListTitle"},[i("BreadCrumb",{staticClass:"bread",attrs:{breadData:t.breadData}}),t._v(" "),i("div",{staticClass:"video_titlebox"},[t._m(0),t._v(" "),i("div",{staticClass:"productbox"},[i("div",{staticClass:"product_header"},[i("div",{staticClass:"choseType"},[t._v("选择")]),t._v(" "),i("el-radio-group",{attrs:{size:"small"},model:{value:t.selectVideotitle,callback:function(e){t.selectVideotitle=e},expression:"selectVideotitle"}},[i("el-radio",{attrs:{label:"",border:""},on:{change:function(e){t.changeproTypeModel()}}},[t._v("全部")]),t._v(" "),t._l(t.menuList,function(e,o){return i("el-radio",{key:o,attrs:{label:e.menu_id,border:""},on:{change:function(e){t.changeproTypeModel()}}},[t._v(t._s(e.name))])})],2)],1),t._v(" "),i("div",{staticClass:"product_header"},[i("div",{staticClass:"search"},[i("el-input",{attrs:{placeholder:"搜索产品类型ID",clearable:""},on:{change:t.searchIDfn},model:{value:t.searchID,callback:function(e){t.searchID=e},expression:"searchID"}}),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.searchIDfn}},[t._v("搜索")])],1),t._v(" "),i("div",{staticClass:"search"},[i("el-select",{attrs:{clearable:"",placeholder:"请选择产品解释"},on:{change:t.searchIDfn},model:{value:t.explainValue,callback:function(e){t.explainValue=e},expression:"explainValue"}},t._l(t.explainData,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)]),t._v(" "),i("div",{staticClass:"product_header"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[i("el-table-column",{attrs:{prop:"id",label:"产品类型ID",sortable:""}}),t._v(" "),i("el-table-column",{attrs:{prop:"name",label:"产品类型名称","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"image",label:"图片",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("img",{staticClass:"productImg",attrs:{src:t.Tools.handleImg(e.row.image),alt:""}})]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"created_at","show-overflow-tooltip":"",label:"创建时间",width:"180"}}),t._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"产品状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(1==e.row.status?"正常":0==e.row.status?"禁用":""))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"description","show-overflow-tooltip":"",label:"产品解释"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.has_description?i("span",{staticClass:"sortout_color"},[t._v("无")]):t._e(),t._v(" "),1==e.row.has_description?i("span",[t._v("有")]):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"view_num","show-overflow-tooltip":"",label:"解释点击次数"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作",align:"center",width:"350","class-name":"mallReview_scope"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"mallReview_btm"},[null==e.row.description||""==e.row.description?i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(i){t.addExplainFn(e.row)}}},[t._v("添加解释")]):t._e(),t._v(" "),e.row.description?i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(i){t.modifyExplainFn(e.row)}}},[t._v("修改解释")]):t._e(),t._v(" "),i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(i){t.hancleCheckProperty(e.row)}}},[t._v("查看属性值")])],1)]}}])})],1)],1),t._v(" "),i("div",{staticClass:"block"},[t.total?i("el-pagination",{attrs:{layout:"prev, pager, next",total:t.total,"page-size":t.pageSize},on:{"current-change":t.currentChange}}):t._e()],1)])]),t._v(" "),i("div",[i("el-dialog",{attrs:{title:t.row.name,visible:t.isShowProperty,width:"30%",center:""},on:{"update:visible":function(e){t.isShowProperty=e}}},[i("div",{staticClass:"showinfo"},[i("div",[i("el-radio",{attrs:{label:"1",border:""},on:{change:t.changesSelectFn},model:{value:t.selectNum,callback:function(e){t.selectNum=e},expression:"selectNum"}},[t._v("选择框")]),t._v(" "),i("el-radio",{attrs:{label:"2",border:""},on:{change:t.changesSelectFn},model:{value:t.selectNum,callback:function(e){t.selectNum=e},expression:"selectNum"}},[t._v("数字区间")]),t._v(" "),i("el-radio",{attrs:{label:"3",border:""},on:{change:t.changesSelectFn},model:{value:t.selectNum,callback:function(e){t.selectNum=e},expression:"selectNum"}},[t._v("商家自填框")])],1),t._v(" "),t._l(t.selectNumchoseData,function(e,o){return i("div",{key:o,staticClass:"boxsh"},[i("div",[i("el-tag",{attrs:{type:"warning"}},[t._v(t._s(e.property_name))]),t._v(" "),"1"==t.selectNum?i("div",{staticStyle:{"margin-top":"10px"}},t._l(e.values,function(e,o){return i("el-tag",{key:o},[t._v(t._s(e.value))])})):t._e(),t._v(" "),"2"==t.selectNum?i("div",{staticStyle:{"margin-top":"10px"}},[i("el-tag",[t._v(t._s(e.unit_cn+"("+e.unit+")"))])],1):t._e()],1),t._v(" "),"3"!==t.selectNum?i("div",{staticStyle:{"margin-top":"10px"}},[i("el-tag",{attrs:{type:"success"}},[t._v(t._s(1==e.rule?"单选":2==e.rule?"多选":3==e.rule?"整数":4==e.rule?"一位小数":5==e.rule?"两位小数":""))]),t._v(" "),i("el-tag",{attrs:{type:"success"}},[t._v(t._s(0==e.selective?"必填":1==e.selective?"选填":""))]),t._v(" "),i("el-tag",{attrs:{type:"success"}},[t._v(t._s(0==e.selective?"不可搜索":1==e.selective?"可以搜索":""))])],1):t._e()])})],2)])],1),t._v(" "),i("div",[i("el-dialog",{attrs:{title:"添加解释",visible:t.isShowaddExplain,width:"900",center:""},on:{"update:visible":function(e){t.isShowaddExplain=e}}},[i("div",{staticClass:"mail_edit"},[i("div",{staticClass:"mail_edit_body"},[i("el-upload",{staticClass:"avatar-uploader up_content",attrs:{id:"xx",action:t.$uploadPath,data:t.contentUpData,name:"file","show-file-list":!1,"on-success":t.handleContentSuccess,"before-upload":t.beforeContentUpload}}),t._v(" "),i("quill-editor",{ref:"myQuillEditor",attrs:{options:t.editorOption},on:{blur:function(e){t.onEditorBlur(e)},focus:function(e){t.onEditorFocus(e)},change:function(e){t.onEditorChange(e,5e3)}},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.isShowaddExplain=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.sureSubmitExplain}},[t._v("确 定")])],1)])],1),t._v(" "),i("div",[i("el-dialog",{attrs:{title:"修改解释",visible:t.isShowmodifyExplain,width:"900",center:""},on:{"update:visible":function(e){t.isShowmodifyExplain=e}}},[i("div",{staticClass:"mail_edit"},[i("div",{staticClass:"mail_edit_body"},[i("el-upload",{staticClass:"avatar-uploader up_content",attrs:{id:"xx",action:t.$uploadPath,data:t.contentUpData,name:"file","show-file-list":!1,"on-success":t.handlemodifyContentSuccess,"before-upload":t.beforemodifyContentUpload}}),t._v(" "),i("quill-editor",{ref:"myQuillEditor",attrs:{options:t.editorOption},on:{blur:function(e){t.onEditorBlur(e)},focus:function(e){t.onEditorFocus(e)},change:function(e){t.onmodifyEditorChange(e,5e3)}},model:{value:t.modifycontent,callback:function(e){t.modifycontent=e},expression:"modifycontent"}})],1)]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.isShowmodifyExplain=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.sureModifyExplain}},[t._v("确 定")])],1)])],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"videopage_title"},[e("div",{staticClass:"title"},[this._v("产品类型解释")])])}]};var C=i("VU/8")(w,x,!1,function(t){i("FOOX")},null,null);e.default=C.exports}});