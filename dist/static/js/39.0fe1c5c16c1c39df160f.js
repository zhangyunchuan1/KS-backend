webpackJsonp([39],{X4z9:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={name:"UserReport",components:{BreadCrumb:a("ZPfm").a},data:function(){return{breadData:[{id:1,name:"用户管理",urls:"/index/standardUser/StandardUser",icon:"icon-home"},{id:2,name:"用户账户",urls:"/index/standardUser/userManagement/UserManagement",icon:"icon-home"},{id:3,name:"用户举报",urls:"/index/standardUser/userManagement/UserReport",icon:"icon-home"}],searchTime:"",tableData:[],reviewList:null,multipleSelection:[],reviewDialog:!1,reviewRadio:null,viewImageDialog:!1,removeVisible:!1,viewImage:"",currentObj:{},total:null,currentPage:1}},mounted:function(){this.getReportList(),this.getExamineList()},methods:{handleChangeTime:function(e){console.log(this.searchTime),this.getReportList()},getReportList:function(){var e=this;this.HttpClient.post("/admin/complains/lists",{size:25,page:this.currentPage,start_time:this.searchTime?this.searchTime[0]:"",end_time:this.searchTime?this.searchTime[1]:""}).then(function(t){console.log(t),e.tableData=t.data.data.data,e.total=t.data.data.total})},getExamineList:function(){var e=this;this.HttpClient.post("/admin/webReview/getList",{type:"complains"}).then(function(t){console.log(t),e.reviewList=t.data.data})},handleReview:function(e){this.currentObj=e,this.reviewDialog=!0},handleChangeReview:function(e){console.log(e)},handleSaveReview:function(){var e=this;this.HttpClient.post("/admin/complains/changeStatus",{complain_id:this.currentObj.complain_id,status:3,review:this.reviewRadio}).then(function(t){console.log(t),200===t.data.code&&(e.$message.success(t.data.msg),e.reviewRadio="",setTimeout(function(){e.getReportList(),e.reviewDialog=!1},500))})},handleSeePic:function(e){console.log(JSON.parse(e.attachment)),this.viewImage=JSON.parse(e.attachment)[0].path,this.viewImageDialog=!0},handledelete:function(e){console.log(e),this.currentObj=e,this.removeVisible=!0},handleRemove:function(){var e=this;this.HttpClient.post("/admin/complains/changeStatus",{complain_id:this.currentObj.complain_id,status:0}).then(function(t){console.log(t),200===t.data.code&&(e.$message.success(t.data.msg),setTimeout(function(){e.getReportList(),e.removeVisible=!1},500))})},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},currentChange:function(e){this.currentPage=e,this.getReportList()},filterHandler:function(e,t,a){return t[a.property]===e}}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"userReport"},[i("BreadCrumb",{staticClass:"bread",attrs:{breadData:e.breadData}}),e._v(" "),i("div",{staticClass:"userReport_main"},[e._m(0),e._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"content_header"},[i("div",{staticClass:"content_time"},[i("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:function(t){e.handleChangeTime(t)}},model:{value:e.searchTime,callback:function(t){e.searchTime=t},expression:"searchTime"}})],1)]),e._v(" "),i("div",{staticClass:"content_table"},[i("el-table",{ref:"multipleTable",attrs:{data:e.tableData,border:!0,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),e._v(" "),i("el-table-column",{attrs:{label:"ID",align:"center",width:"90",prop:"id",sortable:""}}),e._v(" "),i("el-table-column",{attrs:{label:"举报者昵称",align:"center",width:"120","show-overflow-tooltip":"",prop:"actual_name"}}),e._v(" "),i("el-table-column",{attrs:{label:"用户名",align:"center",width:"100","show-overflow-tooltip":"",prop:"username"}}),e._v(" "),i("el-table-column",{attrs:{label:"电话",align:"center","show-overflow-tooltip":"",width:"150",prop:"phone"}}),e._v(" "),i("el-table-column",{attrs:{label:"举报原因",align:"center","show-overflow-tooltip":"",width:"150",prop:"review"}}),e._v(" "),i("el-table-column",{attrs:{label:"链接",align:"center",width:"170",prop:"url","show-overflow-tooltip":""}}),e._v(" "),i("el-table-column",{attrs:{label:"审核状态",align:"center",width:"120",prop:"status",filters:[{text:"已处理通过",value:1},{text:"未处理",value:2},{text:"已处理未通过",value:3},{text:"已删除",value:0}],"filter-method":e.filterHandler,"show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.status?i("span",[e._v("已处理通过")]):e._e(),e._v(" "),2===t.row.status?i("span",[e._v("未处理")]):e._e(),e._v(" "),3===t.row.status?i("span",[e._v("已处理未通过")]):e._e(),e._v(" "),0===t.row.status?i("span",[e._v("已删除")]):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"审核结论",align:"center","show-overflow-tooltip":"",width:"250",prop:"review_name"}}),e._v(" "),i("el-table-column",{attrs:{label:"举报时间",align:"center","show-overflow-tooltip":"",width:"160",prop:"created_at",sortable:""}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",align:"center","class-name":"table_scope"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"scope_btm"},[i("el-button",{attrs:{size:"medium",type:"text"},on:{click:function(a){e.handleReview(t.row)}}},[e._v("审核")]),e._v(" "),i("el-button",{attrs:{size:"medium",type:"text"},on:{click:function(a){e.handledelete(t.row)}}},[e._v("删除")]),e._v(" "),i("el-button",{attrs:{size:"medium",type:"text"},on:{click:function(a){e.handleSeePic(t.row)}}},[e._v("查看照片")])],1)]}}])})],1),e._v(" "),e.total?i("el-pagination",{attrs:{layout:"prev, pager, next",total:e.total,"page-size":25},on:{"current-change":e.currentChange}}):e._e()],1)])]),e._v(" "),i("el-dialog",{attrs:{width:"400px","custom-class":"reviewDialog",visible:e.reviewDialog},on:{"update:visible":function(t){e.reviewDialog=t}}},[i("span",{staticClass:"reviewDialog_title",attrs:{slot:"title"},slot:"title"},[i("i",{staticClass:"iconfont icon-shenhe"}),e._v("审核")]),e._v(" "),i("div",{staticClass:"review_dialog_box"},[i("p",[e._v("审核结论：")]),e._v(" "),i("div",{staticClass:"content"},[i("el-radio-group",{on:{change:function(t){e.handleChangeReview(t)}},model:{value:e.reviewRadio,callback:function(t){e.reviewRadio=t},expression:"reviewRadio"}},e._l(e.reviewList,function(t,a){return i("el-radio",{key:a,attrs:{label:t.review_id}},[e._v(e._s(t.name))])}))],1)]),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.reviewDialog=!1}}},[e._v("关 闭")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.handleSaveReview}},[e._v("确 定")])],1)]),e._v(" "),i("el-dialog",{attrs:{width:"400px","custom-class":"viewImageDialog",visible:e.viewImageDialog},on:{"update:visible":function(t){e.viewImageDialog=t}}},[i("span",{staticClass:"viewImageDialog_title",attrs:{slot:"title"},slot:"title"},[i("i",{staticClass:"iconfont icon-image"}),e._v("查看图片")]),e._v(" "),i("div",{staticClass:"viewImage_dialog_box"},[i("img",{attrs:{src:"http://cdn.kushualab.com/"+e.viewImage,alt:""}})]),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",[i("a",{attrs:{href:"http://cdn.kushualab.com/"+e.viewImage+"?attname=",download:"图片"}},[e._v("下载")])])],1)]),e._v(" "),i("el-dialog",{attrs:{visible:e.removeVisible,width:"300px"},on:{"update:visible":function(t){e.removeVisible=t}}},[i("div",{staticClass:"dialog_delete_head_title",attrs:{slot:"title"},slot:"title"},[i("i",{staticClass:"delete_icon"}),e._v(" "),i("span",[e._v("删除")])]),e._v(" "),i("div",{staticClass:"box_delete"},[i("img",{staticClass:"boolean_delete",attrs:{src:a("GvV1")}}),e._v(" "),i("p",[e._v("确定删除吗？")])]),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-row",{staticClass:"row_e"},[i("el-button",{staticClass:"btn_deletes",attrs:{size:"small"},on:{click:function(t){e.removeVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{staticClass:"btn_delete",attrs:{type:"primary",size:"small"},on:{click:e.handleRemove}},[e._v("确 认")])],1)],1)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[t("p",[this._v("用户举报")])])}]};var o=a("VU/8")(i,l,!1,function(e){a("mFnj")},null,null);t.default=o.exports},mFnj:function(e,t){}});