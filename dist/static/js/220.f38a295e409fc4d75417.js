webpackJsonp([220],{"6b60":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=e("gRE1"),n=e.n(o),s={name:"VehicleManagement",components:{BreadCrumb:e("ZPfm").a},data:function(){return{breadData:[{id:1,name:"功能控制",urls:"/index/functionControl/FunctionControl",icon:"icon-home"},{id:2,name:"商城菜单管理",urls:"/index/market/functionControl/professionalCatalog/ProfessionalCatalog",icon:"icon-home"},{id:3,name:"车辆管理列表",urls:"/index/market/functionControl/professionalCatalog/AddDirectory",icon:"icon-home"}],carList:[],carCategory:"",modifyVisible:!1,categoryName:null,tableData:[],brandObjList:[],seriesObjList:[],total:0,currentPage:1}},mounted:function(){this.getlistMenu(),this.getCarList(this.carCategory)},methods:{getlistMenu:function(){var t=this;this.HttpClient.post("/admin/menu/getList",{menu_type:1,type:0}).then(function(a){console.log(a.data),200===a.data.code&&(n()(a.data.data).forEach(function(a){"汽车"!==a.name&&"摩托车"!==a.name||t.carList.push(a)}),console.log(t.carList))})},handleChangeCarCategory:function(t){console.log(t),this.getCarList(t)},getCarList:function(t){var a=this;this.brandObjList=[],this.seriesObjList=[],this.HttpClient.post("/admin/product/relationIndex",{product_id:null,folder:t,size:25,page:this.currentPage}).then(function(t){console.log(t),a.tableData=t.data.data.data,a.total=t.data.data.total;var e=[],o=[];for(var n in a.tableData)-1===e.indexOf(a.tableData[n].brand_name)&&e.push(a.tableData[n].brand_name),-1===o.indexOf(a.tableData[n].series_name)&&o.push(a.tableData[n].series_name);for(var s in e)a.brandObjList.push({text:e[s],value:e[s]});for(var i in o)a.seriesObjList.push({text:o[i],value:o[i]});console.log(a.brandObjList,a.seriesObjList)})},handleProhibit:function(t){var a=this;console.log(t),this.HttpClient.post("/admin/product/relationStatus",{id:t.id,status:0}).then(function(t){console.log(t),200===t.data.code&&(a.$message.success(t.data.msg),setTimeout(function(){a.getCarList(a.carCategory)},500))})},handleEnable:function(t){var a=this;console.log(t),this.HttpClient.post("/admin/product/relationStatus",{id:t.id,status:1}).then(function(t){console.log(t),200===t.data.code&&(a.$message.success(t.data.msg),setTimeout(function(){a.getCarList(a.carCategory)},500))})},currentChange:function(t){this.currentPage=t,this.getCarList(this.carCategory)},filterSecondary:function(t,a,e){return a[e.property]===t}}},i={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"VehicleManagement"},[e("BreadCrumb",{staticClass:"bread",attrs:{breadData:t.breadData}}),t._v(" "),e("div",{staticClass:"addDirectory_main"},[t._m(0),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"customer_type"},[e("div",{staticClass:"customer_select"},[t._v("选择")]),t._v(" "),e("div",{staticClass:"select"},[e("el-radio-group",{on:{change:function(a){t.handleChangeCarCategory(a)}},model:{value:t.carCategory,callback:function(a){t.carCategory=a},expression:"carCategory"}},[e("el-radio-button",{attrs:{label:""}},[t._v("全部")]),t._v(" "),t._l(t.carList,function(a,o){return e("el-radio-button",{key:o,attrs:{label:a.menu_id}},[t._v(t._s(a.name))])})],2)],1)]),t._v(" "),e("div",{staticClass:"table_content"},[e("el-table",{attrs:{data:t.tableData,border:!0}},[e("el-table-column",{attrs:{label:"车辆ID",align:"center",width:"100",prop:"id",sortable:""}}),t._v(" "),e("el-table-column",{attrs:{label:"品牌",align:"center",width:"150",prop:"brand_name",filters:t.brandObjList,"filter-method":t.filterSecondary,"show-overflow-tooltip":""}}),t._v(" "),e("el-table-column",{attrs:{label:"系列",align:"center",width:"150",prop:"series_name",filters:t.seriesObjList,"filter-method":t.filterSecondary,"show-overflow-tooltip":""}}),t._v(" "),e("el-table-column",{attrs:{label:"配置",align:"center",width:"150",prop:"config_name","show-overflow-tooltip":""}}),t._v(" "),e("el-table-column",{attrs:{label:"年限",align:"center",width:"120",prop:"year",sortable:"","show-overflow-tooltip":""}}),t._v(" "),e("el-table-column",{attrs:{label:"状态",align:"center",width:"100",prop:"status","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(a){return[1===a.row.status?e("span",[t._v("启用")]):t._e(),t._v(" "),0===a.row.status?e("span",{staticClass:"sortout_color"},[t._v("禁用")]):t._e()]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"operation"},[1===a.row.status?e("span",{staticClass:"notpass_color",on:{click:function(e){t.handleProhibit(a.row)}}},[t._v("禁用")]):t._e(),t._v(" "),0===a.row.status?e("span",{staticClass:"normal_color",on:{click:function(e){t.handleEnable(a.row)}}},[t._v("启用")]):t._e()])]}}])})],1),t._v(" "),e("div",{staticClass:"page_turning"},[t.total?e("el-pagination",{attrs:{layout:"prev, pager, next",total:t.total,"page-size":25},on:{"current-change":t.currentChange}}):t._e()],1)],1)])]),t._v(" "),e("el-dialog",{attrs:{visible:t.modifyVisible,width:"470px","custom-class":"RemarksDialog"},on:{"update:visible":function(a){t.modifyVisible=a}}},[e("span",{staticClass:"RemarksDialog_title",attrs:{slot:"title"},slot:"title"},[e("i",{staticClass:"iconfont icon-edit-square"}),t._v("修改")]),t._v(" "),e("div",{staticClass:"RemarksDialog_main"},[e("p",[t._v("名称：")]),t._v(" "),e("el-input",{attrs:{placeholder:"输入类别名称"},model:{value:t.categoryName,callback:function(a){t.categoryName=a},expression:"categoryName"}})],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.modifyVisible=!1}}},[t._v("关 闭")]),t._v(" "),e("el-button",{attrs:{type:"primary"}},[t._v("提 交")])],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"title"},[a("p",[this._v("车辆管理列表")])])}]};var l=e("VU/8")(s,i,!1,function(t){e("gi30")},null,null);a.default=l.exports},gi30:function(t,a){}});