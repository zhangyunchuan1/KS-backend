webpackJsonp([239],{RQHA:function(t,e){},a7Gl:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("ZPfm"),s=a("XLwt"),l=a.n(s),o={name:"questionData",data:function(){return{breadData:[{id:1,name:"问题",urls:"/index/question/question",icon:"icon-home"},{id:2,name:"问题数据",urls:"/index/question/questionData",icon:"icon-home"}],userOptions:[{value:1,label:"公司"},{value:2,label:"普通用户"}],startTime:(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-01 00:00:00",jsTime:(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate()+" 00:00:00",userType:"",carData:[],motoData:[],UAVData:[],intelligentDeviceData:[],DIYData:[],otherData:[],selectCarNum:0,selectMotoNum:0,selectUAVNum:0,selectIntelligentDeviceNum:0,selectDIYNum:0,selectOtherNum:0,selectAllNum:0,carProportion:null,motoProportion:null,UAVProportion:null,intelligentDeviceProportion:null,carQuestion:0,motoQuestion:0,UAVQuestion:0,intelligentDeviceQuestion:0,allQuestion:0}},components:{BreadCrumb:i.a},mounted:function(){var t=(new Date).getMonth()+1;t<10?(t="0"+t,this.startTime=(new Date).getFullYear()+"-"+t+"-01 00:00:00"):t=(new Date).getMonth()+1;var e=(new Date).getDate();e<10?(e="0"+e,this.jsTime=(new Date).getFullYear()+"-"+t+"-"+e+" 00:00:00"):e=(new Date).getDate(),console.log(this.startTime),console.log(this.jsTime),this.getAllQuestionList(),this.getQuestionList(this.startTime,this.jsTime)},methods:{getAllQuestionList:function(){var t=this,e=(new Date).getMonth()+1;e=e<10?"0"+e:(new Date).getMonth()+1;var a=(new Date).getDate();a=a<10?"0"+a:(new Date).getDate();var i={type:2,begin:"2010-01-01 00:00:00",end:(new Date).getFullYear()+" - "+e+" - "+a+" 00:00:00}"};this.HttpClient.post("/admin/analysis/diagram",i).then(function(e){console.log(e);for(var a=0;a<e.data.data.length;a++)"汽车"===e.data.data[a].folder_type?t.carQuestion=t.carQuestion+e.data.data[a].questions:"摩托"===e.data.data[a].folder_type?t.motoQuestion=t.motoQuestion+e.data.data[a].questions:"无人机"===e.data.data[a].folder_type?t.UAVQuestion=t.UAVQuestion+e.data.data[a].questions:"智能设备"===e.data.data[a].folder_type?t.intelligentDeviceQuestion=t.intelligentDeviceQuestion+e.data.data[a].questions:"DIY"===e.data.data[a].folder_type?t.DIYQuestion=t.intelligentDeviceQuestion+e.data.data[a].questions:"其他"===e.data.data[a].folder_type&&(t.otherQuestion=t.intelligentDeviceQuestion+e.data.data[a].questions),t.allQuestion=t.carQuestion+t.motoQuestion+t.UAVQuestion+t.intelligentDeviceQuestion+t.DIYQuestion+t.otherQuestion})},getQuestionList:function(t,e){var a=this;this.selectCarNum=0,this.selectMotoNum=0,this.selectUAVNum=0,this.selectIntelligentDeviceNum=0,this.selectDIYNum=0,this.selectOtherNum=0,this.selectAllNum=0,this.carProportion=null,this.motoProportion=null,this.UAVProportion=null,this.intelligentDeviceProportion=null,this.HttpClient.post("/admin/analysis/diagram",{type:2,begin:t,end:e}).then(function(t){console.log(t);for(var e=0;e<t.data.data.length;e++)"汽车"===t.data.data[e].folder_type?(a.carData.push(t.data.data[e].questions),a.selectCarNum=a.selectCarNum+t.data.data[e].questions):"摩托"===t.data.data[e].folder_type?(a.motoData.push(t.data.data[e].questions),a.selectMotoNum=a.selectMotoNum+t.data.data[e].questions):"无人机"===t.data.data[e].folder_type?(a.UAVData.push(t.data.data[e].questions),a.selectUAVNum=a.selectUAVNum+t.data.data[e].questions):"智能设备"===t.data.data[e].folder_type?(a.intelligentDeviceData.push(t.data.data[e].questions),a.selectIntelligentDeviceNum=a.selectIntelligentDeviceNum+t.data.data[e].questions):"DIY"===t.data.data[e].folder_type?(a.DIYData.push(t.data.data[e].questions),a.selectDIYNum=a.selectDIYNum+t.data.data[e].questions):"其他"===t.data.data[e].folder_type&&(a.otherData.push(t.data.data[e].questions),a.selectOtherNum=a.selectOtherNum+t.data.data[e].questions);a.selectAllNum=a.selectCarNum+a.selectMotoNum+a.selectUAVNum+a.selectIntelligentDeviceNum+a.selectDIYNum+a.selectOtherNum,console.log(a.selectAllNum,a.selectCarNum,a.selectMotoNum,a.selectUAVNum,a.selectIntelligentDeviceNum,a.selectDIYNum,a.selectOtherNum),0===a.selectAllNum?(a.carProportion=0,a.motoProportion=0,a.UAVProportion=0,a.intelligentDeviceProportion=0):(console.log("；绒更好看几个款"),a.carProportion=(a.selectCarNum/a.selectAllNum*100).toFixed(2),a.motoProportion=(a.selectMotoNum/a.selectAllNum*100).toFixed(2),a.UAVProportion=(a.selectUAVNum/a.selectAllNum*100).toFixed(2),a.intelligentDeviceProportion=(a.selectIntelligentDeviceNum/a.selectAllNum*100).toFixed(2),console.log(a.selectAllNum,a.carProportion,a.motoProportion,a.UAVProportion,a.intelligentDeviceProportion),a.drawLine(),console.log(a.carData,a.motoData,a.UAVData,a.intelligentDeviceData))})},handleStartTime:function(t){if(console.log(t),t){var e=null,a=null;e=t.getMonth()<10?"0"+(t.getMonth()+1):t.getMonth()+1,a=t.getDate()<10?"0"+t.getDate():t.getDate(),this.startTime=t.getFullYear()+"-"+e+"-"+a+" 00:00:00",console.log(this.startTime,this.jsTime),this.getQuestionList(this.startTime,this.jsTime)}},handleEndTime:function(t){if(t){var e=null,a=null;e=t.getMonth()<10?"0"+(t.getMonth()+1):t.getMonth()+1,a=t.getDate()<10?"0"+t.getDate():t.getDate(),this.jsTime=t.getFullYear()+"-"+e+"-"+a+" 00:00:00",console.log(this.startTime,this.jsTime),this.getQuestionList(this.startTime,this.jsTime)}},drawLine:function(){l.a.init(document.getElementById("myChart")).setOption({tooltip:{trigger:"axis"},xAxis:{type:"category",data:["1","2","3","4","5","6","7","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30"]},yAxis:{type:"value"},series:[{itemStyle:{normal:{color:"#15bafe",lineStyle:{color:"#15bafe"}}},name:"汽车",type:"line",smooth:!0,data:this.carData},{itemStyle:{normal:{color:"#55ce63",lineStyle:{color:"#55ce63"}}},name:"摩托车",type:"line",smooth:!0,data:this.motoData},{itemStyle:{normal:{color:"#ff5858",lineStyle:{color:"#ff5858"}}},name:"无人机",type:"line",smooth:!0,data:this.UAVData},{itemStyle:{normal:{color:"#FFB82E",lineStyle:{color:"#FFB82E"}}},name:"智能设备",type:"line",smooth:!0,data:this.intelligentDeviceData}]})}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"questionData"},[a("BreadCrumb",{staticClass:"bread",attrs:{breadData:t.breadData}}),t._v(" "),a("div",{staticClass:"questionData_main"},[t._m(0),t._v(" "),a("div",{staticClass:"questionData_content"},[a("div",{staticClass:"question_table"},[a("div",{staticClass:"table_title"},[a("i",{staticClass:"iconfont icon-star"}),t._v("\n          问题总数"+t._s(t.allQuestion)+"\n        ")]),t._v(" "),a("div",{staticClass:"table_box"},[a("div",{staticClass:"table_box_list"},[a("p",[t._v("汽车")]),t._v(" "),a("p",[t._v(t._s(t.carQuestion))])]),t._v(" "),a("div",{staticClass:"table_box_list"},[a("p",[t._v("摩托车")]),t._v(" "),a("p",[t._v(t._s(t.motoQuestion))])]),t._v(" "),a("div",{staticClass:"table_box_list"},[a("p",[t._v("无人机")]),t._v(" "),a("p",[t._v(t._s(t.UAVQuestion))])]),t._v(" "),a("div",{staticClass:"table_box_list"},[a("p",[t._v("智能设备")]),t._v(" "),a("p",[t._v(t._s(t.intelligentDeviceQuestion))])])])]),t._v(" "),a("div",{staticClass:"question_chart"},[a("div",{staticClass:"conditions"},[a("div",{staticClass:"date_item"},[a("p",{staticClass:"date_label"},[t._v("开始")]),t._v(" "),a("el-date-picker",{staticClass:"date_picker_1",attrs:{type:"date",size:"mini",placeholder:"选择日期"},on:{change:function(e){t.handleStartTime(e)}},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}})],1),t._v(" "),a("div",{staticClass:"date_item"},[a("p",{staticClass:"date_label"},[t._v("截止")]),t._v(" "),a("el-date-picker",{staticClass:"date_picker_1",attrs:{type:"date",size:"mini",placeholder:"选择日期"},on:{change:function(e){t.handleEndTime(e)}},model:{value:t.jsTime,callback:function(e){t.jsTime=e},expression:"jsTime"}})],1),t._v(" "),a("el-select",{staticClass:"select_type",attrs:{size:"mini",placeholder:"全部"},model:{value:t.userType,callback:function(e){t.userType=e},expression:"userType"}},t._l(t.userOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("div",{staticClass:"shape_content"},[a("div",{staticClass:"shape_header"},[a("div",{staticClass:"shape_header_left"},[a("p",{staticClass:"left_title"},[t._v("问题数量曲线图")]),t._v(" "),a("div",{staticClass:"time_range"},[a("span",[t._v(t._s(t.startTime))]),t._v(" "),a("span",[t._v("---")]),t._v(" "),a("span",[t._v(t._s(t.jsTime))])])]),t._v(" "),a("div",{staticClass:"shape_header_right"},[a("div",{staticClass:"right_items"},[a("div",{staticClass:"point color1"}),t._v(" "),a("p",[t._v("汽车占"+t._s(t.carProportion)+"%")])]),t._v(" "),a("div",{staticClass:"right_items"},[a("div",{staticClass:"point color2"}),t._v(" "),a("p",[t._v("摩托车占"+t._s(t.motoProportion)+"%")])]),t._v(" "),a("div",{staticClass:"right_items"},[a("div",{staticClass:"point color3"}),t._v(" "),a("p",[t._v("无人机占"+t._s(t.UAVProportion)+"%")])]),t._v(" "),a("div",{staticClass:"right_items"},[a("div",{staticClass:"point color4"}),t._v(" "),a("p",[t._v("智能设备占"+t._s(t.intelligentDeviceProportion)+"%")])])])]),t._v(" "),a("div",{style:{width:"100%",height:"400px"},attrs:{id:"myChart"}})])]),t._v(" "),t._m(1)])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("p",[this._v("问题数据")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"question_pie"},[e("div",{staticClass:"question_pie_title"})])}]};var r=a("VU/8")(o,n,!1,function(t){a("RQHA")},null,null);e.default=r.exports}});