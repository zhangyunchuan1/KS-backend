webpackJsonp([183],{"67N7":function(t,i){},pg0G:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("//Fk"),o=e.n(s),n=(e("G0J2"),e("yPE/")),a=(e("PJh5"),e("AJTU")),r=e.n(a),l=e("37tQ"),c=e("GH0r");n.register("modules/imageResize",r.a),n.register("modules/imageDrop",l.a);var d=["10px","12px","14px","16px","18px","20px"],u=n.import("attributors/style/size");u.whitelist=d,n.register(u,!0);n.import("formats/font").whitelist=["SimSun","SimHei","Microsoft-YaHei","KaiTi","FangSong","Arial","Times-New-Roman","sans-serif"],n.register("modules/ImageExtend",c.a);var v=[["italic","underline","strike","bold"],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:d}],[{color:[]}],[{align:[]}],["image"]],p={name:"ProductPreview",data:function(){var t=this;return{productInfo:{},editorOption:{modules:{toolbar:{container:v,handlers:{image:function(t){t?document.querySelector("#xx input").click():this.quill.format("image",!1)}}},imageDrop:!0,imageResize:{displayStyles:{backgroundColor:"black",border:"none",color:"white"},modules:["Resize","DisplaySize","Toolbar"]},ImageExtend:{loading:!0,name:"img",size:1,action:"",response:function(t){return t.info},headers:function(t){},sizeError:function(){t.$message.error("图片大小超过限制1M")},start:function(){},end:function(){},error:function(){},success:function(){},change:function(t,i){}}}},contentUpData:{},content:""}},methods:{getProductInfo:function(){var t=this;this.HttpClient.get("/admin/marketProduct/edit",{product_id:this.$route.query.id}).then(function(i){console.log(i),200===i.data.code&&(t.productInfo=i.data.data,t.productInfo.video||(t.productInfo.video=["",""]))})},onEditorBlur:function(){},onEditorFocus:function(){},onEditorChange:function(t,i){console.log(this.content);var e,s=this.content;console.log((e=s,e=(e=(e=(e=e.replace(/<\/?[^>]*>/g,"")).replace(/[ | ]*\n/g,"\n")).replace(/\n[\s| | ]*\r/g,"\n")).replace(/ /gi,"")).length),t.quill.deleteText(i,1),this.$emit("Quescthon",this.content),console.log(this.content);var o=this.Tools.getEditorImageAndLength(this.content);this.editImageSize=o.imgArray.length,console.log(this.modifyData)},beforeContentUpload:function(t){var i=t.size/1024/1024<10,e=t.name.split(".")[1];if("jpg,png,jpeg,tiff,tif".indexOf(e)<0)return this.$message.error("图片类型只能为jpg,png,jpeg,tiff,tif"),!1;if(!i)return this.$message.error("上传图片大小不能超过 5MB!"),!1;var s=this,n=new FileReader;return n.readAsDataURL(t),new o.a(function(i,e){n.onload=function(){s.contentUpData.token=s.$getQiNiuToken({saveKey:t.name}),i(!0)}})},handleContentSuccess:function(t,i,e){console.log(t,i,e);var s=this.$refs.myQuillEditor.quill,o=s.getSelection().index;s.insertEmbed(o,"image",this.$imagePath+i.response.key),s.setSelection(o+1)}},created:function(){this.getProductInfo()}},_={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"productPreview"},[e("div",{staticClass:"productPreview_main"},[t._m(0),t._v(" "),e("div",{staticClass:"productPreview_content"},[e("div",{staticClass:"productPreview_list"},[e("div",{staticClass:"list_title"},[t._v("商品名称")]),t._v(" "),e("div",{staticClass:"list_main"},[t._v(t._s(t.productInfo.title))])]),t._v(" "),e("div",{staticClass:"productPreview_list"},[e("div",{staticClass:"list_title"},[t._v("商品编号")]),t._v(" "),e("div",{staticClass:"list_main"},[t._v(t._s(t.productInfo.asin))])]),t._v(" "),e("div",{staticClass:"productPreview_box"},[e("div",{staticClass:"productPreview_list"},[e("div",{staticClass:"list_title"},[t._v("单价")]),t._v(" "),e("div",{staticClass:"list_main"},[t._v(t._s(t.productInfo.price))])]),t._v(" "),e("div",{staticClass:"productPreview_list"},[e("div",{staticClass:"list_title"},[t._v("库存数量")]),t._v(" "),e("div",{staticClass:"list_main"},[t._v(t._s(t.productInfo.stock))])])]),t._v(" "),e("div",{staticClass:"productPreview_list"},[e("div",{staticClass:"list_title"},[t._v("轮播图")]),t._v(" "),e("div",{staticClass:"list_swiper"},[e("div",{staticClass:"list_swiper_img"},t._l(t.productInfo.show_picture,function(i,s){return e("div",{key:s},[e("img",{attrs:{src:t.Tools.handleImg(i.path),alt:""}})])}))])]),t._v(" "),e("div",{staticClass:"productPreview_list"},[e("div",{staticClass:"list_title"},[t._v("视频")]),t._v(" "),e("div",{staticClass:"list_video"},[e("video",{attrs:{controls:"",src:t.Tools.handleImg(t.productInfo.video[0].path)}})])]),t._v(" "),e("div",{staticClass:"productPreview_list richText"},[e("div",{staticClass:"list_title"},[t._v("商品详情")]),t._v(" "),e("el-upload",{staticClass:"avatar-uploader up_content",attrs:{id:"xx",action:t.$uploadPath,data:t.contentUpData,name:"file","show-file-list":!1,"on-success":t.handleContentSuccess,"before-upload":t.beforeContentUpload}}),t._v(" "),e("quill-editor",{ref:"myQuillEditor",attrs:{options:t.editorOption},on:{blur:function(i){t.onEditorBlur(i)},focus:function(i){t.onEditorFocus(i)},change:function(i){t.onEditorChange(i,5e3)}},model:{value:t.productInfo.description,callback:function(i){t.$set(t.productInfo,"description",i)},expression:"productInfo.description"}})],1),t._v(" "),e("div",{staticClass:"productPreview_list"},[e("div",{staticClass:"list_title"},[t._v("附件")]),t._v(" "),e("div",{staticClass:"list_upload"},t._l(t.productInfo.attachment,function(i,s){return e("p",{key:s},[e("a",{attrs:{href:t.Tools.handleImg(i.path)+"?attname="}},[e("i",{staticClass:"iconfont icon-wenjian"}),t._v(t._s(i.name)),e("i",{staticClass:"xiaz el-icon-download"})])])}))])]),t._v(" "),e("div",{staticClass:"cloneProductPreview_box"},[e("el-button",{staticClass:"cloneProductPreview",attrs:{type:"primary"},on:{click:function(i){t.$router.go(-1)}}},[t._v("返回")])],1)])])},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"title"},[i("p",[this._v("商品预览")])])}]};var f=e("VU/8")(p,_,!1,function(t){e("67N7")},null,null);i.default=f.exports}});