webpackJsonp([55],{E1Jf:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l={name:"HeaderMessagePrompt",components:{BreadCrumb:a("ZPfm").a},data:function(){return{breadData:[{id:1,name:"用户行为分析",urls:"/index/data-gather",icon:"icon-home"},{id:2,name:"头部消息提示",urls:"/index/dataGather/header-message-prompt",icon:"icon-home"}],approveDialog:!1,delateDialog:!1,contentHeader:null,searchObj:{},SellerName:null,productName:null,tableData:null,typeList:[],flag:null,total:null,currentPage:1,Id:null}},mounted:function(){this.getTipsList()},methods:{getTipsList:function(){var t=this;this.HttpClient.post("/admin/behavior/headerSms",{date_start:this.searchObj.startTime,date_end:this.searchObj.endTime,size:25,page:this.currentPage}).then(function(e){console.log(e),t.tableData=e.data.data.data,t.total=e.data.data.total})},handleChangeFlag:function(t){console.log(t),this.Id=t.message_id,this.flag=t.flag,this.approveDialog=!0},handleSureChange:function(){var t=this;0===this.flag?this.HttpClient.post("/admin/behavior/headerSmsChange",{message_id:this.Id,flag:1}).then(function(e){console.log(e),200===e.data.code&&(t.$message.success(e.data.msg),setTimeout(function(){t.getTipsList(),t.approveDialog=!1},500))}):1===this.flag&&this.HttpClient.post("/admin/behavior/headerSmsChange",{message_id:this.Id,flag:0}).then(function(e){console.log(e),200===e.data.code&&(t.$message.success(e.data.msg),setTimeout(function(){t.getTipsList(),t.approveDialog=!1},500))})},handleDelete:function(t){console.log(t),this.Id=t.message_id,this.delateDialog=!0},handleSureDelete:function(){var t=this;this.HttpClient.post("/admin/behavior/headerSmsDel",{message_id:this.Id}).then(function(e){console.log(e),200===e.data.code&&(t.$message.success(e.data.msg),t.getTipsList(),t.delateDialog=!1)})},handleEndTime:function(){console.log(this.searchObj.endTime),this.getTipsList()},handleStartTime:function(t){console.log(this.searchObj.startTime),this.getTipsList()},currentChange:function(t){this.currentPage=t,this.getTipsList()},filterSecondary:function(t,e,a){return e[a.property]===t}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"HeaderMessagePrompt"},[a("BreadCrumb",{staticClass:"bread",attrs:{breadData:t.breadData}}),t._v(" "),a("div",{staticClass:"productReview_main"},[t._m(0),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"content_main"},[a("div",{staticClass:"content_search"},[a("div",{staticClass:"encyclopedia_search"},[a("div",{staticClass:"content_select"},[a("div",{staticClass:"date_item"},[a("p",{staticClass:"date_label"},[t._v("开始")]),t._v(" "),a("el-date-picker",{staticClass:"date_picker_1",attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",size:"mini",clearable:"",placeholder:"选择日期"},on:{change:function(e){t.handleStartTime(e)}},model:{value:t.searchObj.startTime,callback:function(e){t.$set(t.searchObj,"startTime",e)},expression:"searchObj.startTime"}})],1),t._v(" "),a("div",{staticClass:"date_item"},[a("p",{staticClass:"date_label"},[t._v("截止")]),t._v(" "),a("el-date-picker",{staticClass:"date_picker_1",attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",size:"mini",clearable:"",placeholder:"选择日期"},on:{change:function(e){t.handleEndTime(e)}},model:{value:t.searchObj.endTime,callback:function(e){t.$set(t.searchObj,"endTime",e)},expression:"searchObj.endTime"}})],1)])])]),t._v(" "),a("div",{staticClass:"content_table"},[a("el-table",{attrs:{data:t.tableData,border:!0}},[a("el-table-column",{attrs:{label:"昵称",align:"center","show-overflow-tooltip":"",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.nickname||"无"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"用户类型",align:"center",width:"160",filters:[{text:"普通用户",value:1},{text:"专业商家 ",value:2},{text:"普通商家",value:3}],"filter-method":t.filterSecondary,"show-overflow-tooltip":"",prop:"user_type"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.user_type?a("span",[t._v("普通用户")]):t._e(),t._v(" "),2===e.row.user_type?a("span",[t._v("专业商家")]):t._e(),t._v(" "),3===e.row.user_type?a("span",[t._v("普通商家")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"消息类别",align:"center",width:"160",filters:[{text:"注册",value:1},{text:"订单 ",value:2},{text:"修改密码 ",value:3},{text:"配送 ",value:4},{text:"点赞 ",value:5},{text:"收入 ",value:6},{text:"退款 ",value:7}],"filter-method":t.filterSecondary,"show-overflow-tooltip":"",prop:"category"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.category?a("span",[t._v("注册")]):t._e(),t._v(" "),2===e.row.category?a("span",[t._v("订单")]):t._e(),t._v(" "),3===e.row.category?a("span",[t._v("修改密码")]):t._e(),t._v(" "),4===e.row.category?a("span",[t._v("配送")]):t._e(),t._v(" "),5===e.row.category?a("span",[t._v("点赞")]):t._e(),t._v(" "),6===e.row.category?a("span",[t._v("收入")]):t._e(),t._v(" "),7===e.row.category?a("span",[t._v("退款")]):a("span",[t._v("无")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"消息子类别","show-overflow-tooltip":"",align:"center",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.content.action||"无"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"消息内容",align:"center",width:"300","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.content.info||"无"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"颜色",align:"center","show-overflow-tooltip":"",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.content.color||"无"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态",align:"center","show-overflow-tooltip":"",width:"120",filters:[{text:"未读",value:0},{text:"已读",value:1}],"filter-method":t.filterSecondary,prop:"flag"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.flag?a("span",[t._v("未读")]):t._e(),t._v(" "),1===e.row.flag?a("span",[t._v("已读")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"发送时间排列",align:"center","show-overflow-tooltip":"",width:"180",prop:"created_at"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"mallReview_scope"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"mallReview_btm"},[0===e.row.flag?a("el-button",{on:{click:function(a){t.handleChangeFlag(e.row)}}},[t._v("已读")]):t._e(),t._v(" "),1===e.row.flag?a("el-button",{on:{click:function(a){t.handleChangeFlag(e.row)}}},[t._v("未读")]):t._e(),t._v(" "),a("el-button",{on:{click:function(a){t.handleDelete(e.row)}}},[t._v("删除")])],1)]}}])})],1),t._v(" "),t.total?a("el-pagination",{attrs:{layout:"prev, pager, next",total:t.total,"page-size":25},on:{"current-change":t.currentChange}}):t._e()],1)])])]),t._v(" "),a("el-dialog",{attrs:{visible:t.approveDialog,width:"400px","custom-class":"approveDialog"},on:{"update:visible":function(e){t.approveDialog=e}}},[a("span",{staticClass:"approveDialog_title",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"iconfont icon-icon-test"}),t._v("更改\n    ")]),t._v(" "),a("div",{staticClass:"approveDialog_main"},[a("div",{staticClass:"main_content"},[a("i",{staticClass:"iconfont icon-warning-circle"}),t._v(" "),0===t.flag?a("div",[t._v("确定更改为已读吗？")]):t._e(),t._v(" "),1===t.flag?a("div",[t._v("确定更改为未读吗？")]):t._e()])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.approveDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handleSureChange}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{visible:t.delateDialog,width:"400px","custom-class":"approveDialog"},on:{"update:visible":function(e){t.delateDialog=e}}},[a("span",{staticClass:"approveDialog_title",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"iconfont icon-icon-test"}),t._v("删除\n    ")]),t._v(" "),a("div",{staticClass:"approveDialog_main"},[a("div",{staticClass:"main_content"},[a("i",{staticClass:"iconfont icon-warning-circle"}),t._v(" "),a("div",[t._v("确定删除此消息吗？")])])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.delateDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handleSureDelete}},[t._v("确 定")])],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("p",[this._v("头部消息提示")])])}]};var o=a("VU/8")(l,s,!1,function(t){a("KUL/")},null,null);e.default=o.exports},"KUL/":function(t,e){}});