webpackJsonp([97],{IQzT:function(t,e){},Iwii:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Xxa5"),i=a.n(s),n=a("exGp"),r=a.n(n),l=a("ZPfm"),o=new(a("GKmE").a),c={name:"ArrivalOrder",components:{BreadCrumb:l.a},data:function(){return{breadData:[{id:1,name:"商城",urls:"/index/mall/mall/Mall",icon:"icon-home"},{id:2,name:"商城订单",urls:"/index/mallOrder/MallOrder",icon:"icon-home"},{id:3,name:"到货订单",urls:"/index/mallOrder/ArrivalOrder",icon:"icon-home"}],commodityNameSearch:"",total:0,pageSize:25,currentPage:1,tableData:[],refundReasonDialog:!1,order_ID:null,balance:0,order_status:null,refundTextarea:"",refundMoney:"",innerVisible:!1,logisticsDialog:!1,orderDetailsDialog:!1,RemarksDialog:!1,RemarksTextarea:"",searchObj:{},modifyObj:{},remarkStr:"",remarkList:[],detailObj:{},expressObj:{},cityList:[],buyerRemarkVisible:!1,buyerRemarkStr:""}},created:function(){this.getTableList(null),this.getCityList()},methods:{buyerRemarks:function(t){var e=this;this.HttpClient.post("/admin/marketOrder/orderLog",{order_id:t}).then(function(t){console.log(t),200===t.data.code?(e.buyerRemarkVisible=!0,e.buyerRemarkStr=t.data.data.content):e.$message.warning(t.data.msg)})},getCityList:function(){var t=this;return r()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.HttpClient.get("/city/getAllCities");case 2:a=e.sent,t.cityList=d(a.data.data);case 4:case"end":return e.stop()}},e,t)}))()},getTableList:function(t){var e=this;return r()(i.a.mark(function a(){var s,n;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(t),s={page:e.currentPage},t&&(s.start_time=t.startTime,s.end_time=t.endTime,s.order_id=t.orderSearch,s.company_name=t.merchantNameSearch,s.title=t.commodityNameSearch,s.city_id=t.city?t.city[1]:""),a.next=5,e.HttpClient.post("/admin/marketOrder/receiveOrder",s);case 5:n=a.sent,console.log(n.data.data),e.tableData=n.data.data.data,e.total=n.data.data.total;case 9:case"end":return a.stop()}},a,e)}))()},remark:function(){var t=this;return r()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.HttpClient.post("/admin/remarkLog/create",{content:t.remarkStr,source_id:t.modifyObj.order_id});case 2:a=e.sent,o.getApiMessage(a),"200"==a.data.code&&(t.RemarksDialog=!1,t.search());case 5:case"end":return e.stop()}},e,t)}))()},remarkModal:function(t){var e=this;return r()(i.a.mark(function a(){var s;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.RemarksDialog=!0,e.modifyObj=t,e.remarkStr="",a.next=5,e.HttpClient.post("/admin/remarkLog/lists",{source_id:e.modifyObj.order_id});case 5:s=a.sent,e.remarkList=s.data.data;case 7:case"end":return a.stop()}},a,e)}))()},orderDetailModal:function(t){var e=this;return r()(i.a.mark(function a(){var s;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.modifyObj=t,e.orderDetailsDialog=!0,e.detailTable=[],a.next=5,e.HttpClient.post("/admin/marketOrder/detail",{id:e.modifyObj.id});case 5:200==(s=a.sent).data.code&&(e.detailObj=s.data.data);case 7:case"end":return a.stop()}},a,e)}))()},checkExpressModal:function(t){var e=this;return r()(i.a.mark(function a(){var s;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.modifyObj=t,e.logisticsDialog=!0,a.next=4,e.HttpClient.post("/web/user/getLogisticsInfo",{logisticcode:e.modifyObj.logistics_no});case 4:200==(s=a.sent).data.code&&(e.expressObj=s.data.data);case 6:case"end":return a.stop()}},a,e)}))()},refundModal:function(t){this.refundReasonDialog=!0,this.balance=t.sale_balance,this.order_status=t.status,this.order_ID=t.order_id},handleSurerefuse:function(){var t=this;this.HttpClient.post("/refund/admin",{order_id:this.order_ID,price:this.refundMoney,reason:this.refundTextarea,type:1}).then(function(e){console.log(e),200===e.data.code?(t.$message.success(e.data.msg),setTimeout(function(){t.getTableList(t.searchObj),t.refundReasonDialog=!1,t.innerVisible=!1,t.refundMoney=0,t.refundTextarea=""},1e3)):t.$message.warning(e.data.msg)})},search:function(){this.getTableList(this.searchObj)},currentChange:function(t){var e=this;return r()(i.a.mark(function a(){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.currentPage=t,e.search();case 2:case"end":return a.stop()}},a,e)}))()}}};function d(t){if(t&&t.length>0)for(var e in t)t[e].value=t[e].id,t[e].label=t[e].name,t[e].child&&t[e].child.length>0&&(t[e].children=d(t[e].child));return t}var v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"arrivalOrder"},[a("BreadCrumb",{staticClass:"bread",attrs:{breadData:t.breadData}}),t._v(" "),a("div",{staticClass:"arrivalOrder_main"},[t._m(0),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"content_header"},[a("div",{staticClass:"content_select"},[a("div",{staticClass:"date_item"},[a("p",{staticClass:"date_label"},[t._v("开始")]),t._v(" "),a("el-date-picker",{staticClass:"date_picker_1",attrs:{type:"date",size:"mini",clearable:"",placeholder:"选择日期"},model:{value:t.searchObj.startTime,callback:function(e){t.$set(t.searchObj,"startTime",e)},expression:"searchObj.startTime"}})],1),t._v(" "),a("div",{staticClass:"date_item"},[a("p",{staticClass:"date_label"},[t._v("截止")]),t._v(" "),a("el-date-picker",{staticClass:"date_picker_1",attrs:{type:"date",size:"mini",clearable:"",placeholder:"选择日期"},on:{change:t.search},model:{value:t.searchObj.endTime,callback:function(e){t.$set(t.searchObj,"endTime",e)},expression:"searchObj.endTime"}})],1)]),t._v(" "),a("div",{staticClass:"content_search"},[a("div",[a("el-cascader",{attrs:{clearable:"",options:t.cityList},on:{change:t.search},model:{value:t.searchObj.city,callback:function(e){t.$set(t.searchObj,"city",e)},expression:"searchObj.city"}})],1),t._v(" "),a("div",[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"订单ID",clearable:""},on:{change:t.search},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.search(e):null}},model:{value:t.searchObj.orderSearch,callback:function(e){t.$set(t.searchObj,"orderSearch",e)},expression:"searchObj.orderSearch"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.search},slot:"append"})],1)],1),t._v(" "),a("div",[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"商家名称",clearable:""},on:{change:t.search},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.search(e):null}},model:{value:t.searchObj.merchantNameSearch,callback:function(e){t.$set(t.searchObj,"merchantNameSearch",e)},expression:"searchObj.merchantNameSearch"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.search},slot:"append"})],1)],1),t._v(" "),a("div",[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"商品名称",clearable:""},on:{change:t.search},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.search(e):null}},model:{value:t.searchObj.commodityNameSearch,callback:function(e){t.$set(t.searchObj,"commodityNameSearch",e)},expression:"searchObj.commodityNameSearch"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.search},slot:"append"})],1)],1)])]),t._v(" "),a("div",{staticClass:"content_main"},[a("div",{staticClass:"content_table",staticStyle:{width:"100%"}},[a("el-table",{attrs:{data:t.tableData,border:!0}},[a("el-table-column",{attrs:{label:"订单ID",align:"center",width:"150",prop:"order_no","show-overflow-tooltip":"",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"商品名称",align:"center",width:"150","show-overflow-tooltip":"",prop:"title"}}),t._v(" "),a("el-table-column",{attrs:{label:"商家名称",align:"center",width:"150","show-overflow-tooltip":"",prop:"company_name"}}),t._v(" "),a("el-table-column",{attrs:{label:"订单时间",align:"center","show-overflow-tooltip":"",width:"180",prop:"created_at",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"目的城市",align:"center","show-overflow-tooltip":"",width:"100",prop:"city_name"}}),t._v(" "),a("el-table-column",{attrs:{label:"确认到货时间",align:"center","show-overflow-tooltip":"",width:"180",prop:"delivery_time",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.delivery_time?a("span",[t._v("\n                    "+t._s(e.row.delivery_time)+"\n                  ")]):a("span",{staticClass:"sortout_color"},[t._v("\n                    无\n                  ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"快递到达时间",align:"center",width:"180","show-overflow-tooltip":"",prop:"take_delivery_time",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.take_delivery_time?a("span",[t._v("\n                    "+t._s(e.row.take_delivery_time)+"\n                  ")]):a("span",{staticClass:"sortout_color"},[t._v("\n                    无\n                  ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"200",align:"center",fixed:"right","class-name":"mallReview_scope"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){t.refundModal(e.row)}}},[t._v("退款")]),t._v(" "),a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){t.checkExpressModal(e.row)}}},[t._v("查看物流")]),t._v(" "),a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){t.orderDetailModal(e.row)}}},[t._v("订单详情")]),t._v(" "),a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){t.remarkModal(e.row)}}},[t._v("备注")]),t._v(" "),a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){t.buyerRemarks(e.row.order_id)}}},[t._v("买家备注")])]}}])})],1),t._v(" "),a("div",{staticClass:"fenye"},[t.total?a("el-pagination",{attrs:{layout:"prev, pager, next",total:t.total,"page-size":t.pageSize},on:{"current-change":t.currentChange}}):t._e()],1)],1)])])]),t._v(" "),a("el-dialog",{attrs:{visible:t.refundReasonDialog,width:"470px","custom-class":"refundReasonDialog"},on:{"update:visible":function(e){t.refundReasonDialog=e}}},[a("span",{staticClass:"refundReasonDialog_title",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"iconfont icon-refund"}),t._v("退款")]),t._v(" "),a("div",{staticClass:"refundReasonDialog_main"},[a("div",{staticClass:"main_content"},[a("div",{staticClass:"content_list"},[a("div",{staticClass:"title"},[t._v("订单状态：")]),t._v(" "),a("div",{staticClass:"list_box"},[t._v(t._s(t.order_status))])]),t._v(" "),a("div",{staticClass:"content_list"},[a("div",{staticClass:"title"},[t._v("卖家余额：")]),t._v(" "),a("div",{staticClass:"list_box"},[t._v(t._s(t.balance))])]),t._v(" "),a("div",{staticClass:"content_list"},[a("div",{staticClass:"title"},[t._v("退款理由：")]),t._v(" "),a("el-input",{attrs:{type:"textarea",placeholder:"请输入退款理由...",rows:4,resize:"none"},model:{value:t.refundTextarea,callback:function(e){t.refundTextarea=e},expression:"refundTextarea"}})],1),t._v(" "),a("div",{staticClass:"content_list"},[a("div",{staticClass:"title"},[t._v("退款金额：")]),t._v(" "),a("el-input",{model:{value:t.refundMoney,callback:function(e){t.refundMoney=e},expression:"refundMoney"}})],1)])]),t._v(" "),a("el-dialog",{attrs:{width:"300px",visible:t.innerVisible,"append-to-body":""},on:{"update:visible":function(e){t.innerVisible=e}}},[a("div",{staticClass:"inner_box"},[a("i",{staticClass:"iconfont icon-warning-circle"}),t._v(" "),a("div",[t._v("确认给用户退款吗？")])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.innerVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handleSurerefuse}},[t._v("确 定")])],1)]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.refundReasonDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.innerVisible=!0}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.logisticsDialog,width:"500px","custom-class":"logisticsDialog"},on:{"update:visible":function(e){t.logisticsDialog=e}}},[a("span",{staticClass:"logisticsDialog_title",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"iconfont icon-wuliuxinxi"}),t._v("物流信息")]),t._v(" "),a("div",{staticClass:"logisticsDialog_main"},[a("div",{staticClass:"title"},[t._v("物流公司："),a("p",[t._v(t._s(t.expressObj.ShipperCode))])]),t._v(" "),a("div",{staticClass:"title"},[t._v("物流编号："),a("p",[t._v(t._s(t.expressObj.LogisticCode))])]),t._v(" "),a("div",{staticClass:"main_content"},t._l(t.expressObj.Traces,function(e){return a("div",{key:e,staticClass:"logisticsList"},[a("p",[t._v(t._s(e.AcceptStation))]),t._v(" "),a("span",[t._v(t._s(e.AcceptTime))])])}))]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.logisticsDialog=!1}}},[t._v("关 闭")])],1)]),t._v(" "),a("el-dialog",{attrs:{visible:t.orderDetailsDialog,width:"470px","custom-class":"orderDetailsDialog"},on:{"update:visible":function(e){t.orderDetailsDialog=e}}},[a("span",{staticClass:"orderDetailsDialog_title",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"iconfont icon-wenjian"}),t._v("订单详情")]),t._v(" "),a("div",{staticClass:"orderDetailsDialog_main"},[a("div",{staticClass:"main_content"},[a("div",{staticClass:"content_list"},[a("div",{staticClass:"content_title"},[t._v("商品ID：")]),t._v(" "),a("div",{staticClass:"content_box"},[a("p",[t._v(t._s(t.detailObj.id))]),t._v(" "),a("div",{staticClass:"content_table"},[a("div",{staticClass:"table_list"},[a("p",[t._v("数量")]),t._v(" "),a("span",[t._v(t._s(t.detailObj.quantity))])]),t._v(" "),a("div",{staticClass:"table_list"},[a("p",[t._v("单价")]),t._v(" "),a("span",[t._v(t._s(t.detailObj.price))])]),t._v(" "),a("div",{staticClass:"table_list"},[a("p",[t._v("总价")]),t._v(" "),a("span",[t._v(t._s(t.detailObj.total_price))])])])])]),t._v(" "),a("div",{staticClass:"content_list"},[a("div",{staticClass:"content_title"},[t._v("姓名：")]),t._v(" "),a("div",{staticClass:"content_box"},[a("p",[t._v(t._s(t.detailObj.conducts))])])]),t._v(" "),a("div",{staticClass:"content_list"},[a("div",{staticClass:"content_title"},[t._v("电话：")]),t._v(" "),a("div",{staticClass:"content_box"},[a("p",[t._v(t._s(t.detailObj.telphone))])])]),t._v(" "),a("div",{staticClass:"content_list"},[a("div",{staticClass:"content_title"},[t._v("收货地址：")]),t._v(" "),a("div",{staticClass:"content_box"},[a("p",[t._v(t._s(t.detailObj.detail))])])])])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.orderDetailsDialog=!1}}},[t._v("关 闭")])],1)]),t._v(" "),a("el-dialog",{attrs:{visible:t.RemarksDialog,width:"470px","custom-class":"RemarksDialog"},on:{"update:visible":function(e){t.RemarksDialog=e}}},[a("span",{staticClass:"RemarksDialog_title",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"iconfont icon-edit-square"}),t._v("备注")]),t._v(" "),a("div",{staticClass:"RemarksDialog_main"},[a("div",{staticClass:"main_content"},[a("div",{staticClass:"main_content_list"},[a("div",{staticClass:"title"},[t._v("添加备注")]),t._v(" "),a("el-input",{attrs:{type:"textarea",rows:4,resize:"none"},model:{value:t.remarkStr,callback:function(e){t.remarkStr=e},expression:"remarkStr"}})],1),t._v(" "),a("div",{staticClass:"main_content_history"},[a("div",{staticClass:"title"},[t._v("历史")]),t._v(" "),a("div",{staticClass:"history_box"},t._l(t.remarkList,function(e,s){return a("div",{key:s,staticClass:"history_list"},[a("p",{staticClass:"userName"},[t._v(t._s(e.create_name)),a("span",[t._v(t._s(e.created_at))])]),t._v(" "),a("p",{staticClass:"content"},[t._v(t._s(e.content))])])}))])])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.RemarksDialog=!1}}},[t._v("关 闭")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.remark}},[t._v("提 交")])],1)]),t._v(" "),a("el-dialog",{attrs:{visible:t.buyerRemarkVisible,width:"470px","custom-class":"RemarksDialog"},on:{"update:visible":function(e){t.buyerRemarkVisible=e}}},[a("span",{staticClass:"RemarksDialog_title",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"el-icon-tickets"}),t._v("买家备注\n    ")]),t._v(" "),a("div",{staticClass:"RemarksDialog_main"},[a("div",{staticClass:"main_content"},[a("div",{staticClass:"main_content_list"},[a("div",{staticClass:"title"},[t._v("备注内容")]),t._v(" "),a("el-input",{attrs:{type:"textarea",rows:4,resize:"none",disabled:""},model:{value:t.buyerRemarkStr,callback:function(e){t.buyerRemarkStr=e},expression:"buyerRemarkStr"}})],1)])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("p",[this._v("到货订单")])])}]};var _=a("VU/8")(c,v,!1,function(t){a("IQzT")},null,null);e.default=_.exports}});