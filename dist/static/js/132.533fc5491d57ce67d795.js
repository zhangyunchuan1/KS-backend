webpackJsonp([132],{YeAy:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={name:"ClassificationPageManagement",components:{BreadCrumb:i("ZPfm").a},data:function(){return{breadData:[{id:1,name:"页面",urls:"/index/page/Page",icon:"icon-home"},{id:2,name:"页面管理",urls:"/index/page/pageManagement/PageManagement",icon:"icon-home"},{id:3,name:"百科问题分类页管理",urls:"/index/page/pageManagement/classificationPageManagement/ClassificationPageManagement",icon:"icon-home"}],typeRadio:"",plateRadio:{},firstDirectory:"",plateBox:!1,firstDirectoryBox:!1,previewBox:!1,previewBackground:"",previewText:"",modifyDialog:!1,imageUrl:"",plateList:[],firstDirectoryList:[],catalogTitle:"",imgUrl:"",imageName:"",currentObj:{}}},methods:{handleModify:function(){this.modifyDialog=!0},handleSave:function(){var t=this;console.log(this.previewText,this.imgUrl);var e=[];this.imageName?e.push({name:this.imageName,path:this.imgUrl}):e.push({name:"imgname",path:this.imageUrl});var i={menu_type:2,type:this.typeRadio,name:this.currentObj.name,description:this.previewText,id:this.currentObj.id,pid:this.currentObj.pid,images:e};console.log(i),this.HttpClient.post("/admin/menu/edit",i).then(function(e){console.log(e),200===e.data.code&&(t.$message.success(e.data.msg),t.imageUrl=t.imgUrl,t.plateBox=!1,t.firstDirectoryBox=!1,t.previewBox=!1,t.typeRadio="",setTimeout(function(){t.getList(t.typeRadio),t.modifyDialog=!1},500))})},getList:function(t){var e=this;this.HttpClient.post("/admin/menu/getList",{menu_type:2,type:t}).then(function(t){console.log(t),e.plateList=t.data.data,console.log(e.plateList)})},handleChangeCategory:function(){console.log(this.typeRadio),this.getList(this.typeRadio),this.plateBox=!0,this.firstDirectoryBox=!1,this.previewBox=!1},handleChangePlate:function(){console.log(this.plateRadio),this.firstDirectory=null,this.firstDirectoryList=this.plateRadio.child,this.firstDirectoryBox=!0,this.previewBox=!1},handleChangeFirstDirectory:function(){this.previewBox=!0,this.imageUrl="",console.log(this.firstDirectory,this.firstDirectoryList,this.plateList),this.currentObj=this.firstDirectory,this.previewBackground=this.firstDirectory.back_images,this.imageUrl=this.Tools.handleImg(this.firstDirectory.images),console.log(this.firstDirectory),console.log(this.imageUrl),this.catalogTitle=this.firstDirectory.name,this.previewText=this.firstDirectory.description},handleAvatarSuccess:function(t,e){},beforeAvatarUpload:function(t){var e=this;console.log(t.type);var i="image/jpeg"===t.type,a=t.size/1024/1024<=2;i?a?this.HttpClient.form("/admin/uploadOneImage",{images:t}).then(function(i){console.log(i),200===i.data.code&&(e.$message.success(i.data.msg),e.imgUrl=i.data.path,e.imageName=t.name,e.imageUrl=i.data.path)}):this.$message.error("上传图片大小不能超过 2MB!"):this.$message.error("上传图片只能是 JPG 格式!")}}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"classificationPageManagement"},[i("BreadCrumb",{staticClass:"bread",attrs:{breadData:t.breadData}}),t._v(" "),i("div",{staticClass:"classificationPageManagement_main"},[t._m(0),t._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"content_header"},[i("div",{staticClass:"header_list"},[i("p",[t._v("类别选择")]),t._v(" "),i("el-radio-group",{on:{change:t.handleChangeCategory},model:{value:t.typeRadio,callback:function(e){t.typeRadio=e},expression:"typeRadio"}},[i("el-radio",{attrs:{border:"",label:2}},[t._v("问题")]),t._v(" "),i("el-radio",{attrs:{border:"",label:1}},[t._v("百科")])],1)],1),t._v(" "),i("transition",{attrs:{name:"el-fade-in-linear"}},[t.plateBox?i("div",{staticClass:"header_list"},[i("p",[t._v("板块选择")]),t._v(" "),i("el-radio-group",{on:{change:t.handleChangePlate},model:{value:t.plateRadio,callback:function(e){t.plateRadio=e},expression:"plateRadio"}},t._l(t.plateList,function(e,a){return i("el-radio",{key:a,attrs:{border:"",label:e}},[t._v(t._s(e.name))])}))],1):t._e()]),t._v(" "),i("transition",{attrs:{name:"el-fade-in-linear"}},[t.firstDirectoryBox?i("div",{staticClass:"header_list"},[i("p",[t._v("一级目录")]),t._v(" "),i("el-radio-group",{on:{change:t.handleChangeFirstDirectory},model:{value:t.firstDirectory,callback:function(e){t.firstDirectory=e},expression:"firstDirectory"}},t._l(t.firstDirectoryList,function(e,a){return i("el-radio",{key:a,attrs:{border:"",label:e}},[t._v(t._s(e.name))])}))],1):t._e()])],1),t._v(" "),i("transition",{attrs:{name:"el-fade-in-linear"}},[t.previewBox?i("div",{staticClass:"content_main"},[i("div",{staticClass:"main_preview"},[i("img",{attrs:{src:t.imageUrl,alt:""}}),t._v(" "),i("h3",[t._v(t._s(t.catalogTitle))]),t._v(" "),i("span"),t._v(" "),i("p",[t._v(t._s(t.previewText))])]),t._v(" "),i("div",{staticClass:"modifyBtm"},[i("el-button",{attrs:{type:"primary"},on:{click:t.handleModify}},[t._v("修改")])],1)]):t._e()])],1)]),t._v(" "),i("el-dialog",{attrs:{width:"500px","custom-class":"modifyDialog",visible:t.modifyDialog},on:{"update:visible":function(e){t.modifyDialog=e}}},[i("span",{staticClass:"modifyDialog_title",attrs:{slot:"title"},slot:"title"},[i("i",{staticClass:"iconfont icon-edit-square"}),t._v("修改")]),t._v(" "),i("div",{staticClass:"modifyDialog_box"},[i("div",{staticClass:"box_list"},[i("p",[t._v("板块描述：")]),t._v(" "),i("el-input",{attrs:{type:"textarea",rows:5,resize:"none"},model:{value:t.previewText,callback:function(e){t.previewText=e},expression:"previewText"}})],1),t._v(" "),i("div",{staticClass:"box_list"},[i("p",[t._v("板块图片：")]),t._v(" "),i("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://test.kslab.com/api/article/null","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?i("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.modifyDialog=!1}}},[t._v("关 闭")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.handleSave}},[t._v("保 存")])],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("p",[this._v("百科问题分类页管理")])])}]};var o=i("VU/8")(a,s,!1,function(t){i("wYQM")},null,null);e.default=o.exports},wYQM:function(t,e){}});