webpackJsonp([42],{FMwW:function(a,t){},iyNg:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=e("gRE1"),o=e.n(i),s={name:"PageUploadmarket",components:{BreadCrumb:e("ZPfm").a},data:function(){return{breadData:[{id:1,name:"页面",urls:"/index/page/Page",icon:"icon-home"},{id:2,name:"页面管理",urls:"/index/page/pageManagement/PageManagement",icon:"icon-home"},{id:3,name:"上传菜单",urls:"/index/page/pageManagement/uploadMenu/UploadMenu",icon:"icon-home"},{id:4,name:"上传淘货",urls:"/index/page/pageManagement/uploadMenu/PageUploadmarket",icon:"icon-home"}],listData:[],addplateImg:[],addImageUrl:"",plateImg:"",plateName:"",plateColor:"",plateID:"",plateIcon:"",plateData:{},addInfoName:"",addInfocnName:"",iconData:[{value:"选项1",label:"icon-yonghuguanli"},{value:"选项2",label:"icon-xiajia"}],iconValue:"",isshowaddIcon:!1,addiconValue:"",addmodifyDialog:!1,modifyDialog:!1}},mounted:function(){this.getlistData()},methods:{sureAddIconFn:function(){var a=this;this.HttpClient.post("/admin/menuIcon/create",{icon:this.addiconValue}).then(function(t){200===t.data.code&&(a.$message.success(t.data.msg),a.isshowaddIcon=!1,setTimeout(function(){a.geticonData()},500))})},addIconFn:function(){this.isshowaddIcon=!0},changecnName:function(){/^[\u4e00-\u9fa5]+$/.test(this.addInfocnName)||(console.log(/^[\u4e00-\u9fa5]+$/.test(this.addInfocnName)),this.$message.warning("只允许输入英文！"),this.addInfocnName="")},getlistData:function(){var a=this;this.HttpClient.post("/admin/menu/getList",{menu_type:2,type:5}).then(function(t){200===t.data.code&&(a.listData=o()(t.data.data),console.log(a.listData))})},handleAvatarSuccess:function(a,t){this.imageUrl=URL.createObjectURL(t.raw)},modifyInfoFn:function(a){console.log(a),this.plateData=a,this.plateID=a.menu_id,this.plateName=a.name,this.plateIcon=a.icon,this.plateColor=a.color,this.plateImg="http://cdn.kushualab.com/"+a.images,this.modifyDialog=!0,this.geticonData()},savemodifyInfo:function(){var a=this;if(console.log(this.plateData),console.log(this.addplateImg),0==this.addplateImg.length){var t={};t.name=this.plateData.name,t.path=this.plateImg,this.addplateImg.push(t)}this.modifyDialog=!1;var e={name:this.plateName,id:this.plateData.id,menu_type:2,color:this.plateColor,images:this.addplateImg,icon:this.plateIcon,type:5,pid:0,description:this.plateData.name};console.log(e),this.HttpClient.post("/admin/menu/edit",e).then(function(t){console.log(t.data),200==t.data.code&&(a.$message.success(t.data.msg),setTimeout(function(){a.getlistData()},500))})},beforeAvatarUpload:function(a){var t=this;console.log(a),this.HttpClient.form("/admin/uploadOneImage",{images:a}).then(function(a){200===a.data.code&&(t.$message.success(a.data.msg),t.plateImg=a.data.path)})},beforeaddAvatarUpload:function(a){var t=this;console.log(a),this.HttpClient.form("/admin/uploadOneImage",{images:a}).then(function(e){if(200===e.data.code){t.$message.success(e.data.msg);var i={};i.name=a.name,i.path=e.data.path,t.addplateImg.push(i),t.addImageUrl=e.data.path,console.log(t.addplateImg)}})},addmodifyInfoFn:function(){this.addmodifyDialog=!0,this.geticonData()},geticonData:function(){var a=this;this.HttpClient.post("/admin/menuIcon/lists").then(function(t){200===t.data.code&&(a.iconData=t.data.data,console.log(a.iconData))})},saveaddInfo:function(){var a=this,t={menu_type:2,name:this.addInfocnName,color:this.addInfoName,images:this.addplateImg,icon:this.iconValue,pid:0,type:5};this.HttpClient.post("/admin/menu/create",t).then(function(t){console.log(t.data),200==t.data.code&&(a.$message.success(t.data.msg),a.addmodifyDialog=!1,setTimeout(function(){a.getlistData()},500))})}}},n={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"PageUploadmarket"},[e("BreadCrumb",{staticClass:"bread",attrs:{breadData:a.breadData}}),a._v(" "),e("div",{staticClass:"PageUploadmarket_main"},[a._m(0),a._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"content_box"},[a._l(a.listData,function(t,i){return e("div",{key:i,staticClass:"content_list",on:{click:function(e){a.modifyInfoFn(t)}}},[e("div",{staticClass:"list_img"},[e("img",{attrs:{src:a.Tools.handleImg(t.images),alt:""}})]),a._v(" "),e("div",{staticClass:"list_icon"},[e("i",{staticClass:"iconfont",class:t.icon})]),a._v(" "),e("p",{staticClass:"list_name"},[a._v(a._s(t.name))]),a._v(" "),e("p",{staticClass:"en_name"},[a._v(a._s(t.color))])])}),a._v(" "),e("div",{staticClass:"addcontent_list",on:{click:a.addmodifyInfoFn}},[e("i",{staticClass:"el-icon-plus"})])],2)])]),a._v(" "),e("el-dialog",{attrs:{width:"300px","custom-class":"modifyDialog",visible:a.modifyDialog},on:{"update:visible":function(t){a.modifyDialog=t}}},[e("span",{staticClass:"modifyDialog_title",attrs:{slot:"title"},slot:"title"},[e("i",{staticClass:"iconfont icon-edit-square"}),a._v("修改\n    ")]),a._v(" "),e("div",{staticClass:"modifyDialog_box"},[e("div",{staticClass:"box_list"},[e("p",[a._v("修改图片")]),a._v(" "),e("el-upload",{staticClass:"plateImg-uploader",attrs:{action:"","show-file-list":!1,"on-success":a.handleAvatarSuccess,"before-upload":a.beforeAvatarUpload}},[a.plateImg?e("img",{staticClass:"plateImg",attrs:{src:a.plateImg}}):e("i",{staticClass:"el-icon-plus plateImg-uploader-icon"})]),a._v(" "),e("div",{staticStyle:{display:"flex"}},[e("el-select",{attrs:{clearable:"",placeholder:"请选择icon",width:"100%;"},model:{value:a.plateIcon,callback:function(t){a.plateIcon=t},expression:"plateIcon"}},a._l(a.iconData,function(t){return e("el-option",{key:t.icon,attrs:{label:t.icon,value:t.icon}},[e("i",{staticClass:"iconfont",class:t.icon,staticStyle:{float:"left"}}),a._v(" "),e("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[a._v(a._s(t.icon))])])})),a._v(" "),e("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:a.addIconFn}})],1),a._v(" "),e("div",{staticClass:"content-icon"},[e("i",{staticClass:"iconfont",class:a.plateIcon})])],1),a._v(" "),e("div",{staticStyle:{margin:"10px 0"}},[e("el-input",{attrs:{placeholder:"请输入颜色色号",clearable:""},model:{value:a.plateColor,callback:function(t){a.plateColor=t},expression:"plateColor"}})],1),a._v(" "),e("el-input",{attrs:{placeholder:"只能输入中文",clearable:""},model:{value:a.plateName,callback:function(t){a.plateName=t},expression:"plateName"}})],1),a._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(t){a.modifyDialog=!1}}},[a._v("关 闭")]),a._v(" "),e("el-button",{on:{click:a.savemodifyInfo}},[a._v("保 存")])],1)]),a._v(" "),e("el-dialog",{attrs:{title:"添加icon",visible:a.isshowaddIcon,width:"30%",center:""},on:{"update:visible":function(t){a.isshowaddIcon=t}}},[e("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:a.addiconValue,callback:function(t){a.addiconValue=t},expression:"addiconValue"}}),a._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(t){a.isshowaddIcon=!1}}},[a._v("取 消")]),a._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:a.sureAddIconFn}},[a._v("确 定")])],1)],1),a._v(" "),e("el-dialog",{attrs:{width:"300px","custom-class":"modifyDialog",visible:a.addmodifyDialog},on:{"update:visible":function(t){a.addmodifyDialog=t}}},[e("span",{staticClass:"modifyDialog_title",attrs:{slot:"title"},slot:"title"},[e("i",{staticClass:"iconfont icon-edit-square"}),a._v("添加新版块\n    ")]),a._v(" "),e("div",{staticClass:"modifyDialog_box"},[e("div",{staticClass:"box_list"},[e("p",[a._v("添加ICON")]),a._v(" "),e("p",{staticClass:"reminder"},[a._v("图片大小为32*32像素")]),a._v(" "),e("el-upload",{staticClass:"plateImg-uploader",attrs:{action:"","show-file-list":!1,"on-success":a.handleAvatarSuccess,"before-upload":a.beforeaddAvatarUpload}},[a.addImageUrl?e("img",{staticClass:"plateImg",attrs:{src:a.addImageUrl}}):e("i",{staticClass:"el-icon-plus plateImg-uploader-icon"})]),a._v(" "),e("div",{staticStyle:{display:"flex"}},[e("el-select",{attrs:{clearable:"",placeholder:"请选择icon",width:"100%;"},model:{value:a.iconValue,callback:function(t){a.iconValue=t},expression:"iconValue"}},a._l(a.iconData,function(t){return e("el-option",{key:t.icon,attrs:{label:t.icon,value:t.icon}},[e("i",{staticClass:"iconfont",class:t.icon,staticStyle:{float:"left"}}),a._v(" "),e("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[a._v(a._s(t.icon))])])})),a._v(" "),e("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:a.addIconFn}})],1),a._v(" "),e("div",{staticClass:"content-icon"},[e("i",{staticClass:"iconfont",class:a.iconValue})]),a._v(" "),e("div",{staticStyle:{margin:"10px 0"}},[e("el-input",{attrs:{placeholder:"请输入颜色色号",clearable:""},model:{value:a.addInfoName,callback:function(t){a.addInfoName=t},expression:"addInfoName"}})],1),a._v(" "),e("el-input",{attrs:{placeholder:"只能输入中文",clearable:""},on:{change:a.changecnName},model:{value:a.addInfocnName,callback:function(t){a.addInfocnName=t},expression:"addInfocnName"}})],1)]),a._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(t){a.addmodifyDialog=!1}}},[a._v("关 闭")]),a._v(" "),e("el-button",{on:{click:a.saveaddInfo}},[a._v("保 存")])],1)])],1)},staticRenderFns:[function(){var a=this.$createElement,t=this._self._c||a;return t("div",{staticClass:"title"},[t("p",[this._v("上传淘货")])])}]};var l=e("VU/8")(s,n,!1,function(a){e("FMwW")},null,null);t.default=l.exports}});