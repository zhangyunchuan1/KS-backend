webpackJsonp([22],{XlbR:function(e,t){},o2r6:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("Xxa5"),a=i.n(s),n=i("exGp"),l=i.n(n),o=i("ZPfm"),d=i("+jNi"),c={name:"ExternalBusinessJurisdiction",components:{BreadCrumb:o.a,DeleteModal:d.a},data:function(){return{addVisible:!1,breadData:[{id:1,name:"外部管理",urls:"/index",icon:"icon-home"},{id:2,name:"商家权限设置",urls:"/index/test",icon:"icon-home"}],checkedJurisdiction:[0,1],pages:[],radioValue:"专业商家",pageId:"",jurisdiction:[],isAdd:!0,label:"",name:"",id:""}},methods:{handleCheckedChange:function(e){console.log(e)},getPagesList:function(){var e=this;return l()(a.a.mark(function t(){var i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=2,"普通商家"===e.radioValue?i=1:"个人用户"===e.radioValue&&(i=0),t.next=4,e.HttpClient.post("/web/role/index",{type:i}).then(function(t){console.log(t),200===t.data.code&&(e.pages=t.data.data,e.pageId=e.pages[0].id,e.getPageJurisdiction())});case 4:case"end":return t.stop()}},t,e)}))()},getPageJurisdiction:function(){var e=this;console.log(this.checkboxValue),this.HttpClient.post("/web/permission/index",{role_id:this.pageId}).then(function(t){console.log(t),200===t.data.code&&(e.jurisdiction=t.data.data)})},addButton:function(){this.addVisible=!0,this.isAdd=!0},updateButton:function(e){this.addVisible=!0,this.isAdd=!1,this.label=e.label,this.name=e.name,this.id=e.id},addJurisdiction:function(){var e=this;this.isAdd?this.HttpClient.post("/web/permission/create",{name:this.name,label:this.label,role_id:this.pageId,type:2}).then(function(t){console.log(t),200===t.data.code?(e.$message.success(t.data.msg),e.addVisible=!1,e.emptyValue(),setTimeout(function(){e.getPageJurisdiction()},500)):e.$message.error(t.data.msg)}):this.HttpClient.post("/web/permission/edit",{name:this.name,label:this.label,id:this.id,type:2}).then(function(t){200===t.data.code?(e.$message.success(t.data.msg),e.addVisible=!1,e.emptyValue(),setTimeout(function(){e.getPageJurisdiction()},500)):e.$message.error(t.data.msg)})},deleteButton:function(e){this.$refs.delete.deleteDialog=!0,this.id=e},deleteJurisdiction:function(e){var t=this;e&&this.HttpClient.post("/web/permission/destroy",{id:this.id}).then(function(e){console.log(e),200===e.data.code?(t.$message.success(e.data.msg),t.emptyValue(),setTimeout(function(){t.getPageJurisdiction()},500)):t.$message.error(e.data.msg)})},cancelDialog:function(){this.addVisible=!1,this.emptyValue()},emptyValue:function(){this.label="",this.name=""}},created:function(){var e=this;return l()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getPagesList();case 2:e.pageId=e.pages[0].id,e.getPageJurisdiction();case 4:case"end":return t.stop()}},t,e)}))()}},r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"externalBusinessJurisdiction"},[i("BreadCrumb",{staticClass:"bread",attrs:{breadData:e.breadData}}),e._v(" "),i("div",{staticClass:"content"},[i("p",{staticClass:"title"},[e._v("个人中心和商家中心权限管理")]),e._v(" "),i("div",{staticClass:"add_menu"}),e._v(" "),i("div",{staticClass:"contain"},[i("p",{staticClass:"c_title"},[e._v("页面管理")]),e._v(" "),i("div",{staticClass:"c_content"},[i("div",{staticClass:"user_page_jurisdiction"},[i("div",{staticClass:"user_page_select"},[e._v("用户选择")]),e._v(" "),i("el-radio-group",{attrs:{fill:"#15bafe"},on:{change:e.getPagesList},model:{value:e.radioValue,callback:function(t){e.radioValue=t},expression:"radioValue"}},[i("el-radio-button",{attrs:{label:"专业商家",border:""}}),e._v(" "),i("el-radio-button",{attrs:{label:"普通商家",border:""}}),e._v(" "),i("el-radio-button",{attrs:{label:"个人用户",border:""}})],1)],1),e._v(" "),i("div",{staticClass:"user_page_jurisdiction"},[i("div",{staticClass:"user_page_select"},[e._v("选择页面")]),e._v(" "),i("el-radio-group",{attrs:{fill:"#15bafe"},on:{change:e.getPageJurisdiction},model:{value:e.pageId,callback:function(t){e.pageId=t},expression:"pageId"}},e._l(e.pages,function(t){return i("el-radio-button",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])}))],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.pageId,expression:"pageId"}],staticClass:"user_page_jurisdiction"},[i("div",{staticClass:"user_page_select"},[e._v("页面权限")]),e._v(" "),i("el-button",{staticClass:"user_page_select",on:{click:e.addButton}},[e._v("添加")])],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.pageId,expression:"pageId"}],staticClass:"check_group"},e._l(e.jurisdiction,function(t){return i("div",{key:t.id,staticClass:"e_check",attrs:{label:t.id},on:{dblclick:function(i){e.updateButton(t)}}},[i("p",{staticClass:"r_p1"},[e._v(e._s(t.label))]),e._v(" "),i("p",{staticClass:"r_p2"},[e._v(e._s(t.name))]),e._v(" "),i("i",{staticClass:"iconfont icon-minus-square-fill icon_delete",on:{click:function(i){e.deleteButton(t.id)}}})])}))])])]),e._v(" "),i("el-dialog",{attrs:{visible:e.addVisible,width:"400px"},on:{"update:visible":function(t){e.addVisible=t},close:e.cancelDialog}},[i("div",{staticClass:"dialog_head_title",attrs:{slot:"title"},slot:"title"},[i("i",{staticClass:"iconfont icon-edit-square examine_icon"}),e._v(" "),i("span",[e._v(e._s(e.isAdd?"添加权限":"编辑权限"))])]),e._v(" "),i("div",{staticClass:"jurisdiction_content"},[i("div",{staticClass:"jurisdiction_content_item"},[i("label",{staticClass:"el_lbl"},[e._v("名称:")]),e._v(" "),i("el-input",{staticClass:"el_input",attrs:{size:"mini"},model:{value:e.label,callback:function(t){e.label=t},expression:"label"}})],1),e._v(" "),i("div",{staticClass:"jurisdiction_content_item"},[i("label",{staticClass:"el_lbl"},[e._v("权限:")]),e._v(" "),i("el-input",{staticClass:"el_input",attrs:{size:"mini"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)]),e._v(" "),i("div",{staticClass:"user_footer",attrs:{slot:"footer"},slot:"footer"},[i("el-row",{staticClass:"row_e"},[i("el-button",{staticClass:"btn_deletes",attrs:{size:"small"},on:{click:e.cancelDialog}},[e._v("取消")]),e._v(" "),i("el-button",{staticClass:"btn_delete",attrs:{type:"primary",size:"small"},on:{click:e.addJurisdiction}},[e._v("保存")])],1)],1)]),e._v(" "),i("delete-modal",{ref:"delete",on:{doDelete:e.deleteJurisdiction}})],1)},staticRenderFns:[]};var u=i("VU/8")(c,r,!1,function(e){i("XlbR"),i("tJKE")},"data-v-6529cd74",null);t.default=u.exports},tJKE:function(e,t){}});