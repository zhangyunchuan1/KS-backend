webpackJsonp([45],{elxI:function(t,e){},tN6d:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l={name:"SearchRanking",components:{BreadCrumb:a("ZPfm").a},data:function(){return{breadData:[{id:1,name:"用户行为分析",urls:"/index/data-gather",icon:"icon-home"},{id:2,name:"搜索排行",urls:"/index/dataGather/search-ranking",icon:"icon-home"}],tableData:[],centerDialogVisible:!1,addName:"",options:[],value:"",typeOptions:[{value:"video",label:"视频"},{value:"article",label:"文章"}],typeValue:"",operate:"",operateStatus:null,centerforbidVisible:!1,centerhisDialogVisible:!1,queryName:"",equipType:[{text:"手机",value:"手机"},{text:"平板",value:"平板"},{text:"PC",value:"PC"}],equipTypeSelect:"",rowData:[],currentPage:1,pageSize:25,total:0,tablehisData:[],currentalertPage:1,pagealertSize:7,totalNum:0}},mounted:function(){this.getlistDataFn()},methods:{getlistDataFn:function(){var t=this,e={size:this.pageSize,page:this.currentPage};this.HttpClient.post("/admin/behavior/searchRank",e).then(function(e){e.data.code&&(t.tableData=e.data.data.data,t.total=e.data.data.total)})},viewHisinformationFn:function(t){this.centerhisDialogVisible=!0,this.queryName=t.keyword,this.gethislistData()},gethislistData:function(){var t=this,e={size:this.pagealertSize,page:this.currentalertPage,keyword:this.queryName,agent_type:this.equipTypeSelect};this.HttpClient.post("/admin/behavior/searchHistory",e).then(function(e){console.log(e.data),200===e.data.code&&(t.tablehisData=e.data.data.data,t.totalNum=e.data.data.total),t.equipTypeSelect=""})},getTypelist:function(){var t=this;this.HttpClient.post("/admin/menu/getList",{menu_type:2,type:0}).then(function(e){200===e.data.code&&(t.options=e.data.data)})},addTitleFn:function(t){this.centerDialogVisible=!0,this.addName=t.keyword,this.getTypelist()},sureaddnameFn:function(){var t=this,e={type:this.value,section:this.typeValue,name:this.addName};this.HttpClient.post("/admin/behavior/addTitle",e).then(function(e){200===e.data.code&&(t.$message.success(e.data.msg),t.centerDialogVisible=!1)})},forbidAndrecoverFn:function(t){this.rowData=t,this.centerforbidVisible=!0,1===t.status?(this.operate="回复",this.operateStatus=0):0===t.status&&(this.operate="禁止",this.operateStatus=1)},sureforbidFn:function(){var t=this;this.centerforbidVisible=!1;var e={keyword:this.rowData.keyword,status:this.operateStatus};this.HttpClient.post("/admin/behavior/searchStatus",e).then(function(e){200===e.data.code&&setTimeout(function(){t.getlistDataFn()},500)})},renderEquiptype:function(t,e){var a=this;e.column;return t("el-select",{props:{value:"移动端类型",placeholder:"移动端类型"},on:{input:function(t){a.equipTypeSelect=t,a.gethislistData()}}},[this.equipType.map(function(e){return t("el-option",{props:{value:e.value,label:e.text}})})])},currentChange:function(t){this.currentPage=t,this.getlistDataFn()},currentalertChange:function(t){this.currentalertPage=t,this.gethislistData()},filterHandler:function(t,e,a){return e[a.property]===t}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"searchRank"},[a("BreadCrumb",{staticClass:"bread",attrs:{breadData:t.breadData}}),t._v(" "),a("div",{staticClass:"search_box"},[t._m(0),t._v(" "),a("div",{staticClass:"search_header",staticStyle:{width:"80%"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"keyword",label:"输入内容",width:"200","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"search_num",label:"搜索次数",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"time.date",label:"最近一次搜索时间",width:"220"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"200",filters:[{text:"正常",value:1},{text:"删除",value:2},{text:"停用",value:3}],"filter-method":t.filterHandler},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(1===e.row.status?"正常":2===e.row.status?"删除":0===e.row.status?"禁止":"暂无"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){t.forbidAndrecoverFn(e.row)}}},[t._v(t._s(1===e.row.status?"禁止":"恢复 "))]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){t.viewHisinformationFn(e.row)}}},[t._v("查看历史信息")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){t.addTitleFn(e.row)}}},[t._v("添加小标题")])]}}])})],1)],1),t._v(" "),t.total?a("el-pagination",{attrs:{layout:"prev, pager, next",total:t.total,"page-size":t.pageSize},on:{"current-change":t.currentChange}}):t._e(),t._v(" "),a("div",{staticClass:"alertbox"},[a("el-dialog",{attrs:{title:"提示",visible:t.centerforbidVisible,width:"30%",center:""},on:{"update:visible":function(e){t.centerforbidVisible=e}}},[a("span",[t._v("确定要"+t._s(t.operate)+"吗？")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.centerforbidVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.sureforbidFn}},[t._v("确 定")])],1)])],1),t._v(" "),a("div",{staticClass:"alertbox"},[a("el-dialog",{attrs:{title:"添加小标题",visible:t.centerDialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.addName,callback:function(e){t.addName=e},expression:"addName"}}),t._v(" "),a("div",{staticClass:"chooseplate"},[a("div",{staticClass:"plate"},[t._v("选择板块")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return a("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})}))],1),t._v(" "),a("div",{staticClass:"chooseplate"},[a("div",{staticClass:"plate"},[t._v("选择类型")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.typeValue,callback:function(e){t.typeValue=e},expression:"typeValue"}},t._l(t.typeOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.sureaddnameFn}},[t._v("保 存")])],1)],1)],1),t._v(" "),a("div",{staticClass:"alertbox"},[a("el-dialog",{attrs:{title:"历史查询",visible:t.centerhisDialogVisible,width:"60%",center:""},on:{"update:visible":function(e){t.centerhisDialogVisible=e}}},[a("div",{staticClass:"title"},[t._v(t._s(t.queryName))]),t._v(" "),a("div",{staticClass:"histable"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tablehisData,border:""}},[a("el-table-column",{attrs:{label:"搜索时间",align:"center",width:"180",prop:"created_at",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"浏览器",align:"center",width:"100",prop:"browser_name","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.browser_name?a("span",[t._v(t._s(e.row.browser_name))]):a("span",{staticClass:"sortout_color"},[t._v("无")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"浏览器版本",align:"center",width:"100",prop:"browser_version","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.browser_version?a("span",[t._v(t._s(e.row.browser_version))]):a("span",{staticClass:"sortout_color"},[t._v("无")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"屏幕大小",align:"center",width:"120",prop:"screen_size","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.screen_size?a("span",[t._v(t._s(e.row.screen_size))]):a("span",{staticClass:"sortout_color"},[t._v("无")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"移动端类型",align:"center","render-header":t.renderEquiptype,width:"120",prop:"agent_type"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.agent_type?a("span",[t._v(t._s(e.row.agent_type))]):a("span",{staticClass:"sortout_color"},[t._v("无")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"当前页面",align:"center",width:"200",prop:"current_page","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.current_page?a("span",[t._v(t._s(e.row.current_page))]):a("span",{staticClass:"sortout_color"},[t._v("无")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"页面地址",align:"center",width:"180",prop:"current_url","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.current_url?a("span",[t._v(t._s(e.row.current_url))]):a("span",{staticClass:"sortout_color"},[t._v("无")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"昵称",align:"center",prop:"nickname","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.nickname?a("span",[t._v(t._s(e.row.nickname))]):a("span",{staticClass:"sortout_color"},[t._v("无")])]}}])})],1)],1),t._v(" "),t.totalNum?a("el-pagination",{attrs:{layout:"prev, pager, next",total:t.totalNum,"page-size":t.pagealertSize},on:{"current-change":t.currentalertChange}}):t._e()],1)],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"searchtitle"},[e("div",{staticClass:"title"},[this._v("搜索排行")])])}]};var s=a("VU/8")(l,i,!1,function(t){a("elxI")},null,null);e.default=s.exports}});