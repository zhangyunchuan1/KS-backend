webpackJsonp([64],{"7knr":function(e,t){},Cqx2:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("bOdI"),n=a.n(i),l=a("ZPfm"),s=a("+jNi"),o=(new(a("GKmE").a),{name:"MallContents",components:{BreadCrumb:l.a,DeleteModal:s.a},data:function(){var e;return e={breadData:[{id:1,name:"商城",urls:"/index/encyclopedia/encyclopedia",icon:"icon-home"},{id:2,name:"目录分配情况",urls:"/index/mall/mallProduct/mall-contents",icon:"icon-home"}],warmImg:a("GvV1"),modifyObj:{},removeVisible:!1,currentPage:1,pageSize:25,total:0,sectorSelection:null,firstLevel:null,secondary:null,thirdLevel:null,menuList:[{name:"全部",menu_id:0}],firstMenuList:[],secondMenuList:[],threeMenuList:[],muneIdObj:{muneId:"",id:0},firstMuneIdObj:{firstMuneId:"",id:0},secondMuneIdObj:{secondMuneId:"",id:0},threeMuneIdObj:{threeMuneId:"",id:0},viewFirstLevel:!1,viewSecondary:!1,viewThirdLevel:!1,tableData:[],menuID:"",searchUserName:null,searchTitle:null,searchTradeId:null,searchStartTime:null,searchEndTime:null,searchMenuId:null},n()(e,"currentPage",1),n()(e,"total",null),e},created:function(){this.getMallList(),this.getMenuList()},methods:{handleSearchTradeId:function(){this.getMallList()},handleSearchTitle:function(){this.getMallList()},handleSearchUserName:function(){this.getMallList()},handleSeachStartTime:function(e){console.log(this.searchStartTime),this.getMallList()},handleSeachEndTime:function(e){console.log(this.searchEndTime),this.getMallList()},handleChangeMenu:function(e){0===e.type?(this.firstMenuList=[],this.secondMenuList=[],this.viewSecondary=!1,this.threeMenuList=[],this.viewThirdLevel=!1):1===e.type?(this.searchMenuId=e.menu_id,this.getMallList(),this.secondMenuList=[],this.threeMenuList=[],this.viewThirdLevel=!1):2===e.type?(this.searchMenuId=e.menu_id,this.getMallList(),this.threeMenuList=[]):3===e.type&&(this.searchMenuId=e.menu_id,this.getMallList()),console.log(e),this.getNextList(e.menu_id,e.type)},getNextList:function(e,t){var a=this;this.HttpClient.post("/admin/menu/getOneChild",{menu_id:e,menu_type:3}).then(function(e){console.log(e),200===e.data.code&&(0===t?(a.firstMenuList=e.data.data.child,a.viewFirstLevel=!0):1===t?(a.secondMenuList=e.data.data.child,a.viewSecondary=!0):2===t&&(a.threeMenuList=e.data.data.child,a.viewThirdLevel=!0))})},getMenuList:function(){var e=this;this.HttpClient.post("/admin/menu/getList",{menu_type:3}).then(function(t){console.log(t),e.menuList=t.data.data})},getMallList:function(){var e=this,t={id:this.searchTradeId,nickname:this.searchUserName,title:this.searchTitle,start_time:this.searchStartTime,end_time:this.searchEndTime,menu_id:this.searchMenuId,page:this.currentPage,size:25};this.HttpClient.post("/admin/marketProduct/getListByMajorMenuId",t).then(function(t){console.log(t),e.tableData=t.data.data.data,e.total=t.data.data.total;for(var a=0;a<e.tableData.length;a++)if(e.tableData[a].menu.length>0)for(var i=0;i<t.data.data.data.length;i++)e.tableData[a].subject=t.data.data.data[a].menu[0].name,e.tableData[a].menu_1=t.data.data.data[a].menu[1].name,void 0!==t.data.data.data[a].menu[2]&&(e.tableData[a].menu_2=t.data.data.data[a].menu[2].name),void 0!==t.data.data.data[a].menu[3]&&(e.tableData[a].menu_3=t.data.data.data[a].menu[3].name);e.total=t.data.data.total})},searcha:function(e){this.searchUserName=e},searchb:function(e){this.searchTitle=e},searchc:function(e){this.searchTradeId=e},handleCurrentChange:function(e){console.log(e),this.currentPage=e,this.getMallList()},cloneContents:function(){this.viewFirstLevel=!1,this.viewSecondary=!1,this.viewThirdLevel=!1},deleteFn:function(e){console.log(e),this.menuID=e.menu_id,this.modifyObj=e,this.removeVisible=!0},handleSuerDelete:function(){var e=this,t={menu_id:this.menuID};this.HttpClient.post("/admin/menuRelationship/destroy",t).then(function(t){200===t.data.code&&(e.$message.success(t.data.msg),e.removeVisible=!1,setTimeout(function(){e.getMallList()},500))})},filterPlate:function(e,t,a){return t[a.property]===e},filterSecondary:function(e,t,a){return t[a.property]===e},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},removeModal:function(e){this.removeVisible=!0,this.modifyObj=e,console.log("modifyObj:",this.modifyObj)}}}),c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"encyclopediaContents"},[a("BreadCrumb",{staticClass:"bread",attrs:{breadData:e.breadData}}),e._v(" "),a("div",{staticClass:"encyclopedia_main"},[e._m(0),e._v(" "),a("div",{staticClass:"encyclopedia_box"},[a("div",{staticClass:"encyclopedia_header"},[a("el-radio-group",{model:{value:e.sectorSelection,callback:function(t){e.sectorSelection=t},expression:"sectorSelection"}},e._l(e.menuList,function(t,i){return a("el-radio",{key:i,attrs:{label:t},on:{change:function(a){e.handleChangeMenu(t)}}},[e._v(e._s(t.name))])}))],1),e._v(" "),a("div",{staticClass:"encyclopedia_content"},[a("el-collapse-transition",[e.viewFirstLevel?a("div",{staticClass:"encyclopedia_list"},[a("div",{staticClass:"encyclopedia_list_box"},[a("div",{staticClass:"encyclopedia_list_title"},[e._v("一级目录")]),e._v(" "),0===e.firstMenuList.length?a("span",{staticStyle:{color:"#bfbfbf","margin-left":"100px"}},[e._v("暂无目录")]):e._e(),e._v(" "),a("el-radio-group",{model:{value:e.firstLevel,callback:function(t){e.firstLevel=t},expression:"firstLevel"}},e._l(e.firstMenuList,function(t,i){return a("el-radio",{key:i,attrs:{label:t},on:{change:function(a){e.handleChangeMenu(t)}}},[e._v(e._s(t.name))])}))],1)]):e._e()]),e._v(" "),a("el-collapse-transition",[e.viewSecondary?a("div",{staticClass:"encyclopedia_list"},[a("div",{staticClass:"encyclopedia_list_box"},[a("div",{staticClass:"encyclopedia_list_title"},[e._v("二级目录")]),e._v(" "),0===e.secondMenuList.length?a("span",{staticStyle:{color:"#bfbfbf","margin-left":"100px"}},[e._v("暂无目录")]):e._e(),e._v(" "),a("el-radio-group",{model:{value:e.secondary,callback:function(t){e.secondary=t},expression:"secondary"}},e._l(e.secondMenuList,function(t){return a("el-radio",{key:t.id,attrs:{label:t},on:{change:function(a){e.handleChangeMenu(t)}}},[e._v(e._s(t.name))])}))],1)]):e._e()]),e._v(" "),a("el-collapse-transition",[e.viewThirdLevel?a("div",{staticClass:"encyclopedia_list"},[a("div",{staticClass:"encyclopedia_list_box"},[a("div",{staticClass:"encyclopedia_list_title"},[e._v("三级目录")]),e._v(" "),0===e.threeMenuList.length?a("span",{staticStyle:{color:"#bfbfbf","margin-left":"100px"}},[e._v("暂无目录")]):e._e(),e._v(" "),a("el-radio-group",{model:{value:e.thirdLevel,callback:function(t){e.thirdLevel=t},expression:"thirdLevel"}},e._l(e.threeMenuList,function(t){return a("el-radio",{key:t.id,attrs:{label:t},on:{change:function(a){e.handleChangeMenu(t)}}},[e._v(e._s(t.name))])}))],1)]):e._e()])],1)]),e._v(" "),a("div",{staticClass:"encyclopedia_table"},[a("div",{staticClass:"encyclopedia_header"},[a("div",{staticClass:"encyclopedia_left"},[a("div",{staticClass:"encyclopedia_list_num"},[e._v("\n            当前目录下总数： "+e._s(e.total)+"\n          ")]),e._v(" "),a("div",{staticClass:"encyclopedia_left_time"},[a("div",{staticClass:"date_item"},[a("p",{staticClass:"date_label"},[e._v("开始")]),e._v(" "),a("el-date-picker",{staticClass:"date_picker_1",attrs:{type:"date",placeholder:"选择日期"},on:{change:function(t){e.handleSeachStartTime(t)}},model:{value:e.searchStartTime,callback:function(t){e.searchStartTime=t},expression:"searchStartTime"}})],1),e._v(" "),a("div",{staticClass:"date_item"},[a("p",{staticClass:"date_label"},[e._v("截止")]),e._v(" "),a("el-date-picker",{staticClass:"date_picker_1",attrs:{type:"date",placeholder:"选择日期"},on:{change:function(t){e.handleSeachEndTime(t)}},model:{value:e.searchEndTime,callback:function(t){e.searchEndTime=t},expression:"searchEndTime"}})],1)])]),e._v(" "),a("div",{staticClass:"encyclopedia_search"},[a("div",[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"商家名称搜索"},on:{input:function(t){e.searcha(t)}},model:{value:e.searchUserName,callback:function(t){e.searchUserName=t},expression:"searchUserName"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleSearchUserName},slot:"append"})],1)],1),e._v(" "),a("div",[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"商品名称搜索"},on:{input:function(t){e.searchb(t)}},model:{value:e.searchTitle,callback:function(t){e.searchTitle=t},expression:"searchTitle"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleSearchTitle},slot:"append"})],1)],1),e._v(" "),a("div",[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"产品ID搜索"},on:{input:function(t){e.searchc(t)}},model:{value:e.searchTradeId,callback:function(t){e.searchTradeId=t},expression:"searchTradeId"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleSearchTradeId},slot:"append"})],1)],1)])]),e._v(" "),a("div",{staticClass:"encyclopedia_content"},[a("el-table",{attrs:{data:e.tableData,border:!0}},[a("el-table-column",{attrs:{label:"ID",align:"center",width:"65",prop:"id",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"商品名称",align:"center",width:"180","show-overflow-tooltip":"",prop:"title"}}),e._v(" "),a("el-table-column",{attrs:{label:"学科板块",align:"center",width:"100","show-overflow-tooltip":"",prop:"subject"}}),e._v(" "),a("el-table-column",{attrs:{label:"一级目录",align:"center",width:"130","show-overflow-tooltip":"",prop:"menu_1"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.menu_1||"无"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"二级目录",align:"center",width:"130","show-overflow-tooltip":"",prop:"menu_2"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.menu_2||"无"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"三级目录",align:"center",width:"130","show-overflow-tooltip":"",prop:"menu_3"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.menu_3||"无"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"产品类型",align:"center",width:"120","show-overflow-tooltip":"",prop:"thirdMenu"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.thirdMenu||"无"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商家名称",align:"center",width:"130","show-overflow-tooltip":"",prop:"nickname"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.nickname||"无"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"分配时间",align:"center",width:"160","show-overflow-tooltip":"",prop:"created_at",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"目录状态",align:"center",width:"120","show-overflow-tooltip":"",prop:"status"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.status?a("span",[e._v("正常")]):e._e(),e._v(" "),0===t.row.status?a("span",[e._v("禁用")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",fixed:"right","class-name":"encyclopedia_scope"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"encyclopedia_btm"},[a("el-button",{attrs:{size:"medium ",type:"text"},on:{click:function(a){e.deleteFn(t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{size:"medium ",type:"text"}},[e._v("预览")])],1)]}}])})],1),e._v(" "),e.total?a("el-pagination",{attrs:{layout:"prev, pager, next",total:e.total,"page-size":e.pageSize}}):e._e()],1)])]),e._v(" "),a("el-dialog",{attrs:{visible:e.removeVisible,width:"300px"},on:{"update:visible":function(t){e.removeVisible=t}}},[a("div",{staticClass:"dialog_delete_head_title",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"delete_icon"}),e._v(" "),a("span",[e._v("删除")])]),e._v(" "),a("div",[a("img",{staticClass:"boolean_delete",attrs:{src:e.warmImg}}),e._v(" "),a("p",[e._v("确定删除此商品的专业目录吗？")])]),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-row",{staticClass:"row_e"},[a("el-button",{staticClass:"btn_deletes",attrs:{size:"small"},on:{click:function(t){e.removeVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"btn_delete",attrs:{type:"primary",size:"small"},on:{click:e.handleSuerDelete}},[e._v("确 认")])],1)],1)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"encyclopedia_title"},[t("div",{staticClass:"title"},[this._v("目录分配情况")])])}]};var r=a("VU/8")(o,c,!1,function(e){a("7knr")},null,null);t.default=r.exports}});