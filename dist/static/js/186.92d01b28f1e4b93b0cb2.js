webpackJsonp([186],{AHcC:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"BusinessManagement",components:{BreadCrumb:e("ZPfm").a},data:function(){return{breadData:[{id:1,name:"商家管理",urls:"/index/businessUser/BusinessUser",icon:"icon-home"},{id:2,name:"商家账户",urls:"/index/market/businessUser/businessAccount/BusinessAccount",icon:"icon-home"},{id:3,name:"商家账号管理",urls:"/index/market/businessUser/businessAccount/BusinessManagement",icon:"icon-home"}],userNameSearch:"",companyNameSearch:"",status:"",tableData:[],modifyInformationDialog:!1,imageUrl:"",signature:"",modifyPassWord:!1,rowData:{},newPassWord:"",repetnewPassWord:"",currentPage:1,pageSize:25,total:0}},mounted:function(){this.getlistData()},methods:{getlistData:function(){var a=this,t={company_name:this.companyNameSearch,user_name:this.userNameSearch,status:1};this.HttpClient.post("/admin/business/lists",t).then(function(t){console.log(t),200==t.data.code&&(a.tableData=t.data.data.data,a.total=t.data.data.total)})},userNameSearchFn:function(){this.getlistData()},companynameSearchFn:function(){this.getlistData()},filterStatus:function(a){this.getlistData()},currentChange:function(a){this.currentPage=a,this.getlistData()},handleAvatarSuccess:function(a,t){this.imageUrl=URL.createObjectURL(t.raw)},imageUpload:function(a){var t=this;this.HttpClient.form("/admin/uploadOneImage",{images:a}).then(function(a){console.log("res is:",a),200===a.data.code&&(t.$message.success(a.data.msg),t.imageUrl=a.data.path,t.isshowoldimg=!1)})},modifybasicInfoFn:function(a){console.log(a),this.imageUrl=this.Tools.handleImg(a.avatar),this.rowData=a,this.modifyInformationDialog=!0},modifyPsdFn:function(a){this.modifyPassWord=!0,this.rowData=a},savemodifyInfoFn:function(){var a=this,t=this.imageUrl.substring(25);console.log(t);var e={uid:this.rowData.uid,avatar:t,signature:this.signature};this.HttpClient.post("/admin/business/updateAvatar",e).then(function(t){console.log(t),200===t.data.code?(a.$message.success(t.data.msg),a.modifyInformationDialog=!1,setTimeout(function(){a.getlistData(),a.signature="",a.imageUrl=""},500)):a.$message.warning(t.data.msg)})},savePassWordFn:function(){var a=this;if(this.newPassWord===this.repetnewPassWord){var t={uid:this.rowData.uid,password:this.repetnewPassWord};this.HttpClient.post("/admin/business/updatePwd",t).then(function(t){200==t.data.code?(a.$message.success(t.data.msg),a.modifyPassWord=!1):a.$message.warning(t.data.msg)})}else this.$message.warning("两次密码输入不一致")}}},i={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"businessManagement"},[e("div",{staticClass:"businessManagement"},[e("BreadCrumb",{staticClass:"bread",attrs:{breadData:a.breadData}}),a._v(" "),e("div",{staticClass:"businessManagement_main"},[a._m(0),a._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"content_header"},[e("div",{staticClass:"content_header_search"},[e("el-input",{staticClass:"input-with-select",attrs:{placeholder:"用户名搜索",clearable:!0},on:{clear:a.userNameSearchFn},model:{value:a.userNameSearch,callback:function(t){a.userNameSearch=t},expression:"userNameSearch"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:a.userNameSearchFn},slot:"append"})],1)],1),a._v(" "),e("div",{staticClass:"content_header_search"},[e("el-input",{staticClass:"input-with-select",attrs:{placeholder:"公司名字搜索",clearable:!0},on:{clear:a.companynameSearchFn},model:{value:a.companyNameSearch,callback:function(t){a.companyNameSearch=t},expression:"companyNameSearch"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:a.companynameSearchFn},slot:"append"})],1)],1)]),a._v(" "),e("div",{staticClass:"content_table"},[e("el-table",{attrs:{data:a.tableData,border:!0}},[e("el-table-column",{attrs:{label:"商家ID",align:"center",width:"100",prop:"id"}}),a._v(" "),e("el-table-column",{attrs:{label:"商家昵称",align:"center",width:"180","show-overflow-tooltip":"",prop:"company_name"}}),a._v(" "),e("el-table-column",{attrs:{label:"账号",align:"center","show-overflow-tooltip":"",width:"240",prop:"username"}}),a._v(" "),e("el-table-column",{attrs:{label:"商标LOGO",align:"center","show-overflow-tooltip":"",width:"120"},scopedSlots:a._u([{key:"default",fn:function(t){return[e("div",{staticClass:"trademark_list"},[e("img",{attrs:{src:a.Tools.handleImg(t.row.avatar),alt:""}})])]}}])}),a._v(" "),e("el-table-column",{attrs:{label:"法人姓名",align:"center",width:"150",prop:"legal_person"}}),a._v(" "),e("el-table-column",{attrs:{label:"法人身份证",align:"center",width:"240",prop:"legal_idcard"}}),a._v(" "),e("el-table-column",{attrs:{label:"余额",align:"center",width:"150","show-overflow-tooltip":"",prop:"balance"}}),a._v(" "),e("el-table-column",{attrs:{label:"操作",align:"center","class-name":"mallReview_scope"},scopedSlots:a._u([{key:"default",fn:function(t){return[e("div",{staticClass:"mallReview_btm"},[e("el-button",{on:{click:function(e){a.modifyPsdFn(t.row)}}},[a._v("修改登录密码")]),a._v(" "),e("el-button",{on:{click:function(e){a.modifybasicInfoFn(t.row)}}},[a._v("修改基本信息")])],1)]}}])})],1),a._v(" "),a.total?e("el-pagination",{attrs:{layout:"prev, pager, next",total:a.total,"page-size":a.pageSize},on:{"current-change":a.currentChange}}):a._e()],1)])])],1),a._v(" "),e("el-dialog",{attrs:{width:"400px","custom-class":"modifyInformationDialog",visible:a.modifyInformationDialog},on:{"update:visible":function(t){a.modifyInformationDialog=t}}},[e("span",{staticClass:"modifyInformationDialog_title",attrs:{slot:"title"},slot:"title"},[e("i",{staticClass:"iconfont icon-xinxi"}),a._v("基本信息\n    ")]),a._v(" "),e("div",{staticClass:"modifyInformation_dialog_box"},[e("div",{staticClass:"dialog_left"},[a._v("头像：")]),a._v(" "),e("div",{staticClass:"dialog_right"},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","show-file-list":!1,"on-success":a.handleAvatarSuccess,"before-upload":a.imageUpload}},[a.imageUrl||""===this.rowData.avatar?a.imageUrl?e("img",{staticClass:"avatar",attrs:{src:a.imageUrl}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"}):e("img",{staticClass:"avatar",attrs:{src:a.Tools.handleImg(this.rowData.avatar)}})])],1)]),a._v(" "),e("div",{staticClass:"modifyInformation_dialog_box"},[e("div",{staticClass:"dialog_left"},[a._v("签名：")]),a._v(" "),e("div",{staticClass:"dialog_right"},[e("el-input",{model:{value:a.signature,callback:function(t){a.signature=t},expression:"signature"}})],1)]),a._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(t){a.modifyInformationDialog=!1}}},[a._v("取 消")]),a._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:a.savemodifyInfoFn}},[a._v("保 存")])],1)]),a._v(" "),e("el-dialog",{attrs:{width:"350px","custom-class":"modifyPassWord",visible:a.modifyPassWord},on:{"update:visible":function(t){a.modifyPassWord=t}}},[e("span",{staticClass:"modifyPassWord_title",attrs:{slot:"title"},slot:"title"},[e("i",{staticClass:"iconfont icon-mima"}),a._v("修改密码\n    ")]),a._v(" "),e("div",{staticClass:"modifyPassWord_box"},[e("el-input",{attrs:{placeholder:"输入新密码"},model:{value:a.newPassWord,callback:function(t){a.newPassWord=t},expression:"newPassWord"}}),a._v(" "),e("el-input",{attrs:{placeholder:"重复输入新密码"},model:{value:a.repetnewPassWord,callback:function(t){a.repetnewPassWord=t},expression:"repetnewPassWord"}})],1),a._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(t){a.modifyPassWord=!1}}},[a._v("取 消")]),a._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:a.savePassWordFn}},[a._v("保 存")])],1)])],1)},staticRenderFns:[function(){var a=this.$createElement,t=this._self._c||a;return t("div",{staticClass:"title"},[t("p",[this._v("商家账号管理")])])}]};var n=e("VU/8")(s,i,!1,function(a){e("PRcB")},null,null);t.default=n.exports},PRcB:function(a,t){}});