webpackJsonp([35],{M0RA:function(t,e){},T1wC:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("uCyv"),o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"orderData"},[a("BreadCrumb",{staticClass:"bread",attrs:{breadData:t.breadData}}),t._v(" "),a("div",{staticClass:"orderData_main"},[a("div",{staticClass:"title"},[a("p",[t._v("订单数据统计")]),t._v(" "),a("p",{staticStyle:{cursor:"pointer"},on:{click:t.refresh}},[a("i",{staticClass:"iconfont icon-shuaxin"}),t._v("\n                刷新\n            ")])]),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"data_header"},[a("div",{staticClass:"data_select"},[a("div",{staticClass:"date_item"},[a("p",{staticClass:"date_label"},[t._v("开始")]),t._v(" "),a("el-date-picker",{staticClass:"date_picker_1",attrs:{type:"date",size:"mini","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期"},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}})],1),t._v(" "),a("div",{staticClass:"date_item"},[a("p",{staticClass:"date_label"},[t._v("截止")]),t._v(" "),a("el-date-picker",{staticClass:"date_picker_1",attrs:{type:"date",size:"mini","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期","picker-options":t.pickerOptions},on:{change:t.getProductDataByDate},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}})],1)])]),t._v(" "),a("div",{staticClass:"shape_content"},[a("div",{staticClass:"shape_header"},[a("div",{staticClass:"shape_header_left"},[a("p",{staticClass:"left_title"},[t._v("订单数据统计")]),t._v(" "),a("div",{staticClass:"time_range"},[a("span",[t._v(t._s(t.startTime.split(" ")[0]))]),t._v(" "),a("span",[t._v("---")]),t._v(" "),a("span",[t._v(t._s(t.endTime.split(" ")[0]))])])]),t._v(" "),a("div",{staticClass:"shape_header_right"},[a("div",{staticClass:"right_items"},[a("div",{staticClass:"point color1"}),t._v(" "),a("p",[t._v("汽车占"+t._s(t.carByDate.percent)+"%")])]),t._v(" "),a("div",{staticClass:"right_items"},[a("div",{staticClass:"point color2"}),t._v(" "),a("p",[t._v("摩托车占"+t._s(t.motorByDate.percent)+"%")])]),t._v(" "),a("div",{staticClass:"right_items"},[a("div",{staticClass:"point color3"}),t._v(" "),a("p",[t._v("无人机占"+t._s(t.planeByDate.percent)+"%")])]),t._v(" "),a("div",{staticClass:"right_items"},[a("div",{staticClass:"point color4"}),t._v(" "),a("p",[t._v("智能设备占"+t._s(t.intelligentByDate.percent)+"%")])])])]),t._v(" "),a("div",{style:{width:"100%",height:"400px"},attrs:{id:"myChart"}})]),t._v(" "),a("div",{staticClass:"content_dropdown"},[a("div",{staticClass:"category_box"},[a("div",{staticClass:"category_box_left"},[a("i",{staticClass:"iconfont icon-qiche"}),t._v(" "),a("div",{staticClass:"category_box_line"},[a("div",{staticClass:"category_line_main"},[a("p",[t._v("汽车 "),a("span",[t._v(t._s(t.carByDate.total>1e3?(t.carByDate.total/1e3).toFixed(2)+"K":t.carByDate.total))])]),t._v(" "),a("el-progress",{attrs:{percentage:t.carByDate.percent,"show-text":!1}})],1),t._v(" "),a("div",{staticClass:"category_line_nmb"},[t._v("\n                                "+t._s(t.carByDate.percent)+"%\n                            ")])])]),t._v(" "),a("div",{staticClass:"category_box_btm"},[t._v("\n                        汽车增长量："+t._s(t.carGrowth)+"\n                    ")])])]),t._v(" "),a("div",{staticClass:"content_dropdown"},[a("div",{staticClass:"category_box"},[a("div",{staticClass:"category_box_left"},[a("i",{staticClass:"iconfont icon-qiche"}),t._v(" "),a("div",{staticClass:"category_box_line"},[a("div",{staticClass:"category_line_main"},[a("p",[t._v("摩托车 "),a("span",[t._v(t._s(t.carByDate.total>1e3?(t.carByDate.total/1e3).toFixed(2)+"K":t.carByDate.total))])]),t._v(" "),a("el-progress",{attrs:{percentage:t.carByDate.percent,"show-text":!1}})],1),t._v(" "),a("div",{staticClass:"category_line_nmb"},[t._v("\n                                "+t._s(t.carByDate.percent)+"%\n                            ")])])]),t._v(" "),a("div",{staticClass:"category_box_btm"},[t._v("\n                        摩托增长量："+t._s(t.motoGrowth)+"\n                    ")])])]),t._v(" "),a("div",{staticClass:"content_dropdown"},[a("div",{staticClass:"category_box"},[a("div",{staticClass:"category_box_left"},[a("i",{staticClass:"iconfont icon-qiche"}),t._v(" "),a("div",{staticClass:"category_box_line"},[a("div",{staticClass:"category_line_main"},[a("p",[t._v("无人机 "),a("span",[t._v(t._s(t.carByDate.total>1e3?(t.carByDate.total/1e3).toFixed(2)+"K":t.carByDate.total))])]),t._v(" "),a("el-progress",{attrs:{percentage:t.carByDate.percent,"show-text":!1}})],1),t._v(" "),a("div",{staticClass:"category_line_nmb"},[t._v("\n                                "+t._s(t.carByDate.percent)+"%\n                            ")])])]),t._v(" "),a("div",{staticClass:"category_box_btm"},[t._v("\n                        无人机增长量："+t._s(t.UAVGrowth)+"\n                    ")])])]),t._v(" "),a("div",{staticClass:"content_dropdown"},[a("div",{staticClass:"category_box"},[a("div",{staticClass:"category_box_left"},[a("i",{staticClass:"iconfont icon-qiche"}),t._v(" "),a("div",{staticClass:"category_box_line"},[a("div",{staticClass:"category_line_main"},[a("p",[t._v("智能设备 "),a("span",[t._v(t._s(t.carByDate.total>1e3?(t.carByDate.total/1e3).toFixed(2)+"K":t.carByDate.total))])]),t._v(" "),a("el-progress",{attrs:{percentage:t.carByDate.percent,"show-text":!1}})],1),t._v(" "),a("div",{staticClass:"category_line_nmb"},[t._v("\n                                "+t._s(t.carByDate.percent)+"%\n                            ")])])]),t._v(" "),a("div",{staticClass:"category_box_btm"},[t._v("\n                        智能设备增长量："+t._s(t.intelligenceGrowth)+"\n                    ")])])])])])],1)},staticRenderFns:[]};var s=function(t){a("M0RA")},r=a("VU/8")(i.a,o,!1,s,null,null);e.default=r.exports},uCyv:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__components_public_BreadCrumb__=__webpack_require__("ZPfm"),__WEBPACK_IMPORTED_MODULE_1_echarts__=__webpack_require__("XLwt"),__WEBPACK_IMPORTED_MODULE_1_echarts___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_echarts__),__WEBPACK_IMPORTED_MODULE_2_moment__=__webpack_require__("PJh5"),__WEBPACK_IMPORTED_MODULE_2_moment___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_moment__);__webpack_exports__.a={inject:["reload"],name:"OrderData",components:{BreadCrumb:__WEBPACK_IMPORTED_MODULE_0__components_public_BreadCrumb__.a},data:function(){var t=this;return{pickerOptions:{disabledDate:function(e){return(e.getTime()-new Date(t.startTime).getTime())/1e3/60/60/24>31}},breadData:[{id:1,name:"淘货",urls:"/index/market/Market",icon:"icon-home"},{id:2,name:"淘货订单",urls:"/index/market/marketOrder/MarketProduct",icon:"icon-home"},{id:3,name:"订单数据统计",urls:"/index/market/marketOrder/OrderData",icon:"icon-home"}],startTime:"",endTime:"",carGrowth:null,motoGrowth:null,UAVGrowth:null,intelligenceGrowth:null,productTotal:0,carTotal:{},motorTotal:{},planeTotal:{},intelligentTotal:{},productDataByDate:[],carByDate:[],motorByDate:[],planeByDate:[],intelligentByDate:[],productTotalByDate:0}},methods:{refresh:function(){this.reload()},drawLine:function drawLine(){var _this2=this,days=(new Date(this.endTime).getTime()-new Date(this.startTime).getTime())/1e3/60/60/24,begin=new Date(this.startTime).getDate(),year=new Date(this.startTime).getFullYear(),month=new Date(this.startTime).getMonth()+1,dates=[],monthDay=0;switch(month){case 1:monthDay=31;break;case 2:monthDay=year%400==0||year%4==0&&year%100!=0?29:28;break;case 3:monthDay=31;break;case 4:monthDay=30;break;case 5:monthDay=31;break;case 6:monthDay=30;break;case 7:case 8:monthDay=31;break;case 9:monthDay=30;break;case 10:monthDay=31;break;case 11:monthDay=30;break;case 12:monthDay=31}for(var i=0;i<days;i++)begin+i>monthDay?dates.push(begin+i-monthDay):dates.push(begin+i);var car=[],motorcycle=[],plane=[],intelligent=[];dates.map(function(t){console.log(t);var e=0,a=0,i=0,o=0;t<10&&(t="0"+t),_this2.carByDate.map(function(a){new Date(year+"-"+month+"-"+t).getTime()!==new Date(a.created_at.split(" ")[0]).getTime()&&new Date(year+"-"+(month+1)+"-"+t).getTime()!==new Date(a.created_at.split(" ")[0]).getTime()||(e+=Number(a.goods_order))}),_this2.motorByDate.map(function(e){new Date(year+"-"+month+"-"+t).getTime()!==new Date(e.created_at.split(" ")[0]).getTime()&&new Date(year+"-"+(month+1)+"-"+t).getTime()!==new Date(e.created_at.split(" ")[0]).getTime()||(a+=Number(e.goods_order))}),_this2.planeByDate.map(function(e){new Date(year+"-"+month+"-"+t).getTime()!==new Date(e.created_at.split(" ")[0]).getTime()&&new Date(year+"-"+(month+1)+"-"+t).getTime()!==new Date(e.created_at.split(" ")[0]).getTime()||(i+=Number(e.goods_order))}),_this2.intelligentByDate.map(function(e){new Date(year+"-"+month+"-"+t).getTime()!==new Date(e.created_at.split(" ")[0]).getTime()&&new Date(year+"-"+(month+1)+"-"+t).getTime()!==new Date(e.created_at.split(" ")[0]).getTime()||(o+=Number(e.goods_order))}),car.push(e),motorcycle.push(a),plane.push(i),intelligent.push(o)}),this.carByDate.total=eval(car.join("+")),this.motorByDate.total=eval(motorcycle.join("+")),this.planeByDate.total=eval(plane.join("+")),this.intelligentByDate.total=eval(intelligent.join("+")),this.productTotalByDate=this.carByDate.total+this.motorByDate.total+this.planeByDate.total+this.intelligentByDate.total,console.log(this.productTotalByDate,this.carByDate.total,this.motorByDate.total,this.planeByDate.total,this.intelligentByDate.total),this.productTotalByDate>0?(this.carByDate.percent=Number((this.carByDate.total/this.productTotalByDate*100).toFixed(2)),this.motorByDate.percent=Number((this.motorByDate.total/this.productTotalByDate*100).toFixed(2)),this.planeByDate.percent=Number((this.planeByDate.total/this.productTotalByDate*100).toFixed(2)),this.intelligentByDate.percent=Number((this.intelligentByDate.total/this.productTotalByDate*100).toFixed(2))):(this.carByDate.percent=0,this.motorByDate.percent=0,this.planeByDate.percent=0,this.intelligentByDate.percent=0);var myChart=__WEBPACK_IMPORTED_MODULE_1_echarts___default.a.init(document.getElementById("myChart"));myChart.setOption({tooltip:{trigger:"axis"},xAxis:{type:"category",data:dates},yAxis:{type:"value"},series:[{itemStyle:{normal:{color:"#009efb",lineStyle:{color:"#009efb"}}},name:"汽车",type:"line",smooth:!0,data:car},{itemStyle:{normal:{color:"#55ce63",lineStyle:{color:"#55ce63"}}},name:"摩托车",type:"line",smooth:!0,data:motorcycle},{itemStyle:{normal:{color:"#ff7676",lineStyle:{color:"#ff7676"}}},name:"无人机",type:"line",smooth:!0,data:plane},{itemStyle:{normal:{color:"#FFB82E",lineStyle:{color:"#FFB82E"}}},name:"无人机",data:intelligent,type:"line",smooth:!0}]})},getProductDataByDate:function(){var t=this;this.HttpClient.post("/admin/marketAnalysis/oneField",{field:"goods_order",start_time:this.startTime,end_time:this.endTime}).then(function(e){console.log(e),200===e.data.code&&(t.productDataByDate=e.data.data,t.carByDate=[],t.motorByDate=[],t.planeByDate=[],t.intelligentByDate=[],e.data.data.map(function(e){"汽车"===e.folder_type?t.carByDate.push(e):"摩托"===e.folder_type?t.motorByDate.push(e):"无人机"===e.folder_type?t.planeByDate.push(e):"智能设备"===e.folder_type&&t.intelligentByDate.push(e)}),t.drawLine(),t.carGrowth=t.carByDate[t.carByDate.length-1].goods_order-t.carByDate[0].goods_order,t.motoGrowth=t.motorByDate[t.motorByDate.length-1].goods_order-t.motorByDate[0].goods_order,t.UAVGrowth=t.planeByDate[t.planeByDate.length-1].goods_order-t.planeByDate[0].goods_order,t.intelligenceGrowth=t.intelligentByDate[t.intelligentByDate.length-1].goods_order-t.intelligentByDate[0].goods_order,console.log(t.carGrowth))})},getProductGross:function(){var t=this;this.HttpClient.post("/admin/marketAnalysis/oneField",{type:"product_sale"}).then(function(e){console.log(e),200===e.data.code&&e.data.data.map(function(e){t.productTotal+=Number(e.product_order),"汽车"===e.folder?t.carTotal=e:"摩托车"===e.folder?t.motorTotal=e:"无人机"===e.folder?t.planeTotal=e:"智能设备"===e.folder&&(t.intelligentTotal=e)})})}},created:function(){this.endTime=__WEBPACK_IMPORTED_MODULE_2_moment___default()().format("YYYY-MM-DD HH:mm:ss"),this.startTime=__WEBPACK_IMPORTED_MODULE_2_moment___default()().subtract(1,"months").format("YYYY-MM-DD HH:mm:ss"),this.getProductGross(),this.getProductDataByDate()}}}});