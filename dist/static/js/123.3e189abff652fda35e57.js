webpackJsonp([123],{a69N:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=t("Xxa5"),l=t.n(n),i=t("exGp"),s=t.n(i),c=t("ZPfm"),r=t("QL8K"),o=t.n(r),d={name:"encyclopediaRanking",components:{BreadCrumb:c.a},data:function(){return{breadData:[{id:1,name:"百科",urls:"/index/encyclopedia/encyclopedia",icon:"icon-home"},{id:2,name:"用户排名",urls:"/index/encyclopedia/encyclopediaRanking",icon:"icon-home"}],searchObj:{},modifyObj:{},tableData:[],dataDialog:!1,pageSize:25,total:0,currentPage:1,userTypeList:[{value:0,label:"系统注册"},{value:1,label:"个人注册"},{value:2,label:"公司注册"},{value:3,label:"普通商家"}]}},created:function(){this.getTableList(null)},methods:{search:function(){this.getTableList(this.searchObj)},dataModal:function(e){this.modifyObj=e,this.dataDialog=!0},viewUser:function(e){window.open(o.a.urls+"/home/others/"+e.uid,"_blank")},getTableList:function(e){var a=this;return s()(l.a.mark(function t(){var n,i;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={page:a.currentPage,type:"encyc"},e&&(n.nickname=e.nickNameSearch,n.user_type=e.userTypeSearch,n.user_id=e.userIdSearch),t.next=4,a.HttpClient.post("/admin/users/ranking",n);case 4:i=t.sent,a.tableData=u(i.data.data.data),console.log("tableData:",a.tableData);case 7:case"end":return t.stop()}},t,a)}))()},filterSecondary:function(e,a,t){return a[t.property]===e}}};function u(e){if(e&&e.length>0)for(var a in e)e[a].encyc_total&&0!=e[a].encyc_total&&(e[a].averageView=e[a].encyc_view/e[a].encyc_total,e[a].averageLike=e[a].encyc_like/e[a].encyc_total,e[a].averageComment=e[a].encyc_comment/e[a].encyc_total),0==e[a].user_type?e[a].userTypeName="系统注册":1==e[a].user_type?e[a].userTypeName="个人注册":2==e[a].user_type?e[a].userTypeName="公司注册":3==e[a].user_type&&(e[a].userTypeName="普通商家");return e}var _={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"encyclopediaRanking"},[t("BreadCrumb",{staticClass:"bread",attrs:{breadData:e.breadData}}),e._v(" "),t("div",{staticClass:"encyclopediaRanking_main"},[e._m(0),e._v(" "),t("div",{staticClass:"ranking_content"},[t("div",{staticClass:"ranking_header"},[t("div",{staticClass:"ranking_search"},[t("div",[t("el-input",{staticClass:"input-with-select",attrs:{placeholder:"用户ID搜索",clearable:""},on:{clear:e.search},model:{value:e.searchObj.userIdSearch,callback:function(a){e.$set(e.searchObj,"userIdSearch",a)},expression:"searchObj.userIdSearch"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1)],1),e._v(" "),t("div",[t("el-input",{staticClass:"input-with-select",attrs:{placeholder:"昵称搜索",clearable:""},on:{clear:e.search},model:{value:e.searchObj.nickNameSearch,callback:function(a){e.$set(e.searchObj,"nickNameSearch",a)},expression:"searchObj.nickNameSearch"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1)],1)])]),e._v(" "),t("div",{staticClass:"ranking_content_box"},[t("el-table",{attrs:{data:e.tableData,border:!0}},[t("el-table-column",{attrs:{label:"ID",align:"center",width:"100",prop:"user_id",sortable:""}}),e._v(" "),t("el-table-column",{attrs:{label:"昵称",align:"center",prop:"nickname"}}),e._v(" "),t("el-table-column",{attrs:{label:"用户类型",align:"center",filters:[{text:"系统注册",value:"系统注册"},{text:"个人注册",value:"个人注册"},{text:"公司注册",value:"公司注册"},{text:"普通商家",value:"普通商家"}],"filter-method":e.filterSecondary,prop:"userTypeName"}}),e._v(" "),t("el-table-column",{attrs:{label:"总浏览次数",align:"center",prop:"encyc_view",sortable:""}}),e._v(" "),t("el-table-column",{attrs:{label:"总点赞次数",align:"center",prop:"encyc_like",sortable:""}}),e._v(" "),t("el-table-column",{attrs:{label:"总讨论次数",align:"center",prop:"encyc_comment",sortable:""}}),e._v(" "),t("el-table-column",{attrs:{label:"操作",align:"center","class-name":"ranking_scope",width:"130"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"ranking_btm"},[t("el-button",{attrs:{size:"medium ",type:"text"},on:{click:function(t){e.dataModal(a.row)}}},[e._v("数据")]),e._v(" "),t("el-button",{attrs:{size:"medium ",type:"text"},on:{click:function(t){e.viewUser(a.row)}}},[e._v("查看用户")])],1)]}}])})],1)],1)])]),e._v(" "),t("el-dialog",{attrs:{width:"400px","custom-class":"dataDialog",visible:e.dataDialog},on:{"update:visible":function(a){e.dataDialog=a}}},[t("span",{staticClass:"dataDialog_title",attrs:{slot:"title"},slot:"title"},[t("i",{staticClass:"iconfont icon-shuju"}),e._v("数据")]),e._v(" "),t("div",{staticClass:"data_dialog_box"},[t("div",{staticClass:"data_dialog_list"},[t("p",[e._v("总百科数")]),e._v(" "),t("span",[e._v(e._s(e.modifyObj.encyc_total))])]),e._v(" "),t("div",{staticClass:"data_dialog_list"},[t("p",[e._v("平均浏览次数")]),e._v(" "),t("span",[e._v(e._s(e.modifyObj.averageView))])]),e._v(" "),t("div",{staticClass:"data_dialog_list"},[t("p",[e._v("平均点赞次数")]),e._v(" "),t("span",[e._v(e._s(e.modifyObj.averageLike))])]),e._v(" "),t("div",{staticClass:"data_dialog_list"},[t("p",[e._v("平均讨论次数")]),e._v(" "),t("span",[e._v(e._s(e.modifyObj.averageComment))])])])])],1)},staticRenderFns:[function(){var e=this.$createElement,a=this._self._c||e;return a("div",{staticClass:"title"},[a("p",[this._v("用户排名")])])}]};var p=t("VU/8")(d,_,!1,function(e){t("ciqt")},null,null);a.default=p.exports},ciqt:function(e,a){}});