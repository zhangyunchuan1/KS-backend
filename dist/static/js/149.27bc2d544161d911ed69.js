webpackJsonp([149],{"1/fs":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s={name:"questionModify",data:function(){return{id:"",imageUrl:"",tags:[],name:"",tag_id:"",part:[],modifyVisible:!1,articleData:{},newname:"",labelInfo:{},title:"",modifylinkVisible:!1,editorContent:""}},mounted:function(){var t=this;this.getlistData();var i=new(e("sYY+"))("#editor");i.customConfig.menus=["head","bold","fontSize","fontName","italic","underline","strikeThrough","foreColor","backColor","link","list","justify","quote","emoticon","image","table","video","code","undo","redo"],i.customConfig.onchange=function(i){t.editorContent=i},i.create()},methods:{getlistData:function(){var t=this;this.HttpClient.post("/admin/question/getInfo",{id:this.$route.query.id}).then(function(i){console.log(t.$route.query.id),200==i.data.code&&(console.log(i.data),t.articleData=i.data.data,t.title=t.articleData.title)})},modifyInfo:function(t){this.labelInfo=t,this.modifyVisible=!0,this.newname=t.name},modifylinkInfo:function(t){console.log(t),this.labelInfo=t,this.newname=t.link,this.modifylinkVisible=!0},deleteTag:function(t){var i=this,e={relation_id:this.articleData.question_id,tag_id:t.tag_id};this.HttpClient.post("/admin/tags/del",e).then(function(t){console.log(t.data),200==t.data.code&&(i.$message.success(t.data.msg),i.modifyVisible=!1,setTimeout(function(){i.getlistData()},500))})},deleteLink:function(t){var i=this;console.log(t);var e={relation_id:this.articleData.question_id,tag_id:t.source_id};this.HttpClient.post("/admin/source/del",e).then(function(t){console.log(t.data),200==t.data.code&&(i.$message.success(t.data.msg),i.modifyVisible=!1,setTimeout(function(){i.getlistData()},500))})},saveModifyFn:function(){var t=this;console.log(this.articleData.question_id),console.log(this.newname);var i={relation_id:this.articleData.question_id,name:this.newname,tag_id:this.labelInfo.tag_id};this.HttpClient.post("/admin/tags/edit",i).then(function(i){console.log(i.data),200==i.data.code&&(t.$message.success(i.data.msg),t.modifyVisible=!1,setTimeout(function(){t.getlistData()},500))})},saveModifylinkFn:function(){var t=this;console.log(this.labelInfo),console.log(this.newname);var i={name:this.labelInfo.source_name,relation_id:this.articleData.question_id,source_id:this.labelInfo.source_id,type:4,link:this.newname};this.HttpClient.post("/admin/source/edit",i).then(function(i){console.log(i.data),200==i.data.code&&(t.$message.success(i.data.msg),t.modifylinkVisible=!1,setTimeout(function(){t.getlistData()},500))})},modifyTitleContent:function(){var t=this,i={id:this.articleData.id,title:this.articleData.title,content:this.articleData.content};console.log(this.editorContent),console.log(i),this.HttpClient.post("/admin/question/edit",i).then(function(i){console.log(i.data),200==i.data.code&&(t.$message.success(i.data.msg),setTimeout(function(){t.getlistData()},500))})},handleAvatarSuccess:function(t,i){this.imageUrl=URL.createObjectURL(i.raw)},beforeAvatarUpload:function(t){var i="image/jpeg"===t.type,e=t.size/1024;return i||this.$message.error("上传图片只能是 JPG 格式!"),e||this.$message.error("上传图片大小不能超过 1MB!"),i&&e}}},a={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"questionModify"},[e("div",{staticClass:"questionModify_header"},[t._v(t._s(t.title)+" - 修改")]),t._v(" "),e("div",{staticClass:"questionModify_main"},[e("div",{staticClass:"questionModify_List"},[e("div",{staticClass:"list_title"},[t._v("标题")]),t._v(" "),e("div",{staticClass:"list_input"},[e("el-input",{model:{value:t.articleData.title,callback:function(i){t.$set(t.articleData,"title",i)},expression:"articleData.title"}})],1)]),t._v(" "),e("div",{staticClass:"questionModify_List"},[e("div",{staticClass:"list_title"},[t._v("详细内容")]),t._v(" "),e("div",{staticClass:"list_input list_textarea"},[e("div",{staticClass:"edit-box"},[e("div",{attrs:{id:"editor"}},[e("p",{domProps:{innerHTML:t._s(t.articleData.content)}})])])])]),t._v(" "),e("div",{staticClass:"questionModify_List"},[e("div",{staticClass:"list_title"},[t._v("标签")]),t._v(" "),e("div",{staticClass:"list_input list_tags"},t._l(t.articleData.label,function(i,s){return e("div",{key:s,staticClass:"tags"},[e("div",{on:{click:function(e){t.modifyInfo(i)}}},[t._v(t._s(i.name))]),t._v(" "),e("p",{on:{click:function(e){t.deleteTag(i)}}},[e("i",{staticClass:"iconfont icon-minus"})])])}))]),t._v(" "),e("div",{staticClass:"questionModify_List"},[e("div",{staticClass:"list_title"},[t._v("对应链接")]),t._v(" "),t._l(t.articleData.source,function(i,s){return e("div",{key:s,staticClass:"list_input list_tags"},[e("div",{staticClass:"tags"},[e("div",{on:{click:function(e){t.modifylinkInfo(i)}}},[t._v(t._s(i.link))]),t._v(" "),e("p",{on:{click:function(e){t.deleteLink(i)}}},[e("i",{staticClass:"iconfont icon-minus"})])])])})],2)]),t._v(" "),e("el-dialog",{attrs:{"custom-class":"modifyDialog",visible:t.modifyVisible,width:"400px"},on:{"update:visible":function(i){t.modifyVisible=i}}},[e("span",{staticClass:"modifyVisible_title",attrs:{slot:"title"},slot:"title"},[e("i",{staticClass:"iconfont icon-edit-square"}),t._v("修改\n    ")]),t._v(" "),e("div",{staticClass:"modifyVisible"},[e("p",[t._v("新名称：")]),t._v(" "),e("div",[e("el-input",{model:{value:t.newname,callback:function(i){t.newname=i},expression:"newname"}})],1)]),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(i){t.modifyVisible=!1}}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.saveModifyFn}},[t._v("保 存")])],1)]),t._v(" "),e("el-dialog",{attrs:{"custom-class":"modifyDialog",visible:t.modifylinkVisible,width:"400px"},on:{"update:visible":function(i){t.modifylinkVisible=i}}},[e("span",{staticClass:"modifyVisible_title",attrs:{slot:"title"},slot:"title"},[e("i",{staticClass:"iconfont icon-edit-square"}),t._v("修改\n    ")]),t._v(" "),e("div",{staticClass:"modifyVisible"},[e("p",[t._v("新名称：")]),t._v(" "),e("div",[e("el-input",{model:{value:t.newname,callback:function(i){t.newname=i},expression:"newname"}})],1)]),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(i){t.modifylinkVisible=!1}}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.saveModifylinkFn}},[t._v("保 存")])],1)]),t._v(" "),e("div",{staticClass:"questionModify_btm"},[e("el-button",[t._v("取消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.modifyTitleContent}},[t._v("修改")])],1)],1)},staticRenderFns:[]};var n=e("VU/8")(s,a,!1,function(t){e("qmW0")},null,null);i.default=n.exports},qmW0:function(t,i){}});