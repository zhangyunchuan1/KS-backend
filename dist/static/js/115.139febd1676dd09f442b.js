webpackJsonp([115],{fEu9:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i={name:"PagePlateManagement",components:{BreadCrumb:e("ZPfm").a},data:function(){return{breadData:[{id:1,name:"页面",urls:"/index/page/Page",icon:"icon-home"},{id:2,name:"页面管理",urls:"/index/page/pageManagement/PageManagement",icon:"icon-home"},{id:3,name:"上传菜单",urls:"/index/page/pageManagement/uploadMenu/UploadMenu",icon:"icon-home"},{id:4,name:"版块管理",urls:"/index/page/pageManagement/uploadMenu/PagePlateManagement",icon:"icon-home"}],listData:[],plateImg:"",plateName:"",plateID:"",modifyDialog:!1}},mounted:function(){this.getlistData()},methods:{getlistData:function(){var t=this;this.HttpClient.post("/admin/menuFolder/lists").then(function(a){200==a.data.code&&(console.log(a.data.data),t.listData=a.data.data)})},handleAvatarSuccess:function(t,a){this.imageUrl=URL.createObjectURL(a.raw)},modifyInfoFn:function(t){this.plateID=t.menu_id,this.plateName=t.name,this.plateImg=t.images,this.modifyDialog=!0,console.log(t)},savemodifyInfo:function(){var t=this;this.modifyDialog=!1;var a={menu_id:this.plateID,images:this.plateImg};console.log(a),this.HttpClient.post("/admin/menuFolder/edit",a).then(function(a){console.log(a.data),200==a.data.code&&(t.$message.success(a.data.msg),setTimeout(function(){t.getlistData()},500))})},beforeAvatarUpload:function(t){var a=this;console.log(t),this.HttpClient.form("/admin/uploadOneImage",{images:t}).then(function(t){200===t.data.code&&(a.$message.success(t.data.msg),a.plateImg=t.data.path)})}}},s={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"pagePlateManagement"},[e("BreadCrumb",{staticClass:"bread",attrs:{breadData:t.breadData}}),t._v(" "),e("div",{staticClass:"pagePlateManagement_main"},[t._m(0),t._v(" "),e("div",{staticClass:"content"},t._l(t.listData,function(a,i){return e("div",{key:i,staticClass:"content_list",on:{click:function(e){t.modifyInfoFn(a)}}},[e("div",{staticClass:"list_img"},[e("img",{attrs:{src:a.images,alt:""}})]),t._v(" "),e("p",{staticClass:"list_name"},[t._v(t._s(a.name))])])}))]),t._v(" "),e("el-dialog",{attrs:{width:"300px","custom-class":"modifyDialog",visible:t.modifyDialog},on:{"update:visible":function(a){t.modifyDialog=a}}},[e("span",{staticClass:"modifyDialog_title",attrs:{slot:"title"},slot:"title"},[e("i",{staticClass:"iconfont icon-edit-square"}),t._v("修改\n    ")]),t._v(" "),e("div",{staticClass:"modifyDialog_box"},[e("div",{staticClass:"box_list"},[e("el-tag",[t._v(t._s(t.plateName))])],1),t._v(" "),e("div",{staticClass:"box_list"},[e("p",[t._v("修改图片")]),t._v(" "),e("el-upload",{staticClass:"plateImg-uploader",attrs:{action:"","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.plateImg?e("img",{staticClass:"plateImg",attrs:{src:t.plateImg}}):e("i",{staticClass:"el-icon-plus plateImg-uploader-icon"})])],1)]),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.modifyDialog=!1}}},[t._v("关 闭")]),t._v(" "),e("el-button",{on:{click:t.savemodifyInfo}},[t._v("保 存")])],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"title"},[a("p",[this._v("版块管理")])])}]};var n=e("VU/8")(i,s,!1,function(t){e("t8rs")},null,null);a.default=n.exports},t8rs:function(t,a){}});