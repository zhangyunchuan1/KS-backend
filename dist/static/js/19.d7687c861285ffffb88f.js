webpackJsonp([19],{"2rID":function(e,i){},Aiw8:function(e,i){},p1uU:function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n={name:"SystemMenuJurisdiction",components:{BreadCrumb:t("ZPfm").a,menuTrees:{name:"tree-menu",template:'\n          <div class="tree-menu">\n            <div class="label-wrapper">\n              <div :style="indent" class="parent_menu">\n              <div class="menu_label">\n                <i v-if="child" class="iconfont icon_left" :class="showChildren?\'icon-jian-xianxingfangkuang\':\'icon-jia-xianxingfangkuang\'" @click="toggleChildren"></i>\n                \n                <span @click="handleSelect(id,type,pid,folder_id)" :style="(slect)?\'color:#15bafe\':\'\'">{{label}}</span>\n              </div>\n              </div>\n            </div>\n            <tree-menu v-if="showChildren" v-for="item in child" :child="item.child" \n              :label="item.name" :depth="depth + 1" :key="item.id" :id="item.id" :type="item.type" :pid="item.pid" @ee="xx" :folder_id="folder_id" v-on:qq="yy">\n            </tree-menu>\n          </div>\n        ',props:["child","label","depth","id","type","name","pid","folder_id"],data:function(){return{showChildren:!1,menu_visible:!1,menu_id:null,menu_type:null,menu_pid:null,menu_folderId:null,slect:!1,JurList:[]}},computed:{indent:function(){return{transform:"translate("+20*this.depth+"px)"}}},methods:{handleSelect:function(e,i,t,n,s){var a=this;this.$store.dispatch("getMenuInfo",{}),console.log(s),void 0===t||(console.log(e,i,t,n),this.getSelectJurList(e),setTimeout(function(){console.log(a.JurList),a.menu_visible=!0,a.$emit("ee",a.menu_type),a.$store.dispatch("getMenuInfo",{id:e,menu_visible:a.menu_visible,type:i,source:1,pid:t,folder_id:n,JurList:a.JurList}).then(function(e){}),a.$emit("qq",a.JurList),console.log(a.$store.state.menu)},300))},getMenulist:function(){this.HttpClient.post("/admin/menu/getList",{}).then(function(e){console.log(e)})},toggleChildren:function(){this.showChildren=!this.showChildren},getSelectJurList:function(e){var i=this;this.HttpClient.post("/admin/menuPermission/getAll",{menu_id:e}).then(function(e){console.log(e),200===e.data.code&&(i.JurList=e.data.data)})},xx:function(){this.$emit("ee",{id:this.menu_id,menu_visible:this.menu_visible,type:this.menu_type})},yy:function(){this.$emit("qq",this.JurList)}}}},data:function(){return{menu_list:[],show:!1,typeTitle:"",index:0,menuVisible:!1,menu_id:null,breadData:[{id:1,name:"系统管理",urls:"/index",icon:"icon-home"},{id:2,name:"菜单权限",urls:"/index/test",icon:"icon-home"}],treeData:{id:0,name:"root",children:[{id:1,name:"菜单1",children:[{id:11,name:"菜单11"},{id:12,name:"菜单12"}]},{id:2,name:"菜单2",children:[{id:21,name:"菜单21"},{id:22,name:"菜单22"}]}]},checkAll:!1,checkedJurisdiction:[],jurisdictionData:[],isIndeterminate:!0}},mounted:function(){this.getMenulist(),this.getAllJurList()},methods:{getAllJurList:function(){var e=this;this.HttpClient.post("/admin/permission/index",{}).then(function(i){console.log(i.data.data),e.jurisdictionData=i.data.data})},getMenulist:function(){var e=this;this.HttpClient.post("/admin/menu/getList",{}).then(function(i){console.log(i),e.menu_list=i.data.data})},getMenu:function(e){var i=this;setTimeout(function(){var e=i.$store.state.menu.menu;i.menuVisible=e.menu_visible,i.menu_id=e.id,i.checkedJurisdiction=e.JurList,console.log(e,i.menu_id,i.menuVisible)})},handleChange:function(e){var i=this;console.log(e),this.HttpClient.post("/admin/menuPermission/create",{menu_id:this.$store.state.menu.menu.id,permission_id:e}).then(function(t){console.log(t),200===t.data.code?i.$message.success(t.data.msg):1188===t.data.code&&i.HttpClient.post("/admin/menuPermission/destroy",{menu_id:i.$store.state.menu.menu.id,permission_id:e}).then(function(e){console.log(e),200===e.data.code?i.$message.success(e.data.msg):i.$message.error(e.data.msg)})})},handleCheckAllChange:function(e){console.log(e),this.checkedJurisdiction=e?this.jurisdictionData:[],console.log(this.checkedJurisdiction),this.isIndeterminate=!1},handleCheckedCitiesChange:function(e){console.log(e);var i=e.length;this.checkAll=i===this.jurisdictionData.length,this.isIndeterminate=i>0&&i<this.jurisdictionData.length},rr:function(e){console.log(this.$store.state.menu.menu.JurList),this.checkedJurisdiction=this.$store.state.menu.menu.JurList,this.checkedJurisdiction=this.oldList,console.log(this.checkedJurisdiction)}}},s={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"systemMenuJurisdiction"},[t("BreadCrumb",{staticClass:"bread",attrs:{breadData:e.breadData}}),e._v(" "),t("div",{staticClass:"content"},[t("div",{staticClass:"trees"},[t("div",{staticClass:"tree_left"},[t("div",{staticClass:"left_content"},e._l(e.menu_list,function(i,n){return t("div",{key:n},[t("menuTrees",{attrs:{child:i.child,depth:0,label:i.folder_name,id:i.folder_id,type:i.type,name:i.name,pid:i.pid,folder_id:i.folder_id,fd_name:i.folder_name},on:{ee:e.getMenu,qq:function(i){e.rr()}}})],1)}))]),e._v(" "),t("div",{staticClass:"tree_right"},[t("div",{staticClass:"item_contain",style:e.menuVisible?{display:"block"}:{display:"none"}},[t("div",{staticClass:"jurisdiction_content"},[t("el-checkbox",{staticClass:"all_check",attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(i){e.checkAll=i},expression:"checkAll"}},[e._v("全选")]),e._v(" "),t("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),t("el-checkbox-group",{staticClass:"check_group",on:{change:e.handleCheckedCitiesChange},model:{value:e.checkedJurisdiction,callback:function(i){e.checkedJurisdiction=i},expression:"checkedJurisdiction"}},e._l(e.jurisdictionData,function(i){return t("el-checkbox",{key:i.id,staticClass:"check_item",attrs:{label:i},on:{change:function(t){e.handleChange(i.id)}}},[t("span",{staticClass:"check_lab"},[e._v(e._s(i.label)),t("span",{staticClass:"line"}),e._v(e._s(i.name))])])}))],1)])])])])],1)},staticRenderFns:[]};var a=t("VU/8")(n,s,!1,function(e){t("2rID"),t("Aiw8")},"data-v-599806ab",null);i.default=a.exports}});