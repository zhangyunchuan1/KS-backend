webpackJsonp([248],{LNXT:function(t,e){},RAOk:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"NewProductType",components:{BreadCrumb:s("ZPfm").a},data:function(){return{breadData:[{id:1,name:"功能控制",urls:"/index/functionControl",icon:"icon-home"},{id:2,name:"商城菜单管理",urls:"/index/functionControl/mallManagement/mall-management",icon:"icon-home"},{id:3,name:"新增产品类型",urls:"/index/functionControl/mallManagement/new-product-type",icon:"icon-home"}],selectchoseboxtitle:!1,productName:"",productType:"",tags:[],isshowAddtitle:!1,inputTitle:"",titleTags:[],chosewordtype:null,chosefill:null,selectTypeotitle:"",titleClick:!1,typeList:[{type:1,name:"单选"},{type:2,name:"多选"}],typeListModel:"",ifwordList:[{type:0,name:"必填"},{type:1,name:"选填"}],choseSearchList:[{type:0,name:"不能搜索"},{type:1,name:"可以搜索"}],selectSearchtitle:"",selectisnotitle:"",isshowchosebox:!1,isshowNumchosebox:!1,titleNumTags:[],selectNumTypeotitle:"",typeNumList:[{type:3,name:"整数"},{type:4,name:"一位小数"},{type:5,name:"两位小数"}],numSearchtitle:"",numSearchList:[{type:0,name:"不能搜索"},{type:1,name:"可以搜索"}],typeNumListModel:"",selectNumcontent:null,imageUrl:"",selectData:[],propertyArray:[],centerDialogVisible:!1,propertyOptions:[],propertyValue:"",unitOptions:[],unitValue:""}},mounted:function(){},watch:{productType:function(){this.HttpClient.post("/admin/category/checkValue",{value_name:this.productType}).then(function(t){console.log(t.data),t.data.code})}},methods:{getNumname:function(){var t=this;this.HttpClient.get("/admin/selectBox").then(function(e){200==e.data.code&&(t.selectData=e.data.data.data,console.log(e.data))})},getpropertyOptions:function(){var t=this;this.HttpClient.post("/admin/numInterval/getName").then(function(e){console.log(e),t.propertyOptions=e.data.data})},getnuitlist:function(){var t=this,e={name:this.propertyValue};this.HttpClient.post("/admin/numInterval/getListByName",e).then(function(e){console.log(e.data.data),t.unitOptions=e.data.data})},getaddlist:function(){var t=this,e={name:this.productName,image:this.imageUrl,property_array:this.propertyArray};console.log(e),this.HttpClient.post("/admin/category/create",e).then(function(e){console.log(e),200===e.data.code?t.$message.success(e.data.msg):t.$message.warning(e.data.msg)})},changeTitleFn:function(t){console.log(t),this.isshowchosebox=!this.isshowchosebox,this.selectTypeotitle=t},changeproValue:function(){this.getnuitlist()},sureSavechoseFn:function(){var t=this,e=[],s="";this.selectData.forEach(function(e){e.name==t.selectTypeotitle&&(s=e.property_id)}),e.property_id=s,e.name=this.selectTypeotitle,e.rule=this.chosewordtype,e.selective=this.chosefill,e.search=this.selectSearchtitle,e.values=this.tags,e.quantity=this.tags.length,e.type=0,this.propertyArray.push(e),setTimeout(function(){t.typeListModel="",t.selectisnotitle="",t.selectSearchtitle="",t.selectTypeotitle="",t.tags=[]},500),this.$message.success("操作成功"),this.isshowchosebox=!1,console.log(this.propertyArray)},sureSaveNumFn:function(){var t=this,e=[],s=[];s.push(this.unitValue),this.isshowNumchosebox=!1,this.typeNumListModel="",this.selectNumcontent="",this.numSearchtitle="",this.selectNumTypeotitle="",console.log(this.unitValue),console.log(this.unitOptions),e.property_id=this.selectNumTypeotitle.proid,e.name=this.propertyValue,e.rule=this.typeNumListModel,e.selective=this.selectNumcontent,e.search=this.numSearchtitle,e.values=s,e.quantity=s.length,e.type=1,this.propertyArray.push(e),setTimeout(function(){t.typeNumListModel="",t.selectNumcontent="",t.numSearchtitle=""},500),this.$message.success("操作成功"),console.log(this.selectNumTypeotitle.proid)},addNumName:function(){this.centerDialogVisible=!0,this.centerDialogVisible=!0,this.getpropertyOptions()},changeboxNumModel:function(t){this.selectNumTypeotitle=t,this.isshowNumchosebox=!0,console.log(this.selectNumTypeotitle)},changetypeModel:function(t){console.log(t),this.chosewordtype=t.type},changeisnoModel:function(t){console.log(t),this.chosefill=t.type},changesearchModel:function(t){this.selectSearchtitle=t.type},changenumModel:function(t){this.numSearchtitle=t.type},changeNumtypeModel:function(t){this.typeNumListModel=t.type,console.log(this.typeNumListModel)},changeNumisModel:function(t){this.selectNumcontent=t.type,console.log(this.selectNumcontent)},imageUpload:function(t){var e=this;console.log(t),this.HttpClient.form("/admin/uploadOneImage",{images:t}).then(function(t){console.log(t.data.path),200===t.data.code&&(e.$message.success(t.data.msg),e.imageUrl=t.data.path)})},addproductTitle:function(){this.tags.push(this.productType),this.productType=""},addName:function(){this.isshowAddtitle=!0,this.getNumname()},sureSelectFn:function(){this.isshowAddtitle=!1,this.titleTags.push(this.inputTitle),this.inputTitle=""},choseType:function(t){this.titleClick=!0,console.log(1111111),console.log(t)},deletetypeTitle:function(t){var e=this;this.titleTags.forEach(function(s,i){s==t&&e.titleTags.splice(i,1)})},deletetypeNumTitle:function(t){var e=this;this.titleNumTags.forEach(function(s,i){s==t&&e.titleNumTags.splice(i,1)})},deleteInforFn:function(t){var e=this;this.tags.forEach(function(s,i){t===s&&e.tags.splice(i,1)})},sureNumFn:function(){var t=this;this.centerDialogVisible=!1;var e=this.propertyValue+"("+this.unitValue+")",s={};s.name=e;var i="";this.unitOptions.forEach(function(e){t.unitValue==e.unit&&(i=e.property_id)}),s.proid=i,this.titleNumTags.push(s),console.log(this.titleNumTags)},surechoseNumboxFn:function(){this.getaddlist()}}},a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"NewprodutType"},[s("BreadCrumb",{staticClass:"bread",attrs:{breadData:t.breadData}}),t._v(" "),s("div",{staticClass:"productbox"},[s("div",{staticClass:"headerbox"},[t._v("新增产品类型")]),t._v(" "),s("div",{staticClass:"product_header"},[s("div",{staticClass:"chooseType"},[t._v("添加")]),t._v(" "),s("el-input",{attrs:{placeholder:"产品类别名称",clearable:""},model:{value:t.productName,callback:function(e){t.productName=e},expression:"productName"}})],1),t._v(" "),s("div",{staticClass:"product_header"},[s("div",{staticClass:"chooseType chooseType1"},[t._v("上传展示图片")]),t._v(" "),s("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/","show-file-list":!1,"before-upload":t.imageUpload}},[t.imageUrl?s("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"product_header"},[s("div",{staticClass:"product_header"},[s("div",{staticClass:"chooseType"},[t._v("选择框")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.addName}},[t._v("添加")])],1)]),t._v(" "),s("div",{staticClass:"product_header"},[s("div",{staticStyle:{width:"100%"}},[s("div",[s("div",[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[t._v("选择框")])]),t._v(" "),s("el-radio-group",{attrs:{size:"small"},model:{value:t.selectTypeotitle,callback:function(e){t.selectTypeotitle=e},expression:"selectTypeotitle"}},t._l(t.titleTags,function(e,i){return s("el-radio",{key:i,attrs:{label:e,border:""},on:{change:function(s){t.changeTitleFn(e)}}},[t._v("\n                    "+t._s(e)+"\n                    "),s("el-button",{attrs:{icon:"el-icon-delete"},on:{click:function(s){t.deletetypeTitle(e)}}})],1)}))],1),t._v(" "),t.isshowchosebox?s("div",[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"smallbox"},[s("div",{staticClass:"chooseType"},[t._v("类型")]),t._v(" "),s("el-radio-group",{attrs:{size:"small"},model:{value:t.typeListModel,callback:function(e){t.typeListModel=e},expression:"typeListModel"}},t._l(t.typeList,function(e,i){return s("el-radio",{key:i,attrs:{label:e.type,border:""},on:{change:function(s){t.changetypeModel(e)}}},[t._v(t._s(e.name))])}))],1),t._v(" "),s("div",{staticClass:"smallbox"},[s("div",{staticClass:"chooseType"},[t._v("是否必填")]),t._v(" "),s("el-radio-group",{attrs:{size:"small"},model:{value:t.selectisnotitle,callback:function(e){t.selectisnotitle=e},expression:"selectisnotitle"}},t._l(t.ifwordList,function(e,i){return s("el-radio",{key:i,attrs:{label:e.type,border:""},on:{change:function(s){t.changeisnoModel(e)}}},[t._v(t._s(e.name))])}))],1),t._v(" "),s("div",{staticClass:"smallbox"},[s("div",{staticClass:"chooseType chooseType1"},[t._v("用户是否可搜索")]),t._v(" "),s("el-radio-group",{attrs:{size:"small"},model:{value:t.selectSearchtitle,callback:function(e){t.selectSearchtitle=e},expression:"selectSearchtitle"}},t._l(t.choseSearchList,function(e,i){return s("el-radio",{key:i,attrs:{label:e.type,border:""},on:{change:function(s){t.changesearchModel(e)}}},[t._v(t._s(e.name))])}))],1),t._v(" "),s("div",{},[s("div",{staticClass:"product_header"},[s("div",{staticClass:"chooseType"},[t._v("现有选项")]),t._v(" "),s("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.productType,callback:function(e){t.productType=e},expression:"productType"}}),t._v(" "),s("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.addproductTitle}})],1),t._v(" "),s("div",{staticClass:"product_header"},[s("el-card",{staticClass:"box-card"},t._l(t.tags,function(e){return s("el-tag",{key:e,attrs:{closable:"",type:""},on:{close:function(s){t.deleteInforFn(e)}}},[t._v(t._s(e))])}))],1)])]),t._v(" "),s("div",{staticClass:"product_header",staticStyle:{"margin-top":"20px"}},[s("el-button",[t._v("取消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.sureSavechoseFn}},[t._v("确定")])],1)],1):t._e()],1)])])]),t._v(" "),s("div",{staticClass:"product_header",staticStyle:{"margin-top":"50px"}},[s("div",{staticStyle:{width:"100%"}},[s("div",{staticClass:"product_header"},[s("el-checkbox",{attrs:{label:"数字区间",border:""}}),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.addNumName}},[t._v("添加")])],1)])]),t._v(" "),s("div",[s("div",[s("div",{staticClass:"product_header"},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[t._v("数字区间")])]),t._v(" "),s("el-radio-group",{attrs:{size:"small"},model:{value:t.selectNumTypeotitle,callback:function(e){t.selectNumTypeotitle=e},expression:"selectNumTypeotitle"}},t._l(t.titleNumTags,function(e,i){return s("el-radio",{key:i,attrs:{label:e,border:""},on:{change:function(s){t.changeboxNumModel(e)}}},[t._v("\n                "+t._s(e.name)+"\n                "),s("el-button",{attrs:{icon:"el-icon-delete"},on:{click:function(s){t.deletetypeNumTitle(e)}}})],1)}))],1)],1),t._v(" "),t.isshowNumchosebox?s("div",{staticClass:"product_header"},[s("div",{staticClass:"product_header"}),t._v(" "),s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"smallbox"},[s("div",{staticClass:"chooseType"},[t._v("类型")]),t._v(" "),s("el-radio-group",{attrs:{size:"small"},model:{value:t.typeNumListModel,callback:function(e){t.typeNumListModel=e},expression:"typeNumListModel"}},t._l(t.typeNumList,function(e,i){return s("el-radio",{key:i,attrs:{label:e.type,border:""},on:{change:function(s){t.changeNumtypeModel(e)}}},[t._v(t._s(e.name))])}))],1),t._v(" "),s("div",{staticClass:"smallbox"},[s("div",{staticClass:"chooseType"},[t._v("是否必填")]),t._v(" "),s("el-radio-group",{attrs:{size:"small"},model:{value:t.selectNumcontent,callback:function(e){t.selectNumcontent=e},expression:"selectNumcontent"}},t._l(t.ifwordList,function(e,i){return s("el-radio",{key:i,attrs:{label:e.type,border:""},on:{change:function(s){t.changeNumisModel(e)}}},[t._v(t._s(e.name))])}))],1),t._v(" "),s("div",{staticClass:"smallbox"},[s("div",{staticClass:"chooseType chooseType1"},[t._v("用户是否可搜索")]),t._v(" "),s("el-radio-group",{attrs:{size:"small"},model:{value:t.numSearchtitle,callback:function(e){t.numSearchtitle=e},expression:"numSearchtitle"}},t._l(t.numSearchList,function(e,i){return s("el-radio",{key:i,attrs:{label:e.type,border:""},on:{change:function(s){t.changenumModel(e)}}},[t._v(t._s(e.name))])}))],1),t._v(" "),s("div",{staticClass:"product_header"},[s("el-button",[t._v("取消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.sureSaveNumFn}},[t._v("确定")])],1)])],1):t._e()]),t._v(" "),s("div",{staticClass:"product_header",staticStyle:{"margin-top":"50px"}},[s("el-button",[t._v("取消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.surechoseNumboxFn}},[t._v("确定添加")])],1)]),t._v(" "),s("el-dialog",{attrs:{title:"添加选择框",visible:t.isshowAddtitle,width:"30%",center:""},on:{"update:visible":function(e){t.isshowAddtitle=e}}},[s("div",{staticStyle:{"margin-bottom":"10px"}},[s("el-tag",{attrs:{type:"info"}},[t._v("属性名称：")]),t._v(" "),s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.inputTitle,callback:function(e){t.inputTitle=e},expression:"inputTitle"}},t._l(t.selectData,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})}))],1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.isshowAddtitle=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.sureSelectFn}},[t._v("确 定")])],1)]),t._v(" "),s("el-dialog",{attrs:{title:"添加数字区间",visible:t.centerDialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[s("div",{staticStyle:{"margin-bottom":"10px"}},[s("el-tag",{attrs:{type:"info"}},[t._v("属性名称：")]),t._v(" "),s("el-select",{attrs:{placeholder:"请选择"},on:{change:t.changeproValue},model:{value:t.propertyValue,callback:function(e){t.propertyValue=e},expression:"propertyValue"}},t._l(t.propertyOptions,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})}))],1),t._v(" "),s("div",[s("el-tag",{attrs:{type:"info"}},[t._v("单位：")]),t._v(" "),s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.unitValue,callback:function(e){t.unitValue=e},expression:"unitValue"}},t._l(t.unitOptions,function(t){return s("el-option",{key:t.id,attrs:{label:t.unit,value:t.unit}})}))],1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.sureNumFn}},[t._v("确 定")])],1)])],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"product_header"},[e("div",{staticClass:"chooseType"},[this._v("自定义")])])}]};var o=s("VU/8")(i,a,!1,function(t){s("LNXT")},null,null);e.default=o.exports}});