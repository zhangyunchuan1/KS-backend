webpackJsonp([68],{AHcC:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s={name:"BusinessManagement",components:{BreadCrumb:e("ZPfm").a},data:function(){return{breadData:[{id:1,name:"商家管理",urls:"/index/businessUser/BusinessUser",icon:"icon-home"},{id:2,name:"商家账户",urls:"/index/market/businessUser/businessAccount/BusinessAccount",icon:"icon-home"},{id:3,name:"商家账号管理",urls:"/index/market/businessUser/businessAccount/BusinessManagement",icon:"icon-home"}],userNameSearch:"",companyNameSearch:"",status:"",tableData:[],modifyInformationDialog:!1,imageUrl:"",signature:"",modifyPassWord:!1,rowData:{},newPassWord:"",repetnewPassWord:"",currentPage:1,pageSize:25,total:0}},mounted:function(){this.getlistData()},methods:{getlistData:function(){var t=this,a={company_name:this.companyNameSearch,user_name:this.userNameSearch,status:this.status};this.HttpClient.post("/admin/business/lists",a).then(function(a){console.log(a),200==a.data.code&&(t.tableData=a.data.data.data,t.total=a.data.data.total)})},userNameSearchFn:function(){this.getlistData()},companynameSearchFn:function(){this.getlistData()},filterStatus:function(t){this.getlistData()},currentChange:function(t){this.currentPage=t,this.getlistData()},handleAvatarSuccess:function(t,a){this.imageUrl=URL.createObjectURL(a.raw)},imageUpload:function(t){var a=this;this.HttpClient.form("/admin/uploadOneImage",{images:t}).then(function(t){console.log("res is:",t),200===t.data.code&&(a.$message.success(t.data.msg),a.imageUrl=t.data.path,a.isshowoldimg=!1)})},modifybasicInfoFn:function(t){this.rowData=t,this.modifyInformationDialog=!0},modifyPsdFn:function(t){this.modifyPassWord=!0,this.rowData=t},savemodifyInfoFn:function(){var t=this,a=this.imageUrl.substring(25);console.log(a);var e={uid:this.rowData.uid,avatar:a,signature:this.signature};this.HttpClient.post("/admin/business/updateAvatar",e).then(function(a){console.log(a),200===a.data.code&&(t.$message.success(a.data.msg),t.modifyInformationDialog=!1,setTimeout(function(){t.getlistData(),t.signature="",t.imageUrl=""},500))})},savePassWordFn:function(){var t=this;if(this.newPassWord===this.repetnewPassWord){var a={uid:this.rowData.uid,password:this.repetnewPassWord};this.HttpClient.post("/admin/business/updatePwd",a).then(function(a){200==a.data.code?(t.$message.success(a.data.msg),t.modifyPassWord=!1):t.$message.warning(a.data.msg)})}else this.$message.warning("两次密码输入不一致")}}},i={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"businessManagement"},[e("div",{staticClass:"businessManagement"},[e("BreadCrumb",{staticClass:"bread",attrs:{breadData:t.breadData}}),t._v(" "),e("div",{staticClass:"businessManagement_main"},[t._m(0),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"content_header"},[e("div",{staticClass:"content_header_search"},[e("el-input",{staticClass:"input-with-select",attrs:{placeholder:"用户名搜索"},model:{value:t.userNameSearch,callback:function(a){t.userNameSearch=a},expression:"userNameSearch"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.userNameSearchFn},slot:"append"})],1)],1),t._v(" "),e("div",{staticClass:"content_header_search"},[e("el-input",{staticClass:"input-with-select",attrs:{placeholder:"公司名字搜索"},model:{value:t.companyNameSearch,callback:function(a){t.companyNameSearch=a},expression:"companyNameSearch"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.companynameSearchFn},slot:"append"})],1)],1),t._v(" "),e("div",{staticClass:"content_header_search"},[e("el-select",{attrs:{clearable:"",placeholder:"审核状态"},on:{change:t.filterStatus},model:{value:t.status,callback:function(a){t.status=a},expression:"status"}},[e("el-option",{attrs:{value:"0",label:"删除"}}),t._v(" "),e("el-option",{attrs:{value:"1",label:"正常"}}),t._v(" "),e("el-option",{attrs:{value:"2",label:"注销"}}),t._v(" "),e("el-option",{attrs:{value:"3",label:"禁用"}})],1)],1)]),t._v(" "),e("div",{staticClass:"content_table"},[e("el-table",{attrs:{data:t.tableData,border:!0}},[e("el-table-column",{attrs:{label:"商家ID",align:"center",width:"100",prop:"id"}}),t._v(" "),e("el-table-column",{attrs:{label:"商家昵称",align:"center",width:"180","show-overflow-tooltip":"",prop:"company_name"}}),t._v(" "),e("el-table-column",{attrs:{label:"账号",align:"center","show-overflow-tooltip":"",width:"240",prop:"username"}}),t._v(" "),e("el-table-column",{attrs:{label:"商标LOGO",align:"center","show-overflow-tooltip":"",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"trademark_list"},[e("img",{attrs:{src:t.Tools.handleImg(a.row.avatar),alt:""}})])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"法人姓名",align:"center",width:"150",prop:"legal_person"}}),t._v(" "),e("el-table-column",{attrs:{label:"法人身份证",align:"center",width:"240",prop:"legal_idcard"}}),t._v(" "),e("el-table-column",{attrs:{label:"余额",align:"center",width:"150","show-overflow-tooltip":"",prop:"balance"}}),t._v(" "),e("el-table-column",{attrs:{label:"操作",align:"center","class-name":"mallReview_scope"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"mallReview_btm"},[e("el-button",{on:{click:function(e){t.modifyPsdFn(a.row)}}},[t._v("修改登录密码")]),t._v(" "),e("el-button",{on:{click:function(e){t.modifybasicInfoFn(a.row)}}},[t._v("修改基本信息")])],1)]}}])})],1),t._v(" "),t.total?e("el-pagination",{attrs:{layout:"prev, pager, next",total:t.total,"page-size":t.pageSize},on:{"current-change":t.currentChange}}):t._e()],1)])])],1),t._v(" "),e("el-dialog",{attrs:{width:"400px","custom-class":"modifyInformationDialog",visible:t.modifyInformationDialog},on:{"update:visible":function(a){t.modifyInformationDialog=a}}},[e("span",{staticClass:"modifyInformationDialog_title",attrs:{slot:"title"},slot:"title"},[e("i",{staticClass:"iconfont icon-xinxi"}),t._v("基本信息\n    ")]),t._v(" "),e("div",{staticClass:"modifyInformation_dialog_box"},[e("div",{staticClass:"dialog_left"},[t._v("头像：")]),t._v(" "),e("div",{staticClass:"dialog_right"},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.imageUpload}},[t.imageUrl||""===this.rowData.avatar?t.imageUrl?e("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"}):e("img",{staticClass:"avatar",attrs:{src:t.Tools.handleImg(this.rowData.avatar)}})])],1)]),t._v(" "),e("div",{staticClass:"modifyInformation_dialog_box"},[e("div",{staticClass:"dialog_left"},[t._v("签名：")]),t._v(" "),e("div",{staticClass:"dialog_right"},[e("el-input",{model:{value:t.signature,callback:function(a){t.signature=a},expression:"signature"}})],1)]),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.modifyInformationDialog=!1}}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.savemodifyInfoFn}},[t._v("保 存")])],1)]),t._v(" "),e("el-dialog",{attrs:{width:"350px","custom-class":"modifyPassWord",visible:t.modifyPassWord},on:{"update:visible":function(a){t.modifyPassWord=a}}},[e("span",{staticClass:"modifyPassWord_title",attrs:{slot:"title"},slot:"title"},[e("i",{staticClass:"iconfont icon-mima"}),t._v("修改密码\n    ")]),t._v(" "),e("div",{staticClass:"modifyPassWord_box"},[e("el-input",{attrs:{placeholder:"输入新密码"},model:{value:t.newPassWord,callback:function(a){t.newPassWord=a},expression:"newPassWord"}}),t._v(" "),e("el-input",{attrs:{placeholder:"重复输入新密码"},model:{value:t.repetnewPassWord,callback:function(a){t.repetnewPassWord=a},expression:"repetnewPassWord"}})],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.modifyPassWord=!1}}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.savePassWordFn}},[t._v("保 存")])],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"title"},[a("p",[this._v("商家账号管理")])])}]};var o=e("VU/8")(s,i,!1,function(t){e("nqVo")},null,null);a.default=o.exports},nqVo:function(t,a){}});