webpackJsonp([84],{"Fu+c":function(e,t){},grT2:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("ZPfm"),l=i("+jNi"),s={name:"VideoTitle",components:{BreadCrumb:a.a,ModalDelete:l.a},data:function(){return{breadData:[{id:1,name:"功能控制",urls:"/index/functionControl",icon:"icon-home"},{id:2,name:"板块标题管理",urls:"/index/functionControl/plateTitleManagement/plate-title-management",icon:"icon-home"},{id:3,name:"视频标题",urls:"/index/functionControl/plateTitleManagement/video-title",icon:"icon-home"}],selectVideotitle:"",menuList:{},radio7:"1",addTypetitle:"",uploadeImgUrl:"",imageUrl:"",centerDialogVisible:!1,createDialogVisible:!1,changeName:"",listData:[],videoTitleId:"",deleteId:null}},mounted:function(){this.getTypelist()},methods:{imageUpload:function(e){var t=this;console.log(e),this.HttpClient.form("/admin/uploadOneImage",{images:e}).then(function(e){console.log("res is:",e),200===e.data.code&&(t.$message.success(e.data.msg),t.imageUrl=e.data.path,t.uploadeImgUrl=e.data.path,t.isshowoldimg=!1)})},handleAvatarSuccess:function(){},getlistData:function(){var e=this;console.log(this.selectVideotitle);var t={type:this.selectVideotitle};this.HttpClient.post("/admin/videoTitle/getList",t).then(function(t){200===t.data.code&&t.data.data.length?e.listData=t.data.data:e.listData=[]})},getTypelist:function(){var e=this;this.HttpClient.post("/admin/menu/getList",{menu_type:2,type:7}).then(function(t){console.log(t.data),200===t.data.code&&(e.menuList=t.data.data,e.selectVideotitle=e.menuList[1].menu_id,e.getlistData())})},changeModel:function(e){this.selectVideotitle=e.menu_id,this.getlistData()},handleOpenCreate:function(){this.createDialogVisible=!0},addTypetitleFn:function(){var e=this,t={name:this.addTypetitle,type:this.selectVideotitle,icon:this.uploadeImgUrl};console.log(t),this.HttpClient.post("/admin/videoTitle/create",t).then(function(t){200===t.data.code&&(e.$message.success(t.data.msg),setTimeout(function(){e.getlistData(),e.createDialogVisible=!1},500),e.addTypetitle="")})},changeNameFn:function(e){this.changeName=e.name,this.videoTitleId=e.id,this.imageUrl=e.icon,this.centerDialogVisible=!0},sureChangenameFn:function(){var e=this,t={id:this.videoTitleId,name:this.changeName,type:this.selectVideotitle,icon:this.imageUrl};this.HttpClient.post("/admin/videoTitle/edit",t).then(function(t){var i=t.data,a=i.code,l=i.msg;200===a&&(e.$message.success(l),e.centerDialogVisible=!1,e.changeName="",setTimeout(function(){e.getlistData()},500))})},deleteFn:function(e){console.log(e),this.deleteId=e.id,this.$refs.delete.deleteDialog=!0},confirmDelete:function(){var e=this,t={id:this.deleteId};this.HttpClient.post("/admin/videoTitle/destroy",t).then(function(t){200===t.data.code&&(e.$message.success(t.data.msg),setTimeout(function(){e.getlistData()},500))})}}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"videoTitle"},[i("BreadCrumb",{staticClass:"bread",attrs:{breadData:e.breadData}}),e._v(" "),i("div",{staticClass:"video_titlebox"},[e._m(0),e._v(" "),i("div",{staticClass:"videotitle_header"},[i("div",{staticClass:"choosetitle"},[e._v("板块选择")]),e._v(" "),i("el-radio-group",{attrs:{size:"small"},model:{value:e.selectVideotitle,callback:function(t){e.selectVideotitle=t},expression:"selectVideotitle"}},e._l(e.menuList,function(t,a){return i("el-radio",{key:a,attrs:{label:t.menu_id,border:""},on:{change:function(i){e.changeModel(t)}}},[e._v(e._s(t.name))])}))],1),e._v(" "),i("div",{staticClass:"ws-videotitle_header"},[i("el-radio",{attrs:{label:"1",border:""},model:{value:e.radio7,callback:function(t){e.radio7=t},expression:"radio7"}},[e._v("视频标题")]),e._v(" "),i("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleOpenCreate}})],1),e._v(" "),i("div",{staticClass:"videotitle_header videolist_box"},e._l(e.listData,function(t,a){return i("div",{key:a,staticClass:"onevideo"},[i("div",[i("img",{attrs:{src:t.icon,alt:""}}),e._v(" "),i("div",{staticClass:"title"},[e._v(e._s(t.name))]),e._v(" "),i("div",[i("el-button",{staticClass:"el-icon-edit",attrs:{size:"mini",type:"info",plain:""},on:{click:function(i){e.changeNameFn(t)}}}),e._v(" "),i("el-button",{staticClass:"el-icon-delete",attrs:{size:"mini",type:"danger",plain:""},on:{click:function(i){e.deleteFn(t)}}})],1)])])})),e._v(" "),i("div",{staticClass:"alertbox"},[i("el-dialog",{attrs:{title:"修改",visible:e.centerDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[i("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.changeName,callback:function(t){e.changeName=t},expression:"changeName"}}),e._v(" "),i("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.imageUpload}},[""!==!e.imageUrl?i("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):e.imageUrl?i("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.sureChangenameFn}},[e._v("保 存")])],1)],1)],1)]),e._v(" "),i("el-dialog",{attrs:{title:"新增",visible:e.createDialogVisible,width:"400px",left:""},on:{"update:visible":function(t){e.createDialogVisible=t}}},[i("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.addTypetitle,callback:function(t){e.addTypetitle=t},expression:"addTypetitle"}}),e._v(" "),i("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.imageUpload}},[""!==!e.imageUrl?i("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):e.imageUrl?i("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.createDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.addTypetitleFn}},[e._v("保 存")])],1)],1),e._v(" "),i("ModalDelete",{ref:"delete",on:{doDelete:e.confirmDelete}})],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"videopage_title"},[t("div",{staticClass:"title"},[this._v("视频标题")])])}]};var o=i("VU/8")(s,n,!1,function(e){i("Fu+c")},null,null);t.default=o.exports}});