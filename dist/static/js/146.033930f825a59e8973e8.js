webpackJsonp([146],{"/zGu":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"ModifyProductType",components:{BreadCrumb:a("ZPfm").a},data:function(){return{breadData:[{id:1,name:"功能控制",urls:"/index/functionControl",icon:"icon-home"},{id:2,name:"商城菜单管理",urls:"/index/functionControl/mallManagement/mall-management",icon:"icon-home"},{id:3,name:"修改产品类型",urls:"/index/functionControl/mallManagement/modify-product-type",icon:"icon-home"}],listData:[],productamendID:null,selectVideotitle:"",selectVideotitleid:"",menuList:[],productType:"",productID:null,currentPage:1,pageSize:25,total:0,centerDialogVisible:!1,amendname:"",imgurl:"",isshowoldimg:!0,amenddata:[],imageUrl:"",arrData:[],selectTypeotitle:"",titleTags:[],typeListModel:"",typeListModelID:"",typeList:[{type:1,name:"单选"},{type:2,name:"多选"}],ifwordList:[{type:0,name:"必填"},{type:1,name:"选填"}],selectisnotitle:"",selectisnotitleID:"",tags:[],tagvalue:{},inputTitle:"",productchoseType:"",selectnewTypeotitle:"",newtitleTags:[],isshownewData:!1,numarrData:[],NumcenterDialogVisible:!1,typeNumListModel:"",typeNumListModelID:"",typeNumList:[{type:3,name:"整数"},{type:4,name:"一位小数"},{type:5,name:"两位小数"}],selectNumTypeotitle:"",selectNumTypeotitleID:"",titleNumTags:[],selectisNumtitle:"",propertyOptions:[],propertyValue:"",unitOptions:[],unitValue:"",isshowNumtype:!1,selectNumnewTypeotitle:"",titlenewNumTags:[]}},mounted:function(){this.getTypelist(),this.getlistData()},methods:{getTypelist:function(){var t=this;this.HttpClient.post("/admin/menu/getList",{menu_type:1,type:0}).then(function(e){200===e.data.code&&(t.menuList=e.data.data)})},getlistData:function(){var t=this,e={size:this.pageSize,page:this.currentPage,hasProperty:!0,folder:this.selectVideotitleid,id:this.productID,name:this.productType};console.log(e),this.HttpClient.post("/admin/category/lists",e).then(function(e){200===e.data.code&&(t.listData=e.data.data.data,console.log(t.listData),t.total=e.data.data.total)})},changeproTypeModel:function(t){console.log(t),this.selectVideotitleid=t.menu_id,this.getlistData()},searchProductType:function(){console.log(this.productType),this.getlistData()},searchProductID:function(){this.getlistData()},amendList:function(t){this.centerDialogVisible=!0,this.productamendID=t.id,this.getamendinfoFn()},getamendinfoFn:function(){var t=this;this.HttpClient.get("/admin/category/edit",{id:this.productamendID}).then(function(e){if(200===e.data.code){console.log(e.data.data);var a=e.data.data;t.amenddata=e.data.data,t.amendname=a.name,t.imgurl=a.image;var i=[],s=[];a.property.forEach(function(t){1==t.rule||2==t.rule?i.push(t):s.push(t)}),t.arrData=i,t.numarrData=s;var l=[],o=[];i.forEach(function(t){l.push(t.property_name)}),s.forEach(function(t){o.push(t.property_name)}),t.titleTags=l,t.titleNumTags=o}})},changeTitleFn:function(t){var e=this;this.selectnewTypeotitle="",this.isshownewData=!0,this.arrData.forEach(function(a){a.property_name==t&&(e.tags=a.values,console.log(a),e.tagvalue=a,e.typeListModel=a.rule,e.selectisnotitle=a.selective)})},changeNumTitleFn:function(t){var e=this;this.isshowNumtype=!0,console.log(t),console.log(this.numarrData),this.numarrData.forEach(function(a){a.property_name==t&&(console.log(a),e.typeNumListModel=a.rule,e.selectisNumtitle=a.selective)})},changenewNumTitleFn:function(t){console.log("12345676"),this.isshowNumtype=!0,this.selectNumnewTypeotitle=t},changenewTitlenewFn:function(t){this.typeListModel="",this.selectisnotitle="",this.selectTypeotitle=t,this.tags=[],this.isshownewData=!0},imageUpload:function(t){var e=this;console.log(t),this.HttpClient.form("/admin/uploadOneImage",{images:t}).then(function(t){console.log(t.data.path),200===t.data.code&&(e.$message.success(t.data.msg),e.imageUrl=t.data.path,e.isshowoldimg=!1)})},addproductTitle:function(){var t=this;if(this.isshownewData)this.tags.push(this.productchoseType),this.productchoseType="";else{var e={property_id:this.tagvalue.property_id,value:this.productchoseType};this.HttpClient.post("/admin/category/propertyValue",e).then(function(e){console.log(e.data),200==e.data.code&&(t.$message.success(e.data.msg),t.tags.push(t.productchoseType),t.productchoseType="")})}console.log(this.tags)},changeisnoModel:function(t){this.selectisnotitleID=t.type},changetypeModel:function(t){console.log(t),this.typeListModelID=t.type},addtypeTitle:function(){this.newtitleTags.push(this.inputTitle),this.inputTitle=""},deletetypeTitle:function(t){var e=this;console.log(this.arrData);var a="";this.arrData.forEach(function(e){console.log(e),e.property_name==t&&(a=e.property_id)}),this.HttpClient.delete("/admin/category/property/"+a).then(function(a){console.log(a.data),200==a.data.code&&(e.$message.success(a.data.msg),e.titleTags.forEach(function(a,i){a==t&&e.titleTags.splice(i,1)}))})},deletetypenewTitle:function(t){var e=this;this.newtitleTags.forEach(function(a,i){a==t&&e.newtitleTags.splice(i,1)})},deleteInforFn:function(t){var e=this;console.log(this.isshowNumtype),this.isshownewData?this.tags.forEach(function(a,i){t===a&&e.tags.splice(i,1)}):this.HttpClient.delete("/admin/category/propertyValue",{pc_id:t.pc_id}).then(function(a){console.log(a.data),200==a.data.code&&(e.tags.forEach(function(a,i){t===a&&e.tags.splice(i,1)}),e.$message.success(a.data.msg))})},addNumbox:function(){this.NumcenterDialogVisible=!0,this.NumcenterDialogVisible&&this.getpropertyOptions()},changeproValue:function(){this.getnuitlist()},changeNumtypeModel:function(t){this.typeNumListModelID=t.type},getpropertyOptions:function(){var t=this;this.HttpClient.post("/admin/numInterval/getName").then(function(e){console.log(e),t.propertyOptions=e.data.data})},changeisNumModel:function(t){this.selectNumTypeotitleID=t.type},getnuitlist:function(){var t=this,e={name:this.propertyValue};this.HttpClient.post("/admin/numInterval/getListByName",e).then(function(e){console.log(e.data.data),t.unitOptions=e.data.data})},sureNumFn:function(){this.NumcenterDialogVisible=!1;var t=this.propertyValue+"("+this.unitValue+")";this.titlenewNumTags.push(t)},deleteNumTitle:function(t){var e=this;this.isshowNumtype=!1;var a="";this.numarrData.forEach(function(e){console.log(e),e.property_name==t&&(a=e.property_id)}),this.HttpClient.delete("/admin/category/property/"+a).then(function(a){console.log(a.data),200==a.data.code&&(e.$message.success(a.data.msg),e.titleNumTags.forEach(function(a,i){t===a&&e.titleNumTags.splice(i,1)}))})},deleteNumnewTitle:function(t){var e=this;console.log(this.titlenewNumTags),this.titlenewNumTags.forEach(function(a,i){a==t&&e.titlenewNumTags.splice(i,1)})},sureSaveNumFn:function(){var t=this,e={category_id:this.amenddata.id,name:this.selectNumnewTypeotitle,values:[this.unitValue],rule:this.typeNumListModelID,selective:this.selectNumTypeotitleID,quantity:1};this.HttpClient.post("/admin/category/property",e).then(function(e){console.log(e.data),200==e.data.code&&(t.$message.success(e.data.msg),setTimeout(function(){t.getamendinfoFn(),t.titlenewNumTags=[],t.isshowNumtype=!1,t.titleNumTags=[]},500))})},sureSavechoseFn:function(){var t=this;console.log(this.selectTypeotitle);var e={category_id:this.amenddata.id,name:this.selectnewTypeotitle,values:this.tags,rule:this.typeListModelID,selective:this.selectisnotitleID,quantity:this.tags.length};this.HttpClient.post("/admin/category/property",e).then(function(e){console.log(e),200==e.data.code&&(t.$message.success(e.data.msg),setTimeout(function(){t.getamendinfoFn(),t.newtitleTags=[]},500))})},sureSaveFn:function(){var t=this;console.log(this.amenddata);var e={id:this.amenddata.id,name:this.amendname,image:this.imageUrl};this.HttpClient.post("/admin/category/edit",e).then(function(e){console.log(e.data),200==e.data.code&&(t.$message.success(e.data.msg),setTimeout(function(){t.getlistData()},500))})},currentChange:function(t){this.currentPage=t,this.getlistData()}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"productmanagementBox"},[a("BreadCrumb",{staticClass:"bread",attrs:{breadData:t.breadData}}),t._v(" "),a("div",{staticClass:"productbox"},[a("div",{staticClass:"headerbox"},[t._v("修改产品类型")]),t._v(" "),a("div",{staticClass:"product_header"},[a("div",{staticClass:"choseType"},[t._v("选择")]),t._v(" "),a("el-radio-group",{attrs:{size:"small"},model:{value:t.selectVideotitle,callback:function(e){t.selectVideotitle=e},expression:"selectVideotitle"}},t._l(t.menuList,function(e,i){return a("el-radio",{key:i,attrs:{label:e.name,border:""},on:{change:function(a){t.changeproTypeModel(e)}}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("div",{staticClass:"product_header"},[a("el-input",{attrs:{placeholder:"请输入产品类型",clearable:""},model:{value:t.productType,callback:function(e){t.productType=e},expression:"productType"}}),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.searchProductType}},[t._v("搜索")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入产品ID",clearable:""},model:{value:t.productID,callback:function(e){t.productID=e},expression:"productID"}}),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.searchProductID}},[t._v("搜索")])],1),t._v(" "),a("div",[a("div",{staticClass:"product_header"},t._l(t.listData,function(e,i){return a("div",{key:i,staticClass:"imgAndwordBox"},[a("div",{staticClass:"imgbox"},[a("img",{staticClass:"image",attrs:{src:t.Tools.handleImg(e.image)}})]),t._v(" "),a("div",{staticStyle:{padding:"14px"}},[a("p",[t._v(t._s(e.name))]),t._v(" "),a("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(a){t.amendList(e)}}},[t._v("修改")])],1)])})),t._v(" "),a("div",{staticClass:"block"},[t.total?a("el-pagination",{attrs:{layout:"prev, pager, next",total:t.total,"page-size":t.pageSize},on:{"current-change":t.currentChange}}):t._e()],1)]),t._v(" "),a("div",[a("el-dialog",{attrs:{title:"修改",visible:t.centerDialogVisible,width:"50%",center:""},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("div",{staticClass:"productname"},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.amendname,callback:function(e){t.amendname=e},expression:"amendname"}}),t._v(" "),a("div",{staticStyle:{display:"flex","margin-top":"10px"}},[t.isshowoldimg?a("div",{staticClass:"productimage"},[a("img",{attrs:{src:t.Tools.handleImg(t.imgurl),alt:""}})]):t._e(),t._v(" "),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/","show-file-list":!1,"before-upload":t.imageUpload}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("div",{staticStyle:{margin:"20px"}},[a("span",{staticClass:"dialog-footer",staticStyle:{"margin-left":"5%"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.sureSaveFn}},[t._v("确 定")])],1)]),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("div",{staticStyle:{width:"50%"}},[a("div",{staticClass:"product_header"},[a("div",{staticClass:"titlebox"},[t._v("选择框")]),t._v(" "),a("div",{staticClass:"customTitle"},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.inputTitle,callback:function(e){t.inputTitle=e},expression:"inputTitle"}}),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.addtypeTitle}})],1)]),t._v(" "),a("div",{staticClass:"product_header"},[a("el-card",{staticClass:"box-card"},[a("el-radio-group",{attrs:{size:"small"},model:{value:t.selectTypeotitle,callback:function(e){t.selectTypeotitle=e},expression:"selectTypeotitle"}},t._l(t.titleTags,function(e,i){return a("el-radio",{key:i,attrs:{label:e,border:""},on:{change:function(a){t.changeTitleFn(e)}}},[t._v("\n                      "+t._s(e)+"\n                      "),a("el-button",{attrs:{icon:"el-icon-delete"},on:{click:function(a){t.deletetypeTitle(e)}}})],1)}))],1),t._v(" "),a("el-card",{staticClass:"box-card"},[a("el-radio-group",{attrs:{size:"small"},model:{value:t.selectnewTypeotitle,callback:function(e){t.selectnewTypeotitle=e},expression:"selectnewTypeotitle"}},t._l(t.newtitleTags,function(e,i){return a("el-radio",{key:i,attrs:{label:e,border:""},on:{change:function(a){t.changenewTitlenewFn(e)}}},[t._v("\n                      "+t._s(e)+"\n                      "),a("el-button",{attrs:{icon:"el-icon-delete"},on:{click:function(a){t.deletetypenewTitle(e)}}})],1)}))],1)],1),t._v(" "),a("div",{staticClass:"product_header"},[a("el-card",{staticClass:"box-card"},[t.isshownewData?a("div",[a("div",{staticClass:"smallbox"},[a("div",{staticClass:"choseType"},[t._v("类型")]),t._v(" "),a("el-radio-group",{attrs:{size:"small"},model:{value:t.typeListModel,callback:function(e){t.typeListModel=e},expression:"typeListModel"}},t._l(t.typeList,function(e,i){return a("el-radio",{key:i,attrs:{label:e.type,border:""},on:{change:function(a){t.changetypeModel(e)}}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("div",{staticClass:"smallbox"},[a("div",{staticClass:"choseType"},[t._v("是否必填")]),t._v(" "),a("el-radio-group",{attrs:{size:"small"},model:{value:t.selectisnotitle,callback:function(e){t.selectisnotitle=e},expression:"selectisnotitle"}},t._l(t.ifwordList,function(e,i){return a("el-radio",{key:i,attrs:{label:e.type,border:""},on:{change:function(a){t.changeisnoModel(e)}}},[t._v(t._s(e.name))])}))],1)]):t._e(),t._v(" "),a("div",{},[a("div",{staticClass:"product_header nowchoseType"},[a("div",{staticClass:"choseType"},[t._v("现有选项")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.productchoseType,callback:function(e){t.productchoseType=e},expression:"productchoseType"}}),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.addproductTitle}})],1),t._v(" "),a("div",{staticClass:"product_header"},[a("el-card",{staticClass:"box-card"},t._l(t.tags,function(e,i){return a("el-tag",{key:i,attrs:{closable:"",type:""},on:{close:function(a){t.deleteInforFn(e)}}},[t._v(t._s(e.value||e))])})),t._v(" "),a("span",{staticClass:"dialog-footer",staticStyle:{"margin-left":"40%","margin-top":"20px"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.NumcenterDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.sureSavechoseFn}},[t._v("确 定")])],1)],1)])])],1)]),t._v(" "),a("div",{staticStyle:{width:"50%"}},[a("div",{staticClass:"product_header"},[a("div",{staticClass:"titlebox"},[t._v("数字区间")]),t._v(" "),a("div",{staticClass:"customTitle"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.addNumbox}})],1)]),t._v(" "),a("div",{staticClass:"product_header"},[a("el-card",{staticClass:"box-card"},[a("el-radio-group",{attrs:{size:"small"},model:{value:t.selectNumTypeotitle,callback:function(e){t.selectNumTypeotitle=e},expression:"selectNumTypeotitle"}},t._l(t.titleNumTags,function(e,i){return a("el-radio",{key:i,attrs:{label:e,border:""},on:{change:function(a){t.changeNumTitleFn(e)}}},[t._v("\n                      "+t._s(e)+"\n                      "),a("el-button",{attrs:{icon:"el-icon-delete"},on:{click:function(a){t.deleteNumTitle(e)}}})],1)}))],1),t._v(" "),a("el-card",{staticClass:"box-card"},[a("el-radio-group",{attrs:{size:"small"},model:{value:t.selectNumnewTypeotitle,callback:function(e){t.selectNumnewTypeotitle=e},expression:"selectNumnewTypeotitle"}},t._l(t.titlenewNumTags,function(e,i){return a("el-radio",{key:i,attrs:{label:e,border:""},on:{change:function(a){t.changenewNumTitleFn(e)}}},[t._v("\n                      "+t._s(e)+"\n                      "),a("el-button",{attrs:{icon:"el-icon-delete"},on:{click:function(a){t.deleteNumnewTitle(e)}}})],1)}))],1)],1),t._v(" "),a("div",{staticClass:"product_header"},[a("el-card",{staticClass:"box-card"},[t.isshowNumtype?a("div",[a("div",{staticClass:"smallbox"},[a("div",{staticClass:"choseType"},[t._v("类型")]),t._v(" "),a("el-radio-group",{attrs:{size:"small"},model:{value:t.typeNumListModel,callback:function(e){t.typeNumListModel=e},expression:"typeNumListModel"}},t._l(t.typeNumList,function(e,i){return a("el-radio",{key:i,attrs:{label:e.type,border:""},on:{change:function(a){t.changeNumtypeModel(e)}}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("div",{staticClass:"smallbox"},[a("div",{staticClass:"choseType"},[t._v("是否必填")]),t._v(" "),a("el-radio-group",{attrs:{size:"small"},model:{value:t.selectisNumtitle,callback:function(e){t.selectisNumtitle=e},expression:"selectisNumtitle"}},t._l(t.ifwordList,function(e,i){return a("el-radio",{key:i,attrs:{label:e.type,border:""},on:{change:function(a){t.changeisNumModel(e)}}},[t._v(t._s(e.name))])}))],1)]):t._e()])],1),t._v(" "),a("div",{staticClass:"product_header"},[a("span",{staticClass:"dialog-footer",staticStyle:{"margin-left":"40%","margin-top":"20px"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.NumcenterDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.sureSaveNumFn}},[t._v("确 定")])],1)])])])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"添加数字区间",visible:t.NumcenterDialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.NumcenterDialogVisible=e}}},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-tag",{attrs:{type:"info"}},[t._v("属性名称：")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.changeproValue},model:{value:t.propertyValue,callback:function(e){t.propertyValue=e},expression:"propertyValue"}},t._l(t.propertyOptions,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})}))],1),t._v(" "),a("div",[a("el-tag",{attrs:{type:"info"}},[t._v("单位：")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.unitValue,callback:function(e){t.unitValue=e},expression:"unitValue"}},t._l(t.unitOptions,function(t){return a("el-option",{key:t.id,attrs:{label:t.unit,value:t.unit}})}))],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.NumcenterDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.sureNumFn}},[t._v("确 定")])],1)])],1)])],1)},staticRenderFns:[]};var l=a("VU/8")(i,s,!1,function(t){a("DcCl")},null,null);e.default=l.exports},DcCl:function(t,e){}});